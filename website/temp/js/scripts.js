var ContactFormModule=function(){return{initContactFormListener:function(){$("#contact-form .btn-site").on("click",function(){$("#contact-form").submit()}),$("#contact-form").submit(function(e){if(e.preventDefault(),void 0===$("#contact-form .btn-site").attr("disabled")){$("#contact-form .btn-site").attr("disabled",!0),$("#contact-form .btn-site").addClass("spinning"),$("#contact-form .btn-site").animateCss("pulse");var t=$("#contact-form").find("input, textarea, select"),s={};t.each(function(){this.name&&("checkbox"==this.type||"radio"==this.type?this.checked&&(s[this.name]=this.value):s[this.name]=this.value)}),$.ajax({url:"assets/php/handleajaxform.php",method:"POST",data:s,success:function(e){if($("div[data-error-id]").text(""),$("#contact-form input, #contact-form textarea").removeClass("form-error"),$("#send-result").text(""),Object.keys(e.errors).length>0)for(var t in e.errors)console.log("error in "+t+": "+e.errors[t]),$('div[data-error-id="'+t+'"]').text(e.errors[t]).hide().slideDown(),$('*[name="'+t+'"]').addClass("form-error"),$('*[name="'+t+'"]').animateCss("shake");else console.log("All validation passed succesfully!"),$("#send-result").text("Thank you. Your message has been sent."),$("#send-result").removeClass("alert-danger").addClass("alert-success"),$("#send-result").show().animateCss("bounceIn",function(){$("input").val(""),$("textarea").val(""),$("#send-result").delay(5e3).slideUp()})},error:function(){$("#send-result").removeClass("alert-success"),$("#send-result").addClass("alert-danger"),$("#send-result").text("Sorry... Your message could not have been delivered."),$("#send-result").slideDown()},complete:function(){$("#contact-form .btn-site").removeAttr("disabled"),$("#contact-form .btn-site").removeClass("spinning"),$("#contact-form .btn-site").animateCss("pulse")}})}})}}}();
var MapModule=function(){var e,n={lat:50.048822,lng:15.200242};return{initContactMap:function(){var a=[{featureType:"all",elementType:"all",stylers:[{saturation:-100},{gamma:.5}]}],t=new google.maps.Map(document.getElementById("contact-map"),{center:n,scrollwheel:!1,streetViewControl:!0,streetViewControl:{position:google.maps.ControlPosition.LEFT_BOTTOM},mapTypeControl:!0,mapTypeControlOptions:{position:google.maps.ControlPosition.BOTTOM_LEFT},zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},styles:a,zoom:8});e=t;new google.maps.Marker({map:t,position:n,title:"Kamenictv√≠ Erben",icon:{url:"assets/images/IE_logo_rounded_pointer.png",scaledSize:new google.maps.Size(150,150)}});e.panBy(0,-$("nav.navbar").height())},placeContactListeners:function(){$(".btn-map").on("click",function(a){a.preventDefault();var t=$(this);if(window.addEventListener("orientationchange",function(){t.children().hasClass("fa-expand")&&(window.matchMedia("(orientation: landscape)").matches&&window.innerWidth<767?$("#contact-map").animate({height:"75vh"},500,function(){google.maps.event.trigger(e,"resize"),e.setCenter(n),e.panBy(0,-$("nav.navbar").height())}):$("#contact-map").animate({height:"50vh"},500,function(){google.maps.event.trigger(e,"resize"),e.setCenter(n),e.panBy(0,-$("nav.navbar").height())}))},!1),t.children().hasClass("fa-expand"))return t.children().removeClass("fa-expand").addClass("fa-compress"),void $("#contact-map").animate({height:"100vh"},500,function(){google.maps.event.trigger(e,"resize"),e.setCenter(n),e.panBy(0,-$("nav.navbar").height())});t.children().hasClass("fa-compress")&&(t.children().removeClass("fa-compress").addClass("fa-expand"),window.matchMedia("(orientation: landscape)").matches&&window.innerWidth<767?$("#contact-map").animate({height:"75vh"},500,function(){google.maps.event.trigger(e,"resize"),e.setCenter(n),e.panBy(0,-$("nav.navbar").height())}):$("#contact-map").animate({height:"50vh"},500,function(){google.maps.event.trigger(e,"resize"),e.setCenter(n),e.panBy(0,-$("nav.navbar").height())}))})}}}();
$(function(e){"object"!=typeof e.mySite&&(e.mySite={});var n=[{carousel:"#main-carousel",interval:7e5,pause:"none"},{carousel:"#about-carousel",interval:5e5,pause:"none"},{carousel:"#carouselTombstones",interval:3e5,pause:"none"},{carousel:"#carouselGarden",interval:3e5,pause:"none"},{carousel:"#carouselRestorations",interval:3e5,pause:"none"},{carousel:"#CarouselMonuments",interval:3e5,pause:"none"}];$(".loader-wrapper").hide(),$.fn.extend({animateCss:function(e,n){return this.addClass("animated "+e).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("animated "+e),$.isFunction(n)&&n()}),this}}),initCarousels=function(e){for(var n=0;n<e.length-1;n++)$(e[n].carousel).carousel({interval:e[n].interval});console.log("carousels initialized")},initCarousels(n),e.mySite.carouselsSetup=n,e.mySite.initCarousels=initCarousels}(window));
!function(a,t){var n=["cz","en"],e=function(a){return new e.init(a)};e.prototype={getKeyVal:function(a){return self=this,function(){a=a.trim();for(var t,n=0;n<=e.data.length-1;n++){if(e.data[n].datatag===a)return t=e.data[n][self.activeLang];t=""}return t}()},switchLang:function(a){self=this;for(var n=t("[data-lang]").length,e=0;e<=n-1;e++){var i=t(t("[data-lang]")[e]).data("lang");value=LNG$(a).getKeyVal(i),void 0===value?console.log("Language tag '"+i+"' is not defined in language database for: "+a):""!==value.trim()&&(value.search("<ph>")>-1?(value=value.substr(4,value.length),t(t("[data-lang]")[e]).attr("placeholder",value)):t(t("[data-lang]")[e]).text(LNG$(a).getKeyVal(i)).animateCss("pulse"),t(t("[data-lang]")[e]).css("visibility","visible"))}},getSelectedLang:function(){return t(".lang-switcher>span").text().toLowerCase().trim()}},e.init=function(a){this.activeLang=a||n[0]},e.init.prototype=e.prototype,a.Lang=a.LNG$=e,function(a,n){t.getJSON(a,function(){}).done(function(a){console.log("lang data loaded..."),n(a)}).fail(function(a,t,n){console.log("--- error ---"),console.log(a)}).always(function(){})}("./assets/data/lang.json",function(a){e.data=a;var n=t(".lang-switcher>span").text().trim();LNG$(n).switchLang(n)})}(window,jQuery);
$(function(n){function e(){console.log("navMenu initialized");var e={};$cachedItems=$("#mainNavbar [data-menuitem]"),$($cachedItems).each(function(n,t){e[$(t).data("menuitem")]=""}),n.mySite.cachedPage=e,$("#mainNavbar").on("show.bs.collapse",function(){$(".navbar .navbar-collapse").removeClass("order-2").addClass("order-5"),$(".hamburger__menu-icon").addClass("hamburger__menu-icon--close-x")}),$("#mainNavbar").on("hidden.bs.collapse",function(){$(".navbar .navbar-collapse").removeClass("order-5").addClass("order-2")}),$("#mainNavbar").on("hide.bs.collapse",function(){$(".hamburger__menu-icon").removeClass("hamburger__menu-icon--close-x")}),$(".nav-item").on("click",function(n){if(n.preventDefault(),!d){var e=$(this).children(".nav-link").attr("href").trim().toLowerCase();t($(this).children(".nav-link").data("menuitem").trim().toLowerCase(),this,e)}})}function t(n,e,t,i){d=!0,"string"!=typeof menuItemName&&(menuItemName=""),lang=LNG$().getSelectedLang(),e=e||"",t=t||"","function"!=typeof i&&(i=function(){}),$(e).parent().children(".nav-item").removeClass("active"),$(e).addClass("active"),$("#mainNavbar").collapse("hide"),$("#ajax-container").fadeOut(500,function(){$("#ajax-content").hide(),$(".loader-wrapper").fadeIn(500),$("body,html").stop().animate({scrollTop:0},"50"),$(this).remove(),""===mySite.cachedPage[n]?$("#ajax-content").load(t+" #ajax-container",function(e,t){"success"===t?(console.log("Loaded '"+n+"' from SERVER..."),a(function(){LNG$(lang).switchLang(lang),mySite.cachedPage[n]=$(e).find("#ajax-container"),mapInitFlag="contact"===n,m[n](i,mapInitFlag)})):"error"===t&&($(".loader-wrapper").hide(),console.log("Error loading from server..."))}):(console.log("Loaded '"+n+"' from CACHE..."),$(mySite.cachedPage[n]).appendTo("#ajax-content"),a(function(){LNG$(lang).switchLang(lang),m[n](i)}))})}function a(n){"function"!=typeof n&&(n=function(){}),$("#ajax-container").show(),$(".loader-wrapper").hide(),$("#ajax-content").fadeIn(500,function(){n()})}function o(n,e,t){"function"!=typeof t&&(t=function(){}),$(e).append($("<script />",{src:n,async:!0,defer:!0})),t()}function c(){clearInterval(mySite.btnInterval),mySite.btnInterval=setInterval(function(){$(".btn-down").animateCss("bounce")},3e3);var n=0;$(window).on("scroll",function(){var e=$(window).height(),t=$(window).scrollTop();n=e/5,t<0&&(t=0),(e-n)/t>1?$(".btn-move-up").is(":visible")&&$(".btn-move-up").animateCss("bounceOut",function(){$(".btn-move-up").hide(),$(".btn-down").show().animateCss("bounceIn")}):$(".btn-move-up").is(":visible")||$(".btn-down").animateCss("bounceOut",function(){$(".btn-down").hide(),$(".btn-move-up").show(),$(".btn-move-up").animateCss("bounceIn")})}),$(".btn-move-up").on("click",function(){$("body,html").stop().animate({scrollTop:0},"700","swing")}),$(".btn-down").on("click",function(n){n.preventDefault();var e=n.currentTarget.hash,t=$(e).offset().top;$("body,html").stop().animate({scrollTop:t},"700","swing")})}function r(){function n(n,e){"object"!=typeof n&&(n=n||[]),"string"!=typeof e&&(e=e||"");var t=!1;return-1===n.indexOf(e)?console.log("error: language: '"+e+"' within 'index.html' file is not compatible with languages defined."):t=!0,t}var e=[],t={cz:!0,en:!0,de:!1};u=LNG$().getSelectedLang(),$.each(t,function(n,t){t&&e.push(n)}),$(".lang-switcher>span").on("click",function(){var t=e.indexOf(u)+1;n(e,u)&&(t=t===e.length?0:t,u=e[t],$(".lang-switcher>span").text(u),LNG$(u).switchLang(u),$(this).animateCss("bounceIn"))})}function l(){console.log("links to gallery initialized..."),$(".btn-site").on("click",function(n){n.preventDefault;var e=(LNG$().getSelectedLang(),$(this).data("link").toLowerCase().trim()),a=$("[data-menuitem='realisations']"),i=window.location.href;i.search("index.html")>=0?i=i.replace("index.html","realisations.html"):i+="realisations.html",t("realisations",a,i,function(){$(".filter-item").each(function(n){if(void 0!==$(this).data("lang")&&$(this).data("lang").toLowerCase().trim()===e)return void $(this).trigger("click")})})})}function s(n,e){if(console.log("parallax '"+n+"' initialized"),n=n||"",e=e||"",!f){var t=new ScrollMagic.Controller({globalSceneOptions:{triggerHook:"onEnter",duration:"100%"}});new ScrollMagic.Scene({triggerElement:n}).setTween(e,{y:"50%",ease:Linear.easeNone}).addTo(t)}}var u="",d=!1;"object"!=typeof n.mySite&&(n.mySite={});var m={main:function(n){"function"!=typeof n&&(n=function(){}),mySite.initCarousels(mySite.carouselsSetup),c(),l(),f||s("#parallax1","#parallax1 > div"),n(),d=!1},about:function(n){"function"!=typeof n&&(n=function(){}),mySite.initCarousels(mySite.carouselsSetup),c(),f||s("#parallax2","#parallax2 > div"),n(),d=!1},realisations:function(n){"function"!=typeof n&&(n=function(){}),mySite.initCommisionsGallery(function(){var e=LNG$().getSelectedLang();LNG$(e).switchLang(e),c(),n(),d=!1})},pricing:function(n){"function"!=typeof n&&(n=function(){}),mySite.initPricingGallery(function(){var e=LNG$().getSelectedLang();LNG$(e).switchLang(e),c(),n(),d=!1})},contact:function(n,e){"function"!=typeof n&&(n=function(){}),e=e||!1,e?(ContactFormModule.initContactFormListener(),o("https://maps.googleapis.com/maps/api/js?key=AIzaSyA0qVKpndfcoIgP5nwuJxmH5q0v5TSvEc4&callback=MapModule.initContactMap","body",function(){MapModule.placeContactListeners(),n(),d=!1})):(MapModule.initContactMap(),MapModule.placeContactListeners(),ContactFormModule.initContactFormListener(),n(),d=!1)}},f=function(){var n=["android","webos","iphone","ipad","blackberry"];for(i in n)if(navigator.userAgent.toLowerCase().search(n[i])>-1&&void 0!==window.orientation)return!0;return!1}();n.mySite.isMobileFlag=f,!0===f&&$("body").addClass("isMobile"),$(window).on("load",function(){l(),e(),c(),r(),s("#parallax1","#parallax1 > div")}),n.mySite.navMenuInit=e,n.mySite.linkToGallery=l,n.mySite.navItemClickCallback=t,n.mySite.placeJumpButtonListeners=c,n.mySite.placeLangSwitchListener=r,n.mySite.initParallax=s}(window));
$(function(e){function i(e){var i=LNG$().getSelectedLang();console.log("initCommisionsGallery called"),e="function"==typeof e?e:function(){};var o=0;$(".grid-item>.img-result-wrapper").hide(),$(".grid-item>.img-loader-wrapper").show(),$(".grid>.grid-item").addClass("hover-off"),$("#portfolios").imagesLoaded().always(function(i){console.log("all images of 'Commisions menu' loaded"),t(".grid",{itemSelector:".grid-item",stagger:30}),r("#filter-portfolio","#portfolio-gallery .grid-item"),l(".grid"),$(".grid-item>.img-result-wrapper").fadeOut(1e3),$(".img-loader>.img-loader-text").text("images loaded"),$(".img-loader-bar").css("background-color","green"),$(".img-loader").delay(3e3).slideUp(1e3),$(".grid>.grid-item").removeClass("hover-off"),e()}).done(function(){console.log("all images of 'Commisions menu' successfully loaded"),LNG$(i).switchLang(i)}).fail(function(){console.log(o+" of 'Commisions menu' images have broken links. Check your image paths."),$(".img-loader").delay(3e3).slideUp(1e3)}).progress(function(e,i){i.isLoaded?($(i.img).siblings(".img-loader-wrapper").hide(),$(i.img).siblings(".img-result-wrapper").animateCss("bounceIn").show(),$(".img-loader-bar").width(e.progressedCount/e.images.length*100+"%")):(o++,$(i.img).parent().remove())})}function o(e){e="function"==typeof e?e:function(){};var i=0;$(".grid-pricing>.grid-item-pricing").addClass("hover-off"),$("#pricing").imagesLoaded().always(function(i){console.log("all images of 'Pricing menu' loaded"),t(".grid-pricing",{itemSelector:".grid-item-pricing",stagger:30}),r("#filter-pricelist","#pricing-gallery .grid-item-pricing"),l(".grid-pricing"),$(".grid-pricing>.grid-item-pricing").removeClass("hover-off"),e()}).done(function(){console.log("All images of 'Pricing menu' successfully loaded")}).fail(function(){console.log(i+" of 'Pricing menu' images have broken links. Check your image paths.")}).progress(function(e,o){o.isLoaded||(i++,$(o.img).parent().remove())})}function t(e,i){$(e).isotope(i),$(e).isotope("on","layoutComplete",function(){".grid"===e?$(e+" :visible img").animateCss("pulse"):".grid-pricing"===e&&$(e+" :visible").animateCss("pulse")})}function r(e,i){var o=$(i),t=$(e),r={};t.children().remove(),o.each(function(){var e=this,i=$(this).data("portfolio-tags");i&&i.split(",").forEach(function(i){i=i.trim(),null==r[i]&&(r[i]=[]),r[i].push(e)})}),t.addClass("filter-wrapper"),$("<li/>").appendTo(t),$("<a/>",{text:"V≈°e",class:"filter-item selected",click:function(){$(this).addClass("selected").parent().siblings().children().removeClass("selected")}}).appendTo(t.children().eq(0)).attr("data-lang","V≈°e"),$("<li><a class='filter-item filter-portfolio-divider'>&nbsp;</a></li>").appendTo(t),$.each(r,function(e){$("<li/>").appendTo(t),$("<a/>",{text:e,class:"filter-item",click:function(){$(this).addClass("selected").parent().siblings().children().removeClass("selected")}}).appendTo(t.children().last()).attr("data-lang",e)})}function l(e){$(".filter-wrapper").on("click",".filter-item",function(){var i=$(this).data("lang");i===$($(".filter-item")[0]).data("lang")?$(e).isotope({filter:function(){return!0}}):$(e).isotope({filter:function(){return tagText=$(this).data("portfolioTags"),found=tagText.search(i),found>-1}})}),$(e+" .grid-item").on("click",function(i){i.preventDefault(),$(this).hasClass("grid-item-selected")?$(this).removeClass("grid-item-selected"):($(e+" .grid-item").removeClass("grid-item-selected"),$(this).addClass("grid-item-selected")),$(e).isotope("layout")})}e.mySite.initCommisionsGallery=i,e.mySite.initPricingGallery=o}(window));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRhY3QtZm9ybS5qcyIsImNvbnRhY3RfbWFwLmpzIiwiaW5pdC5qcyIsImxhbmd1YWdlLWNvbnRyb2xsZXIuanMiLCJuYXZpZ2F0aW9uLmpzIiwicG9ydGZvbGlvX2ZpbHRlci5qcyJdLCJuYW1lcyI6WyJDb250YWN0Rm9ybU1vZHVsZSIsImluaXRDb250YWN0Rm9ybUxpc3RlbmVyIiwiJCIsIm9uIiwic3VibWl0IiwiZSIsInByZXZlbnREZWZhdWx0IiwidW5kZWZpbmVkIiwiYXR0ciIsImFkZENsYXNzIiwiYW5pbWF0ZUNzcyIsImlucHV0RWxlbWVudHMiLCJmaW5kIiwiZm9ybVZhbHVlcyIsImVhY2giLCJ0aGlzIiwibmFtZSIsInR5cGUiLCJjaGVja2VkIiwidmFsdWUiLCJhamF4IiwidXJsIiwibWV0aG9kIiwiZGF0YSIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJ0ZXh0IiwicmVtb3ZlQ2xhc3MiLCJPYmplY3QiLCJrZXlzIiwiZXJyb3JzIiwibGVuZ3RoIiwiaW5wdXROYW1lIiwiY29uc29sZSIsImxvZyIsImhpZGUiLCJzbGlkZURvd24iLCJzaG93IiwidmFsIiwiZGVsYXkiLCJzbGlkZVVwIiwiZXJyb3IiLCJjb21wbGV0ZSIsInJlbW92ZUF0dHIiLCJNYXBNb2R1bGUiLCJteU1hcCIsIm15UG9zaXRpb24iLCJsYXQiLCJsbmciLCJpbml0Q29udGFjdE1hcCIsInN0eWxlQXJyYXkiLCJmZWF0dXJlVHlwZSIsImVsZW1lbnRUeXBlIiwic3R5bGVycyIsInNhdHVyYXRpb24iLCJnYW1tYSIsIm1hcCIsImdvb2dsZSIsIm1hcHMiLCJNYXAiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY2VudGVyIiwic2Nyb2xsd2hlZWwiLCJzdHJlZXRWaWV3Q29udHJvbCIsInBvc2l0aW9uIiwiQ29udHJvbFBvc2l0aW9uIiwiTEVGVF9CT1RUT00iLCJtYXBUeXBlQ29udHJvbCIsIm1hcFR5cGVDb250cm9sT3B0aW9ucyIsIkJPVFRPTV9MRUZUIiwiem9vbUNvbnRyb2wiLCJ6b29tQ29udHJvbE9wdGlvbnMiLCJMRUZUX0NFTlRFUiIsInN0eWxlcyIsInpvb20iLCJNYXJrZXIiLCJ0aXRsZSIsImljb24iLCJzY2FsZWRTaXplIiwiU2l6ZSIsInBhbkJ5IiwiaGVpZ2h0IiwicGxhY2VDb250YWN0TGlzdGVuZXJzIiwiJHRoaXMiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiY2hpbGRyZW4iLCJoYXNDbGFzcyIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwiaW5uZXJXaWR0aCIsImFuaW1hdGUiLCJldmVudCIsInRyaWdnZXIiLCJzZXRDZW50ZXIiLCJnbG9iYWwiLCJteVNpdGUiLCJjYXJvdXNlbHNTZXR1cCIsImNhcm91c2VsIiwiaW50ZXJ2YWwiLCJwYXVzZSIsImZuIiwiZXh0ZW5kIiwiYW5pbWF0aW9uTmFtZSIsImNhbGxCYWNrRnVuYyIsIm9uZSIsImlzRnVuY3Rpb24iLCJpbml0Q2Fyb3VzZWxzIiwiY2FyU2V0dXAiLCJpIiwic2l0ZUxhbmdzIiwiTGFuZyIsImFjdGl2ZUxhbmciLCJpbml0IiwicHJvdG90eXBlIiwiZ2V0S2V5VmFsIiwia2V5VmFsIiwic2VsZiIsInRyaW0iLCJkYXRhdGFnIiwic3dpdGNoTGFuZyIsInN3aXRjaFRvTGFuZyIsIm51bU9mTGFuZ0VscyIsInJldHJpZXZlZERhdGFUYWciLCJMTkckIiwic2VhcmNoIiwic3Vic3RyIiwiY3NzIiwiZ2V0U2VsZWN0ZWRMYW5nIiwidG9Mb3dlckNhc2UiLCJjYWxsYmFja0Z1bmMiLCJnZXRKU09OIiwiZG9uZSIsImZhaWwiLCJqcVhIUiIsInRleHRTdGF0dXMiLCJlcnJvclRocm93biIsImFsd2F5cyIsImluaXRMYW5nIiwialF1ZXJ5IiwibmF2TWVudUluaXQiLCJjYWNoZWRQYWdlIiwiJGNhY2hlZEl0ZW1zIiwiaW5kZXgiLCJwYWdlU3dpdGNoaW5nQWN0aXZlIiwibmF2SXRlbUNsaWNrQ2FsbGJhY2siLCJtZW11SXRlbU5hbWUiLCJlbGVtIiwibWVudUl0ZW1OYW1lIiwibGFuZyIsInBhcmVudCIsImNvbGxhcHNlIiwiZmFkZU91dCIsImZhZGVJbiIsInN0b3AiLCJzY3JvbGxUb3AiLCJyZW1vdmUiLCJsb2FkIiwic3RhdHVzIiwidXBkYXRlUGFnZSIsIm1hcEluaXRGbGFnIiwicGFnZUNhbGxiYWNrRnVuYyIsImFwcGVuZFRvIiwiYWRkU2NyaXB0Iiwic3JjIiwiZWwiLCJjYWxsYmFja0YiLCJhcHBlbmQiLCJhc3luYyIsImRlZmVyIiwicGxhY2VKdW1wQnV0dG9uTGlzdGVuZXJzIiwiY2xlYXJJbnRlcnZhbCIsImJ0bkludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJvZmZTZXRZIiwiYWN0dWFsSGVpZ2h0IiwiYWN0dWFsU2Nyb2xsUG9zIiwiaXMiLCJqdW1wSGFzaCIsImN1cnJlbnRUYXJnZXQiLCJoYXNoIiwianVtcFBvaW50Iiwib2Zmc2V0IiwidG9wIiwicGxhY2VMYW5nU3dpdGNoTGlzdGVuZXIiLCJpc0xhbmdEZWZpbmVkIiwiYWN0aXZlTGFuZ3MiLCJsYW5nVG9DaGVjayIsImlzRGVmaW5lZCIsImluZGV4T2YiLCJhY3RpdmVMYW5ndWFnZXMiLCJsYW5ndWFnZXMiLCJjeiIsImVuIiwiZGUiLCJwdXNoIiwibmV4dCIsImxpbmtUb0dhbGxlcnkiLCJnYWxMaW5rIiwiJGVsZW0iLCJsb2NhdGlvbiIsImhyZWYiLCJyZXBsYWNlIiwiaW5pdFBhcmFsbGF4IiwidHJpZ2dlckVsZW1lbnQiLCJ0d2VlbkVsZW1lbnQiLCJpc01vYmlsZUZsYWciLCJjb250cm9sbGVyIiwiU2Nyb2xsTWFnaWMiLCJDb250cm9sbGVyIiwiZ2xvYmFsU2NlbmVPcHRpb25zIiwidHJpZ2dlckhvb2siLCJkdXJhdGlvbiIsIlNjZW5lIiwic2V0VHdlZW4iLCJ5IiwiZWFzZSIsIkxpbmVhciIsImVhc2VOb25lIiwiYWRkVG8iLCJtYWluIiwiYWJvdXQiLCJyZWFsaXNhdGlvbnMiLCJpbml0Q29tbWlzaW9uc0dhbGxlcnkiLCJwcmljaW5nIiwiaW5pdFByaWNpbmdHYWxsZXJ5IiwiY29udGFjdCIsInJ1bk1hcEluaXRTY3JpcHQiLCJhZ2VudHMiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJvcmllbnRhdGlvbiIsImJyb2tlbkNvdW50IiwiaW1hZ2VzTG9hZGVkIiwiaW5zdGFuY2UiLCJpbnN0YW50aWF0ZUlzb3RvcGVHYWxsZXJ5IiwiaXRlbVNlbGVjdG9yIiwic3RhZ2dlciIsImJ1aWxkSW1nQ2F0ZWdvcmllcyIsInBsYWNlRmlsdGVyTGlzdGVuZXJzIiwicHJvZ3Jlc3MiLCJpbWFnZSIsImlzTG9hZGVkIiwiaW1nIiwic2libGluZ3MiLCJ3aWR0aCIsInByb2dyZXNzZWRDb3VudCIsImltYWdlcyIsIm9wdGlvbnMiLCJpc290b3BlIiwibGlzdEVsZW1lbnQiLCJpbWdDb250YWluZXJzIiwiJGltZ0NvbnRhaW5lcnMiLCIkYnV0dG9ucyIsInRhZ2dlZCIsImltZ0NvbnRhaW5lciIsInRhZ3MiLCJzcGxpdCIsImZvckVhY2giLCJ0YWdOYW1lIiwiY2xhc3MiLCJjbGljayIsImVxIiwibGFzdCIsImdyaWRFbCIsImZpbHRlclZhbHVlIiwiZmlsdGVyIiwidGFnVGV4dCIsImZvdW5kIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFJQSxtQkFBb0IsV0F5RnBCLE9BQ0lDLHdCQXhGMEIsV0FFMUJDLEVBQUUsMkJBQTJCQyxHQUFJLFFBQVMsV0FFdENELEVBQUcsaUJBQWtCRSxXQUd6QkYsRUFBRSxpQkFBaUJFLE9BQU8sU0FBU0MsR0FJL0IsR0FIQUEsRUFBRUMscUJBR2tEQyxLQUFoREwsRUFBRSwyQkFBMkJNLEtBQUssWUFBeUIsQ0FFM0ROLEVBQUUsMkJBQTJCTSxLQUFLLFlBQVcsR0FDN0NOLEVBQUUsMkJBQTJCTyxTQUFTLFlBQ3RDUCxFQUFFLDJCQUEyQlEsV0FBVyxRQUV4QyxJQUFJQyxHQUFnQlQsRUFBRSxpQkFBaUJVLEtBQUssMkJBQ3hDQyxJQUVKRixHQUFjRyxLQUFLLFdBQ1hDLEtBQUtDLE9BQ1ksWUFBYkQsS0FBS0UsTUFBbUMsU0FBYkYsS0FBS0UsS0FDNUJGLEtBQUtHLFVBQ0xMLEVBQVdF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S0FJM0QsUUFBU3BCLEdBQXFCeUIsR0FDMUJ2USxFQUFFLG1CQUFtQkMsR0FBSSxRQUFTLGVBQWdCLFdBQ2pELEdBQUl1USxHQUFjeFEsRUFBRWEsTUFBTVEsS0FBSyxPQUkzQm1QLEtBQWdCeFEsRUFBRUEsRUFBRSxnQkFBZ0IsSUFBSXFCLEtBQUssUUFDaERyQixFQUFFdVEsR0FBUWYsU0FDVmlCLE9BQVEsV0FDUCxPQUFPLEtBSVZ6USxFQUFFdVEsR0FBUWYsU0FDUGlCLE9BQVEsV0FHUCxNQUZBQyxTQUFTMVEsRUFBRWEsTUFBTVEsS0FBSyxpQkFDdEJzUCxNQUFRRCxRQUFROUksT0FBTzRJLEdBQ25CRyxPQUFRLE9BV25CM1EsRUFBRXVRLEVBQVMsZUFBZXRRLEdBQUksUUFBUyxTQUFTRSxHQUMvQ0EsRUFBRUMsaUJBQ0VKLEVBQUVhLE1BQU15RSxTQUFTLHNCQUNwQnRGLEVBQUVhLE1BQU1ZLFlBQVksdUJBRXBCekIsRUFBRXVRLEVBQVMsZUFBZTlPLFlBQVksc0JBQ3RDekIsRUFBRWEsTUFBTU4sU0FBUyx1QkFFbEJQLEVBQUV1USxHQUFRZixRQUFRLFlBT3BCMUosRUFBT0MsT0FBTytILHNCQUF3QkEsRUFDdENoSSxFQUFPQyxPQUFPaUksbUJBQXFCQSxHQUVsQzdJIiwiZmlsZSI6InNjcmlwdHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgQ29udGFjdEZvcm1Nb2R1bGUgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICB2YXIgaW5pdENvbnRhY3RGb3JtTGlzdGVuZXIgPSBmdW5jdGlvbigpe1xuXG4gICAgICAgICQoXCIjY29udGFjdC1mb3JtIC5idG4tc2l0ZVwiKS5vbiggXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJjbGljayBldmVudDogLmNvbnRhY3Qtc3VibWl0IGJ1dHRvblwiKTtcbiAgICAgICAgICAgICQoIFwiI2NvbnRhY3QtZm9ybVwiICkuc3VibWl0KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoXCIjY29udGFjdC1mb3JtXCIpLnN1Ym1pdChmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJGb3JtIHN1Ym1pdHRlZCBsaXN0ZW5lciBjYWxsZWRcIik7XG4gICAgICAgICAgICBpZiAoJChcIiNjb250YWN0LWZvcm0gLmJ0bi1zaXRlXCIpLmF0dHIoXCJkaXNhYmxlZFwiKT09PXVuZGVmaW5lZCkge1xuXG4gICAgICAgICAgICAgICAgJChcIiNjb250YWN0LWZvcm0gLmJ0bi1zaXRlXCIpLmF0dHIoXCJkaXNhYmxlZFwiLHRydWUpO1xuICAgICAgICAgICAgICAgICQoXCIjY29udGFjdC1mb3JtIC5idG4tc2l0ZVwiKS5hZGRDbGFzcyhcInNwaW5uaW5nXCIpO1xuICAgICAgICAgICAgICAgICQoXCIjY29udGFjdC1mb3JtIC5idG4tc2l0ZVwiKS5hbmltYXRlQ3NzKFwicHVsc2VcIik7XG5cbiAgICAgICAgICAgICAgICB2YXIgaW5wdXRFbGVtZW50cyA9ICQoXCIjY29udGFjdC1mb3JtXCIpLmZpbmQoJ2lucHV0LCB0ZXh0YXJlYSwgc2VsZWN0Jyk7XG4gICAgICAgICAgICAgICAgdmFyIGZvcm1WYWx1ZXMgPSB7fTtcblxuICAgICAgICAgICAgICAgIGlucHV0RWxlbWVudHMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudHlwZSA9PSBcImNoZWNrYm94XCIgfHwgdGhpcy50eXBlID09IFwicmFkaW9cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybVZhbHVlc1t0aGlzLm5hbWVdID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybVZhbHVlc1t0aGlzLm5hbWVdID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcImZvcm1WYWx1ZXMgOiBcIiArIEpTT04uc3RyaW5naWZ5KGZvcm1WYWx1ZXMpKTtcblxuICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgIHVybDogXCJhc3NldHMvcGhwL2hhbmRsZWFqYXhmb3JtLnBocFwiLFxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBmb3JtVmFsdWVzLFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXN1bHQpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIkFKQVggcG9zdCByZXN1bHQgcmVzdWx0IDogXCIgKyBKU09OLnN0cmluZ2lmeShyZXN1bHQpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnZGl2W2RhdGEtZXJyb3ItaWRdJykudGV4dChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNjb250YWN0LWZvcm0gaW5wdXQsICNjb250YWN0LWZvcm0gdGV4dGFyZWEnKS5yZW1vdmVDbGFzcygnZm9ybS1lcnJvcicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3NlbmQtcmVzdWx0JykudGV4dChcIlwiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHJlc3VsdC5lcnJvcnMpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpbnB1dE5hbWUgaW4gcmVzdWx0LmVycm9ycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yIGluIFwiICsgaW5wdXROYW1lICsgXCI6IFwiICsgcmVzdWx0LmVycm9yc1tpbnB1dE5hbWVdKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCdkaXZbZGF0YS1lcnJvci1pZD1cIicgKyBpbnB1dE5hbWUgKyAnXCJdJykudGV4dChyZXN1bHQuZXJyb3JzW2lucHV0TmFtZV0pLmhpZGUoKS5zbGlkZURvd24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnKltuYW1lPVwiJyArIGlucHV0TmFtZSArICdcIl0nKS5hZGRDbGFzcygnZm9ybS1lcnJvcicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcqW25hbWU9XCInICsgaW5wdXROYW1lICsgJ1wiXScpLmFuaW1hdGVDc3MoJ3NoYWtlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQWxsIHZhbGlkYXRpb24gcGFzc2VkIHN1Y2Nlc2Z1bGx5IVwiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjc2VuZC1yZXN1bHRcIikudGV4dChcIlRoYW5rIHlvdS4gWW91ciBtZXNzYWdlIGhhcyBiZWVuIHNlbnQuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjc2VuZC1yZXN1bHRcIikucmVtb3ZlQ2xhc3MoJ2FsZXJ0LWRhbmdlcicpLmFkZENsYXNzKCdhbGVydC1zdWNjZXNzJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiI3NlbmQtcmVzdWx0XCIpLnNob3coKS5hbmltYXRlQ3NzKCdib3VuY2VJbicsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJ2lucHV0JykudmFsKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCd0ZXh0YXJlYScpLnZhbChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNzZW5kLXJlc3VsdFwiKS5kZWxheSg1MDAwKS5zbGlkZVVwKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjc2VuZC1yZXN1bHRcIikucmVtb3ZlQ2xhc3MoJ2FsZXJ0LXN1Y2Nlc3MnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjc2VuZC1yZXN1bHRcIikuYWRkQ2xhc3MoJ2FsZXJ0LWRhbmdlcicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNzZW5kLXJlc3VsdFwiKS50ZXh0KFwiU29ycnkuLi4gWW91ciBtZXNzYWdlIGNvdWxkIG5vdCBoYXZlIGJlZW4gZGVsaXZlcmVkLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjc2VuZC1yZXN1bHRcIikuc2xpZGVEb3duKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNjb250YWN0LWZvcm0gLmJ0bi1zaXRlXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjY29udGFjdC1mb3JtIC5idG4tc2l0ZVwiKS5yZW1vdmVDbGFzcyhcInNwaW5uaW5nXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNjb250YWN0LWZvcm0gLmJ0bi1zaXRlXCIpLmFuaW1hdGVDc3MoXCJwdWxzZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSk7ICAvLyB0aGUgZW5kIG9mIGFqYXggY2FsbCB0byBwb3N0IGZvcm1WYWx1ZXNcblxuICAgICAgICAgICAgfSAvLyBlbmQgb2YgaWYgc3RhdGVtZW50OiBwcmVldm50cyBzZW5kaW5nIGFqYXggcmVxdWVzdCBpZiBhbm90aGVyIHJlcXVlc3QgaXMgYWxyZWFkeSBydW5uaW5nXG5cbiAgICAgICAgfSk7IC8vIHRoZSBlbmQgb2YgZm9ybSBzdWJtaXQgZnVuY3Rpb25cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBpbml0Q29udGFjdEZvcm1MaXN0ZW5lcjogaW5pdENvbnRhY3RGb3JtTGlzdGVuZXJcbiAgICB9O1xuXG59KSgpO1xuIiwiLy8gLS0tLS0tLS0tLSBHT09HTEUgTUFQIC0tLS0tLS0tLS1cbnZhciBNYXBNb2R1bGUgPSAoZnVuY3Rpb24oKSB7XG5cbiAgdmFyIG15TWFwO1xuICB2YXIgbXlQb3NpdGlvbiA9IHtsYXQ6IDUwLjA0ODgyMiwgbG5nOiAxNS4yMDAyNDJ9O1xuXG4gIHZhciBpbml0Q29udGFjdE1hcCA9IGZ1bmN0aW9uKCl7XG5cbiAgICAgIC8vIFNwZWNpZnkgZmVhdHVyZXMgYW5kIGVsZW1lbnRzIHRvIGRlZmluZSBzdHlsZXMuXG4gICAgICB2YXIgc3R5bGVBcnJheSA9IFtcbiAgICAgICAge1xuICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJhbGxcIixcbiAgICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwiYWxsXCIsXG4gICAgICAgICAgXCJzdHlsZXJzXCI6IFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgXCJzYXR1cmF0aW9uXCI6IC0xMDBcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgXCJnYW1tYVwiOiAwLjVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgICAgXTtcblxuICAgICAgLy8gQ3JlYXRlIGEgbWFwIG9iamVjdCBhbmQgc3BlY2lmeSB0aGUgRE9NIGVsZW1lbnQgZm9yIGRpc3BsYXkuXG4gICAgICB2YXIgbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRhY3QtbWFwXCIpLCB7XG4gICAgICAgICAgY2VudGVyOiBteVBvc2l0aW9uLFxuICAgICAgICAgIHNjcm9sbHdoZWVsOiBmYWxzZSxcbiAgICAgICAgICBzdHJlZXRWaWV3Q29udHJvbDogdHJ1ZSxcbiAgICAgICAgICBzdHJlZXRWaWV3Q29udHJvbDoge1xuICAgICAgICAgICAgcG9zaXRpb246IGdvb2dsZS5tYXBzLkNvbnRyb2xQb3NpdGlvbi5MRUZUX0JPVFRPTVxuICAgICAgICAgIH0sXG4gICAgICAgICAgbWFwVHlwZUNvbnRyb2w6IHRydWUsXG4gICAgICAgICAgbWFwVHlwZUNvbnRyb2xPcHRpb25zOiB7XG4gICAgICAgICAgICAgIHBvc2l0aW9uOiBnb29nbGUubWFwcy5Db250cm9sUG9zaXRpb24uQk9UVE9NX0xFRlRcbiAgICAgICAgICB9LFxuICAgICAgICAgIHpvb21Db250cm9sOiB0cnVlLFxuICAgICAgICAgIHpvb21Db250cm9sT3B0aW9uczoge1xuICAgICAgICAgICAgcG9zaXRpb246IGdvb2dsZS5tYXBzLkNvbnRyb2xQb3NpdGlvbi5MRUZUX0NFTlRFUlxuICAgICAgICAgIH0sXG4gICAgICAgICAgLy8gQXBwbHkgdGhlIG1hcCBzdHlsZSBhcnJheSB0byB0aGUgbWFwLlxuICAgICAgICAgIHN0eWxlczogc3R5bGVBcnJheSxcbiAgICAgICAgICB6b29tOiA4XG4gICAgICB9KTtcblxuICAgICAgbXlNYXAgPSBtYXA7XG4gICAgICAvLyBDcmVhdGUgYSBtYXJrZXIgYW5kIHNldCBpdHMgcG9zaXRpb24uXG5cbiAgICAgIHZhciBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcbiAgICAgICAgbWFwOiBtYXAsXG4gICAgICAgIHBvc2l0aW9uOiBteVBvc2l0aW9uLFxuICAgICAgICB0aXRsZTogJ0thbWVuaWN0dsOtIEVyYmVuJyxcbiAgICAgICAgaWNvbjoge1xuICAgICAgICAgIHVybDogXCJhc3NldHMvaW1hZ2VzL0lFX2xvZ29fcm91bmRlZF9wb2ludGVyLnBuZ1wiLFxuICAgICAgICAgIHNjYWxlZFNpemU6IG5ldyBnb29nbGUubWFwcy5TaXplKDE1MCwgMTUwKVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgbXlNYXAucGFuQnkoMCwoLSQoXCJuYXYubmF2YmFyXCIpLmhlaWdodCgpKSk7XG5cbiAgICB9XG5cbiAgICB2YXIgcGxhY2VDb250YWN0TGlzdGVuZXJzID0gZnVuY3Rpb24oKXtcbiAgXHRcdCQoXCIuYnRuLW1hcFwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpe1xuICBcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG4gIFx0XHRcdHZhciAkdGhpcz0kKHRoaXMpO1xuXG4gIFx0XHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib3JpZW50YXRpb25jaGFuZ2VcIiwgZnVuY3Rpb24oKSB7XG4gIFx0XHRcdFx0aWYgKCR0aGlzLmNoaWxkcmVuKCkuaGFzQ2xhc3MoXCJmYS1leHBhbmRcIikpIHtcbiAgXHRcdFx0XHRcdGlmICh3aW5kb3cubWF0Y2hNZWRpYShcIihvcmllbnRhdGlvbjogbGFuZHNjYXBlKVwiKS5tYXRjaGVzICYmIHdpbmRvdy5pbm5lcldpZHRoPDc2Nykge1xuICBcdFx0XHRcdFx0XHQkKFwiI2NvbnRhY3QtbWFwXCIpLmFuaW1hdGUoe1xuICBcdFx0XHRcdFx0XHRcdGhlaWdodDogXCI3NXZoXCJcbiAgXHRcdFx0XHRcdFx0fSw1MDAsIGZ1bmN0aW9uKCl7XG4gIFx0XHRcdFx0XHRcdFx0Z29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcihteU1hcCwgXCJyZXNpemVcIik7XG4gIFx0XHRcdFx0XHRcdFx0bXlNYXAuc2V0Q2VudGVyKG15UG9zaXRpb24pO1xuICBcdFx0XHRcdFx0XHRcdG15TWFwLnBhbkJ5KDAsKC0kKFwibmF2Lm5hdmJhclwiKS5oZWlnaHQoKSkpO1xuICBcdFx0XHRcdFx0XHR9KTtcbiAgXHRcdFx0XHRcdH0gZWxzZSB7XG4gIFx0XHRcdFx0XHRcdCQoXCIjY29udGFjdC1tYXBcIikuYW5pbWF0ZSh7XG4gIFx0XHRcdFx0XHRcdFx0aGVpZ2h0OiBcIjUwdmhcIlxuICBcdFx0XHRcdFx0XHR9LDUwMCwgZnVuY3Rpb24oKXtcbiAgXHRcdFx0XHRcdFx0XHRnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKG15TWFwLCBcInJlc2l6ZVwiKTtcbiAgXHRcdFx0XHRcdFx0XHRteU1hcC5zZXRDZW50ZXIobXlQb3NpdGlvbik7XG4gIFx0XHRcdFx0XHRcdFx0bXlNYXAucGFuQnkoMCwoLSQoXCJuYXYubmF2YmFyXCIpLmhlaWdodCgpKSk7XG4gIFx0XHRcdFx0XHRcdH0pO1xuICBcdFx0XHRcdFx0fVxuICBcdFx0XHRcdH1cbiAgXHRcdFx0fSwgZmFsc2UpO1xuXG4gIFx0XHRcdGlmICgkdGhpcy5jaGlsZHJlbigpLmhhc0NsYXNzKFwiZmEtZXhwYW5kXCIpKSB7XG4gIFx0XHRcdFx0JHRoaXMuY2hpbGRyZW4oKS5yZW1vdmVDbGFzcyhcImZhLWV4cGFuZFwiKS5hZGRDbGFzcyhcImZhLWNvbXByZXNzXCIpO1xuICBcdFx0XHRcdCQoXCIjY29udGFjdC1tYXBcIikuYW5pbWF0ZSh7XG4gIFx0XHRcdFx0XHRoZWlnaHQ6IFwiMTAwdmhcIlxuICBcdFx0XHRcdH0sNTAwLCBmdW5jdGlvbigpe1xuICBcdFx0XHRcdFx0Z29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcihteU1hcCwgXCJyZXNpemVcIik7XG4gIFx0XHRcdFx0XHRteU1hcC5zZXRDZW50ZXIobXlQb3NpdGlvbik7XG4gIFx0XHRcdFx0XHRteU1hcC5wYW5CeSgwLCgtJChcIm5hdi5uYXZiYXJcIikuaGVpZ2h0KCkpKTtcbiAgXHRcdFx0XHR9KTtcbiAgXHRcdFx0XHRyZXR1cm47XG4gIFx0XHRcdH0gZWxzZSBpZiAoJHRoaXMuY2hpbGRyZW4oKS5oYXNDbGFzcyhcImZhLWNvbXByZXNzXCIpKSB7XG4gIFx0XHRcdFx0JHRoaXMuY2hpbGRyZW4oKS5yZW1vdmVDbGFzcyhcImZhLWNvbXByZXNzXCIpLmFkZENsYXNzKFwiZmEtZXhwYW5kXCIpO1xuICBcdFx0XHRcdGlmICh3aW5kb3cubWF0Y2hNZWRpYShcIihvcmllbnRhdGlvbjogbGFuZHNjYXBlKVwiKS5tYXRjaGVzICYmIHdpbmRvdy5pbm5lcldpZHRoPDc2Nykge1xuICBcdFx0XHRcdFx0JChcIiNjb250YWN0LW1hcFwiKS5hbmltYXRlKHtcbiAgXHRcdFx0XHRcdFx0aGVpZ2h0OiBcIjc1dmhcIlxuICBcdFx0XHRcdFx0fSw1MDAsIGZ1bmN0aW9uKCl7XG4gIFx0XHRcdFx0XHRcdGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIobXlNYXAsIFwicmVzaXplXCIpO1xuICBcdFx0XHRcdFx0XHRteU1hcC5zZXRDZW50ZXIobXlQb3NpdGlvbik7XG4gIFx0XHRcdFx0XHRcdG15TWFwLnBhbkJ5KDAsKC0kKFwibmF2Lm5hdmJhclwiKS5oZWlnaHQoKSkpO1xuICBcdFx0XHRcdFx0fSk7XG4gIFx0XHRcdFx0fSBlbHNlIHtcbiAgXHRcdFx0XHRcdCQoXCIjY29udGFjdC1tYXBcIikuYW5pbWF0ZSh7XG4gIFx0XHRcdFx0XHRcdGhlaWdodDogXCI1MHZoXCJcbiAgXHRcdFx0XHRcdH0sNTAwLCBmdW5jdGlvbigpe1xuICBcdFx0XHRcdFx0XHRnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKG15TWFwLCBcInJlc2l6ZVwiKTtcbiAgXHRcdFx0XHRcdFx0bXlNYXAuc2V0Q2VudGVyKG15UG9zaXRpb24pO1xuICBcdFx0XHRcdFx0XHRteU1hcC5wYW5CeSgwLCgtJChcIm5hdi5uYXZiYXJcIikuaGVpZ2h0KCkpKTtcbiAgXHRcdFx0XHRcdH0pO1xuICBcdFx0XHRcdH1cbiAgXHRcdFx0fVxuICBcdFx0fSlcbiAgXHR9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBpbml0Q29udGFjdE1hcDppbml0Q29udGFjdE1hcCxcbiAgICAgICAgcGxhY2VDb250YWN0TGlzdGVuZXJzOnBsYWNlQ29udGFjdExpc3RlbmVyc1xuICAgIH1cblxufSkoKTtcbiIsIiQoZnVuY3Rpb24oZ2xvYmFsKXtcblxuICAgIGlmICh0eXBlb2YgZ2xvYmFsLm15U2l0ZSE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGdsb2JhbC5teVNpdGUgPXt9O1xuICAgIH1cblxuICAgIHZhciBjYXJvdXNlbHNTZXR1cCA9IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjYXJvdXNlbDogXCIjbWFpbi1jYXJvdXNlbFwiLFxuICAgICAgICAgICAgICAgIGludGVydmFsOjcwMDAwMCxcbiAgICAgICAgICAgICAgICBwYXVzZTogXCJub25lXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2Fyb3VzZWw6IFwiI2Fib3V0LWNhcm91c2VsXCIsXG4gICAgICAgICAgICAgICAgaW50ZXJ2YWw6NTAwMDAwLFxuICAgICAgICAgICAgICAgIHBhdXNlOiBcIm5vbmVcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjYXJvdXNlbDogXCIjY2Fyb3VzZWxUb21ic3RvbmVzXCIsXG4gICAgICAgICAgICAgICAgaW50ZXJ2YWw6MzAwMDAwLFxuICAgICAgICAgICAgICAgIHBhdXNlOiBcIm5vbmVcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjYXJvdXNlbDogXCIjY2Fyb3VzZWxHYXJkZW5cIixcbiAgICAgICAgICAgICAgICBpbnRlcnZhbDozMDAwMDAsXG4gICAgICAgICAgICAgICAgcGF1c2U6IFwibm9uZVwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNhcm91c2VsOiBcIiNjYXJvdXNlbFJlc3RvcmF0aW9uc1wiLFxuICAgICAgICAgICAgICAgIGludGVydmFsOjMwMDAwMCxcbiAgICAgICAgICAgICAgICBwYXVzZTogXCJub25lXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2Fyb3VzZWw6IFwiI0Nhcm91c2VsTW9udW1lbnRzXCIsXG4gICAgICAgICAgICAgICAgaW50ZXJ2YWw6MzAwMDAwLFxuICAgICAgICAgICAgICAgIHBhdXNlOiBcIm5vbmVcIlxuICAgICAgICAgICAgfVxuICAgIF07XG5cbiAgICAkKCcubG9hZGVyLXdyYXBwZXInKS5oaWRlKCk7XG5cbiAgICAvLyAtLS0tLS0tLS0tIEpRVUVSWSBBTklNQVRFIEVYVEVOU0lPTiAtLS0tLS0tLS0tXG4gICAgJC5mbi5leHRlbmQoe1xuICAgICAgICBhbmltYXRlQ3NzOiBmdW5jdGlvbiAoYW5pbWF0aW9uTmFtZSwgY2FsbEJhY2tGdW5jKSB7XG4gICAgICAgICAgICB2YXIgYW5pbWF0aW9uRW5kID0gJ3dlYmtpdEFuaW1hdGlvbkVuZCBtb3pBbmltYXRpb25FbmQgTVNBbmltYXRpb25FbmQgb2FuaW1hdGlvbmVuZCBhbmltYXRpb25lbmQnO1xuICAgICAgICAgICAgdGhpcy5hZGRDbGFzcygnYW5pbWF0ZWQgJyArIGFuaW1hdGlvbk5hbWUpLm9uZShhbmltYXRpb25FbmQsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkICcgKyBhbmltYXRpb25OYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAoJC5pc0Z1bmN0aW9uKGNhbGxCYWNrRnVuYykpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbEJhY2tGdW5jKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gLS0tLS0tLS0tLSBDQVJPVVNFTFMgU0VUVVAgLS0tLS0tLS0tLVxuICAgIGluaXRDYXJvdXNlbHMgPSBmdW5jdGlvbihjYXJTZXR1cCkge1xuICAgICAgICBmb3IgKHZhciBpPTA7IGk8Y2FyU2V0dXAubGVuZ3RoLTE7aSsrKSB7XG4gICAgICAgICAgICAkKGNhclNldHVwW2ldWydjYXJvdXNlbCddKS5jYXJvdXNlbCh7XG4gICAgICAgICAgICAgICAgaW50ZXJ2YWw6IGNhclNldHVwW2ldWydpbnRlcnZhbCddXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhcImNhcm91c2VscyBpbml0aWFsaXplZFwiKTtcbiAgICB9O1xuXG4gICAgaW5pdENhcm91c2VscyhjYXJvdXNlbHNTZXR1cCk7XG5cbiAgICBnbG9iYWwubXlTaXRlLmNhcm91c2Vsc1NldHVwID0gY2Fyb3VzZWxzU2V0dXA7XG4gICAgZ2xvYmFsLm15U2l0ZS5pbml0Q2Fyb3VzZWxzID0gaW5pdENhcm91c2VscztcblxufSh3aW5kb3cpKTtcbiIsIihmdW5jdGlvbihnbG9iYWwsJCl7XG5cblx0dmFyIFVSTCA9Jy4vYXNzZXRzL2RhdGEvbGFuZy5qc29uJztcblx0dmFyIHNpdGVMYW5ncyA9IFtcImN6XCIsXCJlblwiXTtcblxuXHR2YXIgTGFuZyA9IGZ1bmN0aW9uKGFjdGl2ZUxhbmcpe1xuXHRcdHJldHVybiBuZXcgTGFuZy5pbml0KGFjdGl2ZUxhbmcpO1xuXHR9XG5cblx0TGFuZy5wcm90b3R5cGUgPSB7XG5cdFx0Z2V0S2V5VmFsOiBmdW5jdGlvbihrZXlWYWwpe1xuXHRcdFx0c2VsZiA9IHRoaXM7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oKXtcblx0XHRcdFx0a2V5VmFsID0ga2V5VmFsLnRyaW0oKTtcblx0XHRcdFx0dmFyIHJlc3VsdDtcblx0XHRcdFx0Zm9yICh2YXIgaT0wOyBpIDw9IExhbmcuZGF0YS5sZW5ndGgtMTsgaSsrKSB7XG5cdFx0XHRcdFx0aWYgKExhbmcuZGF0YVtpXS5kYXRhdGFnPT09a2V5VmFsKSB7XG5cdFx0XHRcdFx0XHRyZXN1bHQgPSBMYW5nLmRhdGFbaV1bc2VsZi5hY3RpdmVMYW5nXTtcblx0XHRcdFx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJlc3VsdCA9IFwiXCI7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0XHR9KCk7XG5cdFx0fSxcblx0XHRzd2l0Y2hMYW5nOiBmdW5jdGlvbihzd2l0Y2hUb0xhbmcpe1xuXHRcdFx0c2VsZiA9IHRoaXM7XG5cdFx0XHR2YXIgbnVtT2ZMYW5nRWxzID0gJChcIltkYXRhLWxhbmddXCIpLmxlbmd0aDtcblx0XHRcdGZvciAodmFyIGkgPTA7aTw9bnVtT2ZMYW5nRWxzLTE7aSsrKSB7XG5cdFx0XHRcdHZhciByZXRyaWV2ZWREYXRhVGFnID0gJCgkKFwiW2RhdGEtbGFuZ11cIilbaV0pLmRhdGEoJ2xhbmcnKTtcblx0XHRcdFx0dmFsdWUgPSBMTkckKHN3aXRjaFRvTGFuZykuZ2V0S2V5VmFsKHJldHJpZXZlZERhdGFUYWcpO1xuXHRcdFx0XHRpZiAodmFsdWU9PT11bmRlZmluZWQpIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIkxhbmd1YWdlIHRhZyAnXCIgKyByZXRyaWV2ZWREYXRhVGFnICArIFwiJyBpcyBub3QgZGVmaW5lZCBpbiBsYW5ndWFnZSBkYXRhYmFzZSBmb3I6IFwiK3N3aXRjaFRvTGFuZyk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aWYgKHZhbHVlLnRyaW0oKSE9PVwiXCIpIHtcblx0XHRcdFx0XHRcdGlmICh2YWx1ZS5zZWFyY2goXCI8cGg+XCIpPi0xKSB7XG5cdFx0XHRcdFx0XHRcdHZhbHVlID0gdmFsdWUuc3Vic3RyKDQsdmFsdWUubGVuZ3RoKTtcblx0XHRcdFx0XHRcdFx0JCgkKFwiW2RhdGEtbGFuZ11cIilbaV0pLmF0dHIoXCJwbGFjZWhvbGRlclwiLHZhbHVlKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdCQoJChcIltkYXRhLWxhbmddXCIpW2ldKS50ZXh0KExORyQoc3dpdGNoVG9MYW5nKS5nZXRLZXlWYWwocmV0cmlldmVkRGF0YVRhZykpLmFuaW1hdGVDc3MoJ3B1bHNlJyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHQkKCQoXCJbZGF0YS1sYW5nXVwiKVtpXSkuY3NzKFwidmlzaWJpbGl0eVwiLFwidmlzaWJsZVwiKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXHRcdGdldFNlbGVjdGVkTGFuZzogZnVuY3Rpb24oKXtcblx0XHRcdHJldHVybiAkKFwiLmxhbmctc3dpdGNoZXI+c3BhblwiKS50ZXh0KCkudG9Mb3dlckNhc2UoKS50cmltKCk7XG5cdFx0fVxuXHR9O1xuXG5cdExhbmcuaW5pdCA9IGZ1bmN0aW9uKGFjdGl2ZUxhbmcpe1xuXHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRzZWxmLmFjdGl2ZUxhbmcgPSBhY3RpdmVMYW5nIHx8IHNpdGVMYW5nc1swXTtcblx0fVxuXG5cdExhbmcuaW5pdC5wcm90b3R5cGUgPSBMYW5nLnByb3RvdHlwZTtcblx0Z2xvYmFsLkxhbmcgPSBnbG9iYWwuTE5HJCA9IExhbmc7XG5cblx0Z2V0U2VydmVyRGF0YShVUkwsZnVuY3Rpb24oZGF0YSl7XG5cdFx0TGFuZy5kYXRhID0gZGF0YTtcblx0XHR2YXIgaW5pdExhbmcgPSAkKFwiLmxhbmctc3dpdGNoZXI+c3BhblwiKS50ZXh0KCkudHJpbSgpO1xuXHRcdExORyQoaW5pdExhbmcpLnN3aXRjaExhbmcoaW5pdExhbmcpO1xuXHR9KTtcblxuXHRmdW5jdGlvbiBnZXRTZXJ2ZXJEYXRhKHVybCwgY2FsbGJhY2tGdW5jKSB7XG5cdHZhciByZXN1bHQgPSAkLmdldEpTT04odXJsLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKCBcIi0tLSBzdWNjZXNzIC0tLVwiICk7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyggXCJsYW5nIGRhdGEgbG9hZGVkLi4uXCIgKTtcblx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKGRhdGEpO1xuXHRcdFx0XHRcdGNhbGxiYWNrRnVuYyhkYXRhKTtcblx0XHRcdFx0fSlcblx0XHRcdFx0LmZhaWwoZnVuY3Rpb24oanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coIFwiLS0tIGVycm9yIC0tLVwiICk7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coanFYSFIpO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuYWx3YXlzKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdC8vY29uc29sZS5sb2coIFwiY29tcGxldGVcIiApO1xuXHRcdFx0XHR9KTtcblx0fTtcblxufSh3aW5kb3csIGpRdWVyeSkpO1xuIiwiLy8gLS0tLS0tLS0tLSBOQVZJR0FUSU9OIC0tLS0tLS0tLS1cblxuJChmdW5jdGlvbihnbG9iYWwpe1xuXHR2YXIgYWN0aXZlTGFuZz0nJztcblx0dmFyIHBhZ2VTd2l0Y2hpbmdBY3RpdmU9ZmFsc2U7XG5cdC8vIGthbWVuaWN0dmktZXJiZW4uY3ogZ29vZ2xlIG1hcHMga2V5ID1cIkFJemFTeURzU1U4NFdvaXh2dkNaNkVWNDhCdDE3NzdOMk5MS0htc1wiXG5cdC8vIHN0ZWlubWV0ei1lcmJlbi5kZSBnb29nbGUgbWFwcyBrZXkgPVwiQUl6YVN5QTBxVktwbmRmY29JZ1A1bnd1SnhtSDVxMHY1VFN2RWM0XCJcblx0dmFyIEFQSWtleSA9IFwiQUl6YVN5QTBxVktwbmRmY29JZ1A1bnd1SnhtSDVxMHY1VFN2RWM0XCI7XG5cblx0aWYgKHR5cGVvZiBnbG9iYWwubXlTaXRlIT09IFwib2JqZWN0XCIpIHtcbiAgXHRnbG9iYWwubXlTaXRlID17fTtcbiAgfVxuXG5cdHZhciBwYWdlQ2FsbGJhY2tGdW5jID0ge1xuXHRcdG1haW46IGZ1bmN0aW9uKGNhbGxiYWNrRil7XG5cdFx0XHRpZiAodHlwZW9mIGNhbGxiYWNrRiE9PSdmdW5jdGlvbicpIHtcblx0XHRcdFx0Y2FsbGJhY2tGID0gZnVuY3Rpb24oKXt9O1xuXHRcdFx0fVxuXHRcdFx0bXlTaXRlLmluaXRDYXJvdXNlbHMobXlTaXRlLmNhcm91c2Vsc1NldHVwKTtcblx0XHRcdHBsYWNlSnVtcEJ1dHRvbkxpc3RlbmVycygpO1xuXHRcdFx0bGlua1RvR2FsbGVyeSgpO1xuXHRcdFx0aWYgKCFpc01vYmlsZUZsYWcpIHtcblx0XHRcdFx0aW5pdFBhcmFsbGF4KFwiI3BhcmFsbGF4MVwiLFwiI3BhcmFsbGF4MSA+IGRpdlwiKTtcblx0XHRcdH1cblx0XHRcdGNhbGxiYWNrRigpO1xuXHRcdFx0cGFnZVN3aXRjaGluZ0FjdGl2ZSA9IGZhbHNlO1xuXHRcdH0sXG5cdFx0YWJvdXQ6IGZ1bmN0aW9uKGNhbGxiYWNrRil7XG5cdFx0XHRpZiAodHlwZW9mIGNhbGxiYWNrRiE9PSdmdW5jdGlvbicpIHtcblx0XHRcdFx0Y2FsbGJhY2tGID0gZnVuY3Rpb24oKXt9O1xuXHRcdFx0fVxuXHRcdFx0bXlTaXRlLmluaXRDYXJvdXNlbHMobXlTaXRlLmNhcm91c2Vsc1NldHVwKTtcblx0XHRcdHBsYWNlSnVtcEJ1dHRvbkxpc3RlbmVycygpO1xuXHRcdFx0aWYgKCFpc01vYmlsZUZsYWcpIHtcblx0XHRcdFx0aW5pdFBhcmFsbGF4KFwiI3BhcmFsbGF4MlwiLFwiI3BhcmFsbGF4MiA+IGRpdlwiKTtcblx0XHRcdH1cblx0XHRcdGNhbGxiYWNrRigpO1xuXHRcdFx0cGFnZVN3aXRjaGluZ0FjdGl2ZSA9IGZhbHNlO1xuXHRcdH0sXG5cdFx0cmVhbGlzYXRpb25zOiBmdW5jdGlvbihjYWxsYmFja0Ype1xuXHRcdFx0aWYgKHR5cGVvZiBjYWxsYmFja0YhPT0nZnVuY3Rpb24nKSB7XG5cdFx0XHRcdGNhbGxiYWNrRiA9IGZ1bmN0aW9uKCl7fTtcblx0XHRcdH1cblx0XHRcdG15U2l0ZS5pbml0Q29tbWlzaW9uc0dhbGxlcnkoZnVuY3Rpb24oKXtcblx0XHRcdFx0dmFyIGxhbmcgPSBMTkckKCkuZ2V0U2VsZWN0ZWRMYW5nKCk7XG5cdFx0XHRcdExORyQobGFuZykuc3dpdGNoTGFuZyhsYW5nKTtcblx0XHRcdFx0cGxhY2VKdW1wQnV0dG9uTGlzdGVuZXJzKCk7XG5cdFx0XHRcdGNhbGxiYWNrRigpO1xuXHRcdFx0XHRwYWdlU3dpdGNoaW5nQWN0aXZlID0gZmFsc2U7XG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdHByaWNpbmc6IGZ1bmN0aW9uKGNhbGxiYWNrRil7XG5cdFx0XHRpZiAodHlwZW9mIGNhbGxiYWNrRiE9PSdmdW5jdGlvbicpIHtcblx0XHRcdFx0Y2FsbGJhY2tGID0gZnVuY3Rpb24oKXt9O1xuXHRcdFx0fVxuXHRcdFx0bXlTaXRlLmluaXRQcmljaW5nR2FsbGVyeShmdW5jdGlvbigpe1xuXHRcdFx0XHR2YXIgbGFuZyA9IExORyQoKS5nZXRTZWxlY3RlZExhbmcoKTtcblx0XHRcdFx0TE5HJChsYW5nKS5zd2l0Y2hMYW5nKGxhbmcpO1xuXHRcdFx0XHRwbGFjZUp1bXBCdXR0b25MaXN0ZW5lcnMoKTtcblx0XHRcdFx0Y2FsbGJhY2tGKCk7XG5cdFx0XHRcdHBhZ2VTd2l0Y2hpbmdBY3RpdmUgPSBmYWxzZTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0Y29udGFjdDogZnVuY3Rpb24oY2FsbGJhY2tGLHJ1bk1hcEluaXRTY3JpcHQpe1xuXHRcdFx0aWYgKHR5cGVvZiBjYWxsYmFja0YhPT0nZnVuY3Rpb24nKSB7XG5cdFx0XHRcdGNhbGxiYWNrRiA9IGZ1bmN0aW9uKCl7fTtcblx0XHRcdH1cblx0XHRcdHJ1bk1hcEluaXRTY3JpcHQgPSBydW5NYXBJbml0U2NyaXB0IHx8IGZhbHNlO1xuXHRcdFx0aWYgKHJ1bk1hcEluaXRTY3JpcHQpIHtcblx0XHRcdFx0Q29udGFjdEZvcm1Nb2R1bGUuaW5pdENvbnRhY3RGb3JtTGlzdGVuZXIoKTtcblx0XHRcdFx0YWRkU2NyaXB0KFxuXHRcdFx0XHRcdFwiaHR0cHM6Ly9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2pzP2tleT1cIiArIEFQSWtleSArIFwiJmNhbGxiYWNrPU1hcE1vZHVsZS5pbml0Q29udGFjdE1hcFwiLFxuXHRcdFx0XHRcdFwiYm9keVwiLFxuXHRcdFx0XHRcdGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0XHRNYXBNb2R1bGUucGxhY2VDb250YWN0TGlzdGVuZXJzKCk7XG5cdFx0XHRcdFx0XHRjYWxsYmFja0YoKTtcblx0XHRcdFx0XHRcdHBhZ2VTd2l0Y2hpbmdBY3RpdmUgPSBmYWxzZTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdE1hcE1vZHVsZS5pbml0Q29udGFjdE1hcCgpO1xuXHRcdFx0XHRNYXBNb2R1bGUucGxhY2VDb250YWN0TGlzdGVuZXJzKCk7XG5cdFx0XHRcdENvbnRhY3RGb3JtTW9kdWxlLmluaXRDb250YWN0Rm9ybUxpc3RlbmVyKCk7XG5cdFx0XHRcdGNhbGxiYWNrRigpO1xuXHRcdFx0XHRwYWdlU3dpdGNoaW5nQWN0aXZlID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gaXNfbW9iaWxlKCkge1xuXHQgICAgdmFyIGFnZW50cyA9IFsnYW5kcm9pZCcsICd3ZWJvcycsICdpcGhvbmUnLCAnaXBhZCcsICdibGFja2JlcnJ5J107XG5cdCAgICBmb3IoaSBpbiBhZ2VudHMpIHtcblx0ICAgICAgICBpZigobmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLnNlYXJjaChhZ2VudHNbaV0pPi0xKSAmJiAod2luZG93Lm9yaWVudGF0aW9uIT09dW5kZWZpbmVkKSkge1xuXHQgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdH07XG5cblx0dmFyIGlzTW9iaWxlRmxhZyA9IGlzX21vYmlsZSgpO1xuXHRnbG9iYWwubXlTaXRlLmlzTW9iaWxlRmxhZyA9IGlzTW9iaWxlRmxhZztcblxuXHRpZiAoaXNNb2JpbGVGbGFnPT09dHJ1ZSkge1xuXHRcdCQoXCJib2R5XCIpLmFkZENsYXNzKFwiaXNNb2JpbGVcIik7XG5cdH1cblxuXHRmdW5jdGlvbiBuYXZNZW51SW5pdCgpIHtcblx0XHRcdGNvbnNvbGUubG9nKFwibmF2TWVudSBpbml0aWFsaXplZFwiKTtcblx0XHRcdHZhciBjYWNoZWRQYWdlPXt9O1xuXHRcdFx0JGNhY2hlZEl0ZW1zID0gJChcIiNtYWluTmF2YmFyIFtkYXRhLW1lbnVpdGVtXVwiKTtcblx0XHRcdCQoJGNhY2hlZEl0ZW1zKS5lYWNoKGZ1bmN0aW9uKGluZGV4LHZhbHVlKXtcblx0XHRcdFx0Y2FjaGVkUGFnZVskKHZhbHVlKS5kYXRhKCdtZW51aXRlbScpXSA9IFwiXCI7XG5cdFx0XHR9KTtcblx0XHRcdGdsb2JhbC5teVNpdGUuY2FjaGVkUGFnZSA9IGNhY2hlZFBhZ2U7XG5cblx0XHRcdC8vcGxhY2VMYW5nU3dpdGNoTGlzdGVuZXIodHJ1ZSk7XG5cdFx0ICAkKCcjbWFpbk5hdmJhcicpLm9uKCdzaG93LmJzLmNvbGxhcHNlJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdCQoJy5uYXZiYXIgLm5hdmJhci1jb2xsYXBzZScpLnJlbW92ZUNsYXNzKCdvcmRlci0yJykuYWRkQ2xhc3MoJ29yZGVyLTUnKTtcblx0ICBcdFx0XHQkKFwiLmhhbWJ1cmdlcl9fbWVudS1pY29uXCIpLmFkZENsYXNzKFwiaGFtYnVyZ2VyX19tZW51LWljb24tLWNsb3NlLXhcIik7XG5cdFx0XHR9KVxuXHRcdFx0JCgnI21haW5OYXZiYXInKS5vbignaGlkZGVuLmJzLmNvbGxhcHNlJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdCQoJy5uYXZiYXIgLm5hdmJhci1jb2xsYXBzZScpLnJlbW92ZUNsYXNzKCdvcmRlci01JykuYWRkQ2xhc3MoJ29yZGVyLTInKTtcblx0XHRcdH0pXG5cdCBcdFx0JCgnI21haW5OYXZiYXInKS5vbignaGlkZS5icy5jb2xsYXBzZScsIGZ1bmN0aW9uICgpIHtcblx0ICBcdFx0XHQkKFwiLmhhbWJ1cmdlcl9fbWVudS1pY29uXCIpLnJlbW92ZUNsYXNzKFwiaGFtYnVyZ2VyX19tZW51LWljb24tLWNsb3NlLXhcIik7XG5cdFx0XHR9KVxuXG5cdCAgICAkKCcubmF2LWl0ZW0nKS5vbiggJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXHQgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRpZiAoIXBhZ2VTd2l0Y2hpbmdBY3RpdmUpIHtcblx0ICAgICAgICBcdHZhciB1cmwgPSAkKHRoaXMpLmNoaWxkcmVuKCcubmF2LWxpbmsnKS5hdHRyKCdocmVmJykudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG5cdCAgICAgICAgXHR2YXIgbWVudU5hbWUgPSAkKHRoaXMpLmNoaWxkcmVuKCcubmF2LWxpbmsnKS5kYXRhKCdtZW51aXRlbScpLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRcdFx0bmF2SXRlbUNsaWNrQ2FsbGJhY2sobWVudU5hbWUsdGhpcyx1cmwpO1xuXHRcdFx0XHRcdH1cblx0ICAgIH0pOyAvLyBlbmQgb2YgY2xpY2sgbGlzdGVuZXJcblx0fVxuXG5cdGZ1bmN0aW9uIG5hdkl0ZW1DbGlja0NhbGxiYWNrIChtZW11SXRlbU5hbWUsZWxlbSx1cmwsY2FsbGJhY2tGdW5jKSB7XG5cdFx0Ly9jb25zb2xlLmxvZyhtZW11SXRlbU5hbWUsZWxlbSx1cmwsY2FsbGJhY2tGdW5jKTtcblx0XHRwYWdlU3dpdGNoaW5nQWN0aXZlID0gdHJ1ZTtcblx0XHRpZiAodHlwZW9mIG1lbnVJdGVtTmFtZSAhPT0gJ3N0cmluZycpIHttZW51SXRlbU5hbWU9Jyd9O1xuXHRcdGxhbmcgPSBMTkckKCkuZ2V0U2VsZWN0ZWRMYW5nKCk7XG5cdFx0ZWxlbSA9IGVsZW0gfHwgJyc7XG5cdFx0dXJsID0gdXJsIHx8ICcnO1xuXHRcdGlmICh0eXBlb2YgY2FsbGJhY2tGdW5jIT09J2Z1bmN0aW9uJykge1xuXHRcdFx0Y2FsbGJhY2tGdW5jID0gZnVuY3Rpb24oKXt9O1xuXHRcdH1cblx0XHQkKGVsZW0pLnBhcmVudCgpLmNoaWxkcmVuKCcubmF2LWl0ZW0nKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcblx0XHQkKGVsZW0pLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuXG5cdFx0Ly9jbG9zZSB0aGUgbW9iaWxlIG1lbnUgaWYgaXQgaXMgb3BlbmVkXG5cdFx0JCgnI21haW5OYXZiYXInKS5jb2xsYXBzZSgnaGlkZScpO1xuXG5cdFx0JCgnI2FqYXgtY29udGFpbmVyJykuZmFkZU91dCg1MDAsIGZ1bmN0aW9uKCl7XG5cdFx0XHQkKCcjYWpheC1jb250ZW50JykuaGlkZSgpO1xuXHRcdFx0JCgnLmxvYWRlci13cmFwcGVyJykuZmFkZUluKDUwMCk7XG5cdFx0XHQkKFwiYm9keSxodG1sXCIpLnN0b3AoKS5hbmltYXRlKHtzY3JvbGxUb3A6MH0sICc1MCcpO1xuXHRcdFx0JCh0aGlzKS5yZW1vdmUoKTtcblxuXHRcdFx0aWYgKG15U2l0ZS5jYWNoZWRQYWdlW21lbXVJdGVtTmFtZV09PT0nJykge1xuXHRcdFx0XHQvLyBkbyB0aGUgZm9sbG93aW5nIGlmIHRoZSBwYWdlIG5lZWRzIHRvIGJlIGxvYWRlZCBmb3IgdGhlIGZpcnN0IHRpbWUobm90IGNhY2hlZCB5ZXQpXG5cdFx0XHRcdC8vIHN0YXJ0IG9mIHRoZSBhamF4IGxvYWQgZnVuY3Rpb25cblx0XHRcdFx0JCgnI2FqYXgtY29udGVudCcpLmxvYWQodXJsICsgJyAjYWpheC1jb250YWluZXInLCBmdW5jdGlvbihyZXN1bHQsc3RhdHVzKXtcblx0XHRcdFx0XHRpZiAoc3RhdHVzID09PSBcInN1Y2Nlc3NcIikge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJMb2FkZWQgJ1wiICsgbWVtdUl0ZW1OYW1lICsgXCInIGZyb20gU0VSVkVSLi4uXCIpO1xuXHRcdFx0XHRcdFx0dXBkYXRlUGFnZShmdW5jdGlvbigpe1xuXHRcdFx0XHRcdFx0XHRMTkckKGxhbmcpLnN3aXRjaExhbmcobGFuZyk7XG5cdFx0XHRcdFx0XHRcdG15U2l0ZS5jYWNoZWRQYWdlW21lbXVJdGVtTmFtZV09JChyZXN1bHQpLmZpbmQoXCIjYWpheC1jb250YWluZXJcIik7XG5cdFx0XHRcdFx0XHRcdG1lbXVJdGVtTmFtZSA9PT0nY29udGFjdCcgPyBtYXBJbml0RmxhZyA9IHRydWUgOiBtYXBJbml0RmxhZyA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRwYWdlQ2FsbGJhY2tGdW5jW21lbXVJdGVtTmFtZV0oY2FsbGJhY2tGdW5jLG1hcEluaXRGbGFnKTtcblx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0fSBlbHNlIGlmIChzdGF0dXMgPT09IFwiZXJyb3JcIikge1xuXHRcdFx0XHRcdFx0JCgnLmxvYWRlci13cmFwcGVyJykuaGlkZSgpO1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJFcnJvciBsb2FkaW5nIGZyb20gc2VydmVyLi4uXCIpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9KTsgLy8gZW5kIG9mIGFqYXggbG9hZCBmdW5jdGlvblxuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2lmIHRoZSBwYWdlIGlzIGFscmVhZHkgY2FjaGVkLi4uXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiTG9hZGVkICdcIiArIG1lbXVJdGVtTmFtZSArIFwiJyBmcm9tIENBQ0hFLi4uXCIpO1xuXHRcdFx0XHQkKG15U2l0ZS5jYWNoZWRQYWdlW21lbXVJdGVtTmFtZV0pLmFwcGVuZFRvKCcjYWpheC1jb250ZW50Jyk7XG5cdFx0XHRcdHVwZGF0ZVBhZ2UoZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRMTkckKGxhbmcpLnN3aXRjaExhbmcobGFuZyk7XG5cdFx0XHRcdFx0cGFnZUNhbGxiYWNrRnVuY1ttZW11SXRlbU5hbWVdKGNhbGxiYWNrRnVuYyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0pOyAgLy8gZW5kIG9mIGZhZGVPdXQgZnVuY3Rpb25cblx0fSAvLyBlbmQgb2YgbmF2SXRlbUNsaWNrQ2FsbGJhY2sgZnVuY3Rpb25cblxuXHQvL2hlbHBlciBmdW5jdGlvbiB0byB1cGRhdGUgdGhlIHBhZ2Ugd2hlbiBjbGlja2luZyBvbiBtZW51XG5cdGZ1bmN0aW9uIHVwZGF0ZVBhZ2UoY2FsbGJhY2tGdW5jKXtcblx0XHRpZiAodHlwZW9mIGNhbGxiYWNrRnVuYyE9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdGNhbGxiYWNrRnVuYyA9IGZ1bmN0aW9uKCl7fTtcblx0XHR9XG5cdFx0JCgnI2FqYXgtY29udGFpbmVyJykuc2hvdygpO1xuXHRcdCQoJy5sb2FkZXItd3JhcHBlcicpLmhpZGUoKTtcblx0XHQkKCcjYWpheC1jb250ZW50JykuZmFkZUluKDUwMCxmdW5jdGlvbigpe1xuXHRcdFx0Y2FsbGJhY2tGdW5jKCk7XG5cdFx0fSk7XG5cdH1cblxuXHQvL2hlbHBlciBmdW5jdGlvbiB0byBsb2FkIGdvb2dsZSBtYXBzIHNjcmlwdFxuXHRmdW5jdGlvbiBhZGRTY3JpcHQoIHNyYywgZWwsY2FsbGJhY2tGICkge1xuXHRcdGlmICh0eXBlb2YgY2FsbGJhY2tGIT09XCJmdW5jdGlvblwiKSB7XG5cdFx0XHRjYWxsYmFja0Y9ZnVuY3Rpb24oKXt9O1xuXHRcdH1cblx0XHQkKGVsKS5hcHBlbmQoJChcIjxzY3JpcHQgLz5cIiwge1xuXHRcdFx0c3JjOiBzcmMsXG5cdFx0XHRhc3luYzogdHJ1ZSxcblx0XHRcdGRlZmVyOiB0cnVlXG5cdFx0fSkpO1xuXHRcdGNhbGxiYWNrRigpO1xuXHR9XG5cblx0ZnVuY3Rpb24gcGxhY2VKdW1wQnV0dG9uTGlzdGVuZXJzKCkge1xuXHRcdGNsZWFySW50ZXJ2YWwobXlTaXRlLmJ0bkludGVydmFsKTtcblx0XHRteVNpdGUuYnRuSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpe1xuICAgICAgICAgICQoXCIuYnRuLWRvd25cIikuYW5pbWF0ZUNzcyhcImJvdW5jZVwiKTtcbiAgICB9LDMwMDApO1xuXG5cdFx0dmFyIG9mZlNldFk9MDtcblx0XHQkKHdpbmRvdykub24oXCJzY3JvbGxcIiwgZnVuY3Rpb24oKXtcblx0XHRcdHZhciBhY3R1YWxIZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XG5cdFx0XHR2YXIgYWN0dWFsU2Nyb2xsUG9zID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xuXG5cdFx0XHRvZmZTZXRZID0gYWN0dWFsSGVpZ2h0LzU7XG5cblx0XHRcdGlmIChhY3R1YWxTY3JvbGxQb3M8MCkge2FjdHVhbFNjcm9sbFBvcz0wfTtcblxuXHRcdFx0Ly9jb25zb2xlLmxvZyhhY3R1YWxIZWlnaHQsYWN0dWFsU2Nyb2xsUG9zKTtcblx0XHRcdC8vY29uc29sZS5sb2coYWN0dWFsSGVpZ2h0LW9mZlNldFksYWN0dWFsU2Nyb2xsUG9zKTtcblxuXHRcdFx0aWYgKCgoYWN0dWFsSGVpZ2h0LW9mZlNldFkpL2FjdHVhbFNjcm9sbFBvcyk+MSkge1xuXHRcdFx0XHRpZiAoJCgnLmJ0bi1tb3ZlLXVwJykuaXMoXCI6dmlzaWJsZVwiKSkge1xuXHRcdFx0XHRcdCQoXCIuYnRuLW1vdmUtdXBcIikuYW5pbWF0ZUNzcygnYm91bmNlT3V0JywgZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdCQoXCIuYnRuLW1vdmUtdXBcIikuaGlkZSgpO1xuXHRcdFx0XHRcdFx0JChcIi5idG4tZG93blwiKS5zaG93KCkuYW5pbWF0ZUNzcygnYm91bmNlSW4nKTtcblx0XHRcdFx0XHRcdC8vJChcIi5idG4tZG93blwiKS5hbmltYXRlQ3NzKCdib3VuY2VJbicpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmICghJCgnLmJ0bi1tb3ZlLXVwJykuaXMoXCI6dmlzaWJsZVwiKSkge1xuIFx0XHRcdFx0XHQkKFwiLmJ0bi1kb3duXCIpLmFuaW1hdGVDc3MoJ2JvdW5jZU91dCcsZnVuY3Rpb24oKXtcbiBcdFx0XHRcdFx0XHQkKFwiLmJ0bi1kb3duXCIpLmhpZGUoKTtcbiBcdFx0XHRcdFx0XHQkKFwiLmJ0bi1tb3ZlLXVwXCIpLnNob3coKTtcbiBcdFx0XHRcdFx0XHQkKFwiLmJ0bi1tb3ZlLXVwXCIpLmFuaW1hdGVDc3MoJ2JvdW5jZUluJyk7XG4gXHRcdFx0XHRcdH0pO1xuIFx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdCQoXCIuYnRuLW1vdmUtdXBcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbigpe1xuXHRcdFx0JChcImJvZHksaHRtbFwiKS5zdG9wKCkuYW5pbWF0ZSh7c2Nyb2xsVG9wOjB9LCAnNzAwJywgXCJzd2luZ1wiKTtcblx0XHR9KTtcblx0XHQkKFwiLmJ0bi1kb3duXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSl7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR2YXIganVtcEhhc2ggPSBlLmN1cnJlbnRUYXJnZXQuaGFzaDtcblx0XHRcdHZhciBqdW1wUG9pbnQgPSAkKGp1bXBIYXNoKS5vZmZzZXQoKS50b3A7XG5cdFx0XHQkKFwiYm9keSxodG1sXCIpLnN0b3AoKS5hbmltYXRlKHtzY3JvbGxUb3A6anVtcFBvaW50fSwgJzcwMCcsIFwic3dpbmdcIik7XG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIHBsYWNlTGFuZ1N3aXRjaExpc3RlbmVyKCkge1xuXHRcdHZhciBhY3RpdmVMYW5ndWFnZXMgPVtdO1xuXHRcdHZhciBsYW5ndWFnZXMgPSB7XG5cdFx0XHRcImN6XCI6dHJ1ZSxcblx0XHRcdFwiZW5cIjp0cnVlLFxuXHRcdFx0XCJkZVwiOmZhbHNlXG5cdFx0fTtcblx0XHRhY3RpdmVMYW5nID0gTE5HJCgpLmdldFNlbGVjdGVkTGFuZygpO1xuXG5cdFx0JC5lYWNoKGxhbmd1YWdlcywgZnVuY3Rpb24oaW5kZXgsdmFsdWUpe1xuXHRcdFx0aWYgKHZhbHVlKSB7XG5cdFx0XHRcdGFjdGl2ZUxhbmd1YWdlcy5wdXNoKGluZGV4KTtcblx0XHRcdH1cblx0XHR9KVxuXG5cdFx0JChcIi5sYW5nLXN3aXRjaGVyPnNwYW5cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbigpe1xuXHRcdFx0dmFyIG5leHQgPSBhY3RpdmVMYW5ndWFnZXMuaW5kZXhPZihhY3RpdmVMYW5nKSsxO1xuXHRcdFx0aWYgKCFpc0xhbmdEZWZpbmVkKGFjdGl2ZUxhbmd1YWdlcyxhY3RpdmVMYW5nKSkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRuZXh0ID09PSBhY3RpdmVMYW5ndWFnZXMubGVuZ3RoID8gbmV4dD0wIDogbmV4dD1uZXh0O1xuXHRcdFx0YWN0aXZlTGFuZyA9IGFjdGl2ZUxhbmd1YWdlc1tuZXh0XTtcblx0XHRcdCQoXCIubGFuZy1zd2l0Y2hlcj5zcGFuXCIpLnRleHQoYWN0aXZlTGFuZyk7XG5cdFx0XHRMTkckKGFjdGl2ZUxhbmcpLnN3aXRjaExhbmcoYWN0aXZlTGFuZyk7XG5cdFx0XHQkKHRoaXMpLmFuaW1hdGVDc3MoXCJib3VuY2VJblwiKTtcblx0XHR9KTtcblxuXHRcdGZ1bmN0aW9uIGlzTGFuZ0RlZmluZWQoYWN0aXZlTGFuZ3MsbGFuZ1RvQ2hlY2spe1xuXHRcdFx0aWYgKHR5cGVvZiBhY3RpdmVMYW5ncyAhPT0nb2JqZWN0Jykge1xuXHRcdFx0XHRhY3RpdmVMYW5ncyA9IGFjdGl2ZUxhbmdzIHx8IFtdO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHR5cGVvZiBsYW5nVG9DaGVjayAhPT0nc3RyaW5nJykge1xuXHRcdFx0XHRsYW5nVG9DaGVjayA9IGxhbmdUb0NoZWNrIHx8IFwiXCI7XG5cdFx0XHR9XG5cdFx0XHR2YXIgaXNEZWZpbmVkID0gZmFsc2U7XG5cdFx0XHR2YXIgaW5kID0gYWN0aXZlTGFuZ3MuaW5kZXhPZihsYW5nVG9DaGVjayk7XG5cdFx0XHRpZiAoaW5kID09PSAtMSkge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcImVycm9yOiBsYW5ndWFnZTogJ1wiKyBsYW5nVG9DaGVjayArXCInIHdpdGhpbiAnaW5kZXguaHRtbCcgZmlsZSBpcyBub3QgY29tcGF0aWJsZSB3aXRoIGxhbmd1YWdlcyBkZWZpbmVkLlwiKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlzRGVmaW5lZCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gaXNEZWZpbmVkO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGxpbmtUb0dhbGxlcnkoKXtcblx0XHRjb25zb2xlLmxvZygnbGlua3MgdG8gZ2FsbGVyeSBpbml0aWFsaXplZC4uLicpO1xuXHRcdCQoXCIuYnRuLXNpdGVcIikub24oJ2NsaWNrJyxmdW5jdGlvbihlKXtcblx0XHRcdGUucHJldmVudERlZmF1bHQ7XG5cdFx0XHR2YXIgYWN0aXZlTGFuZyA9IExORyQoKS5nZXRTZWxlY3RlZExhbmcoKTtcblx0XHRcdHZhciBnYWxMaW5rID0gJCh0aGlzKS5kYXRhKCdsaW5rJykudG9Mb3dlckNhc2UoKS50cmltKCk7XG5cdFx0XHR2YXIgJGVsZW0gPSAkKFwiW2RhdGEtbWVudWl0ZW09J3JlYWxpc2F0aW9ucyddXCIpO1xuXHRcdFx0dmFyIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuXHRcdFx0aWYgKHVybC5zZWFyY2goXCJpbmRleC5odG1sXCIpID49IDAgKSB7XG5cdFx0XHRcdHVybCA9IHVybC5yZXBsYWNlKFwiaW5kZXguaHRtbFwiLFwicmVhbGlzYXRpb25zLmh0bWxcIik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR1cmwgPSB1cmwgKyBcInJlYWxpc2F0aW9ucy5odG1sXCI7XG5cdFx0XHR9XG5cblx0XHRcdG5hdkl0ZW1DbGlja0NhbGxiYWNrKCdyZWFsaXNhdGlvbnMnLCRlbGVtLHVybCxmdW5jdGlvbigpe1xuXHRcdFx0XHRcdCQoXCIuZmlsdGVyLWl0ZW1cIikuZWFjaChmdW5jdGlvbihpKXtcblx0XHRcdFx0XHRcdGlmICgkKHRoaXMpLmRhdGEoJ2xhbmcnKSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0XHRcdGlmICgkKHRoaXMpLmRhdGEoJ2xhbmcnKS50b0xvd2VyQ2FzZSgpLnRyaW0oKSA9PT0gZ2FsTGluaykge1xuXHRcdFx0XHRcdFx0XHRcdCQodGhpcykudHJpZ2dlcignY2xpY2snKTtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGluaXRQYXJhbGxheCh0cmlnZ2VyRWxlbWVudCx0d2VlbkVsZW1lbnQpIHtcblx0XHRjb25zb2xlLmxvZyhcInBhcmFsbGF4ICdcIisgdHJpZ2dlckVsZW1lbnQgK1wiJyBpbml0aWFsaXplZFwiKTtcblx0XHR0cmlnZ2VyRWxlbWVudCA9IHRyaWdnZXJFbGVtZW50IHx8IFwiXCI7XG5cdFx0dHdlZW5FbGVtZW50ID0gdHdlZW5FbGVtZW50IHx8IFwiXCI7XG5cdFx0aWYgKCFpc01vYmlsZUZsYWcpIHtcblx0ICAgICAgICB2YXIgY29udHJvbGxlciA9IG5ldyBTY3JvbGxNYWdpYy5Db250cm9sbGVyKHtnbG9iYWxTY2VuZU9wdGlvbnM6IHt0cmlnZ2VySG9vazogXCJvbkVudGVyXCIsIGR1cmF0aW9uOiBcIjEwMCVcIn19KTtcblx0ICAgICAgICB2YXIgcGFyYWxsYXgxID0gbmV3IFNjcm9sbE1hZ2ljLlNjZW5lKHt0cmlnZ2VyRWxlbWVudDogdHJpZ2dlckVsZW1lbnR9KVxuXHQgICAgICAgICAgICAuc2V0VHdlZW4odHdlZW5FbGVtZW50LCB7eTogXCI1MCVcIiwgZWFzZTogTGluZWFyLmVhc2VOb25lfSlcblx0ICAgICAgICAgICAgLy8uYWRkSW5kaWNhdG9ycyh7bmFtZTogdHJpZ2dlckVsZW1lbnR9KVxuXHQgICAgICAgICAgICAuYWRkVG8oY29udHJvbGxlcik7XG5cdCAgICB9XG5cdH1cblxuXHQkKHdpbmRvdykub24oJ2xvYWQnLGZ1bmN0aW9uKCl7XG5cdFx0bGlua1RvR2FsbGVyeSgpO1xuXHRcdG5hdk1lbnVJbml0KCk7XG5cdFx0cGxhY2VKdW1wQnV0dG9uTGlzdGVuZXJzKCk7XG5cdFx0cGxhY2VMYW5nU3dpdGNoTGlzdGVuZXIoKTtcblx0XHRpbml0UGFyYWxsYXgoXCIjcGFyYWxsYXgxXCIsXCIjcGFyYWxsYXgxID4gZGl2XCIpO1xuXHR9KTtcblxuXHRnbG9iYWwubXlTaXRlLm5hdk1lbnVJbml0ID0gbmF2TWVudUluaXQ7XG5cdGdsb2JhbC5teVNpdGUubGlua1RvR2FsbGVyeSA9IGxpbmtUb0dhbGxlcnk7XG5cdGdsb2JhbC5teVNpdGUubmF2SXRlbUNsaWNrQ2FsbGJhY2sgPSBuYXZJdGVtQ2xpY2tDYWxsYmFjaztcblx0Z2xvYmFsLm15U2l0ZS5wbGFjZUp1bXBCdXR0b25MaXN0ZW5lcnMgPSBwbGFjZUp1bXBCdXR0b25MaXN0ZW5lcnM7XG5cdGdsb2JhbC5teVNpdGUucGxhY2VMYW5nU3dpdGNoTGlzdGVuZXIgPSBwbGFjZUxhbmdTd2l0Y2hMaXN0ZW5lcjtcblx0Z2xvYmFsLm15U2l0ZS5pbml0UGFyYWxsYXggPSBpbml0UGFyYWxsYXg7XG5cbn0od2luZG93KSk7XG4iLCIvLyAtLS0tLS0tLS0tIFBPUlRGT0xJTyBGSUxURVIgLS0tLS0tLS0tLVxuJChmdW5jdGlvbihnbG9iYWwpe1xuXG5cdGZ1bmN0aW9uIGluaXRDb21taXNpb25zR2FsbGVyeShjYWxsYmFja0Z1bmMpe1xuXHRcdHZhciBhY3RpdmVMYW5nID0gTE5HJCgpLmdldFNlbGVjdGVkTGFuZygpO1xuXHRcdGNvbnNvbGUubG9nKFwiaW5pdENvbW1pc2lvbnNHYWxsZXJ5IGNhbGxlZFwiKTtcblx0XHR0eXBlb2YgY2FsbGJhY2tGdW5jPT09XCJmdW5jdGlvblwiID8gY2FsbGJhY2tGdW5jID0gY2FsbGJhY2tGdW5jIDogY2FsbGJhY2tGdW5jID0gZnVuY3Rpb24oKXt9O1xuXG5cdFx0dmFyIGJyb2tlbkNvdW50ID0gMDtcblxuXHRcdCQoXCIuZ3JpZC1pdGVtPi5pbWctcmVzdWx0LXdyYXBwZXJcIikuaGlkZSgpO1xuXHRcdCQoXCIuZ3JpZC1pdGVtPi5pbWctbG9hZGVyLXdyYXBwZXJcIikuc2hvdygpO1xuXHRcdCQoXCIuZ3JpZD4uZ3JpZC1pdGVtXCIpLmFkZENsYXNzKFwiaG92ZXItb2ZmXCIpO1xuXG5cdFx0JCgnI3BvcnRmb2xpb3MnKS5pbWFnZXNMb2FkZWQoKVxuXHRcdCAgLmFsd2F5cyggZnVuY3Rpb24oIGluc3RhbmNlICkge1xuXHRcdCAgICBjb25zb2xlLmxvZyhcImFsbCBpbWFnZXMgb2YgJ0NvbW1pc2lvbnMgbWVudScgbG9hZGVkXCIpO1xuXG5cdFx0XHRpbnN0YW50aWF0ZUlzb3RvcGVHYWxsZXJ5KFwiLmdyaWRcIix7XG5cdFx0ICBcdFx0aXRlbVNlbGVjdG9yOiAnLmdyaWQtaXRlbScsXG5cdFx0ICBcdFx0c3RhZ2dlcjogMzBcblx0XHRcdH0pO1xuXG5cdFx0ICAgIGJ1aWxkSW1nQ2F0ZWdvcmllcyhcIiNmaWx0ZXItcG9ydGZvbGlvXCIsXCIjcG9ydGZvbGlvLWdhbGxlcnkgLmdyaWQtaXRlbVwiKTtcblx0XHQgICAgcGxhY2VGaWx0ZXJMaXN0ZW5lcnMoXCIuZ3JpZFwiKTtcblxuXHRcdFx0JChcIi5ncmlkLWl0ZW0+LmltZy1yZXN1bHQtd3JhcHBlclwiKS5mYWRlT3V0KDEwMDApO1xuXHRcdCAgICAkKFwiLmltZy1sb2FkZXI+LmltZy1sb2FkZXItdGV4dFwiKS50ZXh0KFwiaW1hZ2VzIGxvYWRlZFwiKTtcblx0XHQgICAgJChcIi5pbWctbG9hZGVyLWJhclwiKS5jc3MoXCJiYWNrZ3JvdW5kLWNvbG9yXCIsXCJncmVlblwiKTtcblx0XHQgICAgJChcIi5pbWctbG9hZGVyXCIpLmRlbGF5KDMwMDApLnNsaWRlVXAoMTAwMCk7XG5cdFx0ICAgICQoXCIuZ3JpZD4uZ3JpZC1pdGVtXCIpLnJlbW92ZUNsYXNzKFwiaG92ZXItb2ZmXCIpO1xuXG5cdFx0ICAgIGNhbGxiYWNrRnVuYygpO1xuXG5cdFx0ICB9KVxuXHRcdCAgLmRvbmUoIGZ1bmN0aW9uKCkge1xuXHRcdCAgICBjb25zb2xlLmxvZyhcImFsbCBpbWFnZXMgb2YgJ0NvbW1pc2lvbnMgbWVudScgc3VjY2Vzc2Z1bGx5IGxvYWRlZFwiKTtcblx0XHRcdFx0TE5HJChhY3RpdmVMYW5nKS5zd2l0Y2hMYW5nKGFjdGl2ZUxhbmcpO1xuXHRcdCAgfSlcblx0XHQgIC5mYWlsKCBmdW5jdGlvbigpIHtcblx0XHQgICAgY29uc29sZS5sb2coIGJyb2tlbkNvdW50ICsgXCIgb2YgJ0NvbW1pc2lvbnMgbWVudScgaW1hZ2VzIGhhdmUgYnJva2VuIGxpbmtzLiBDaGVjayB5b3VyIGltYWdlIHBhdGhzLlwiKTtcblx0XHQgICAgJChcIi5pbWctbG9hZGVyXCIpLmRlbGF5KDMwMDApLnNsaWRlVXAoMTAwMCk7XG5cdFx0ICB9KVxuXHRcdC5wcm9ncmVzcyggZnVuY3Rpb24oIGluc3RhbmNlLCBpbWFnZSApIHtcblxuXHRcdCAgICBpZiAoaW1hZ2UuaXNMb2FkZWQpIHtcblx0XHQgICAgXHQkKGltYWdlLmltZykuc2libGluZ3MoXCIuaW1nLWxvYWRlci13cmFwcGVyXCIpLmhpZGUoKTtcblx0XHQgICAgXHQkKGltYWdlLmltZykuc2libGluZ3MoXCIuaW1nLXJlc3VsdC13cmFwcGVyXCIpLmFuaW1hdGVDc3MoXCJib3VuY2VJblwiKS5zaG93KCk7XG5cdFx0XHRcdCQoXCIuaW1nLWxvYWRlci1iYXJcIikud2lkdGgoKGluc3RhbmNlLnByb2dyZXNzZWRDb3VudC9pbnN0YW5jZS5pbWFnZXMubGVuZ3RoKSoxMDAgKyBcIiVcIik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRicm9rZW5Db3VudCsrO1xuXHRcdFx0XHQkKGltYWdlLmltZykucGFyZW50KCkucmVtb3ZlKCk7XG5cdFx0XHR9XG5cblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGluaXRQcmljaW5nR2FsbGVyeShjYWxsYmFja0Z1bmMpe1xuXHRcdHR5cGVvZiBjYWxsYmFja0Z1bmM9PT1cImZ1bmN0aW9uXCIgPyBjYWxsYmFja0Z1bmMgPSBjYWxsYmFja0Z1bmMgOiBjYWxsYmFja0Z1bmMgPSBmdW5jdGlvbigpe307XG5cblx0XHR2YXIgYnJva2VuQ291bnQgPSAwO1xuXHRcdCQoXCIuZ3JpZC1wcmljaW5nPi5ncmlkLWl0ZW0tcHJpY2luZ1wiKS5hZGRDbGFzcyhcImhvdmVyLW9mZlwiKTtcblxuXHRcdCQoXCIjcHJpY2luZ1wiKS5pbWFnZXNMb2FkZWQoKVxuXHRcdCBcdC5hbHdheXMoIGZ1bmN0aW9uKCBpbnN0YW5jZSApIHtcblx0XHQgICAgXHRjb25zb2xlLmxvZyhcImFsbCBpbWFnZXMgb2YgJ1ByaWNpbmcgbWVudScgbG9hZGVkXCIpO1xuXG5cdFx0ICAgXHRcdGluc3RhbnRpYXRlSXNvdG9wZUdhbGxlcnkoXCIuZ3JpZC1wcmljaW5nXCIse1xuXHRcdCAgXHRcdFx0aXRlbVNlbGVjdG9yOiAnLmdyaWQtaXRlbS1wcmljaW5nJyxcblx0XHQgIFx0XHRcdHN0YWdnZXI6IDMwXG5cdFx0XHRcdH0pO1xuXG5cdFx0ICAgIFx0YnVpbGRJbWdDYXRlZ29yaWVzKFwiI2ZpbHRlci1wcmljZWxpc3RcIixcIiNwcmljaW5nLWdhbGxlcnkgLmdyaWQtaXRlbS1wcmljaW5nXCIpO1xuXHRcdCAgICBcdHBsYWNlRmlsdGVyTGlzdGVuZXJzKFwiLmdyaWQtcHJpY2luZ1wiKTtcblx0XHQgICAgXHQkKFwiLmdyaWQtcHJpY2luZz4uZ3JpZC1pdGVtLXByaWNpbmdcIikucmVtb3ZlQ2xhc3MoXCJob3Zlci1vZmZcIik7XG5cblx0XHRcdFx0XHRjYWxsYmFja0Z1bmMoKTtcblxuXHRcdCAgXHR9KVxuXHRcdCAgXHQuZG9uZSggZnVuY3Rpb24oKSB7XG5cdFx0ICAgIFx0Y29uc29sZS5sb2coXCJBbGwgaW1hZ2VzIG9mICdQcmljaW5nIG1lbnUnIHN1Y2Nlc3NmdWxseSBsb2FkZWRcIik7XG5cblx0XHQgIFx0fSlcblx0XHQgIFx0LmZhaWwoIGZ1bmN0aW9uKCkge1xuXHRcdCAgICBcdGNvbnNvbGUubG9nKCBicm9rZW5Db3VudCArIFwiIG9mICdQcmljaW5nIG1lbnUnIGltYWdlcyBoYXZlIGJyb2tlbiBsaW5rcy4gQ2hlY2sgeW91ciBpbWFnZSBwYXRocy5cIik7XG5cdFx0ICBcdH0pXG5cdFx0XHQucHJvZ3Jlc3MoIGZ1bmN0aW9uKCBpbnN0YW5jZSwgaW1hZ2UgKSB7XG5cblx0XHQgICAgXHRpZiAoIWltYWdlLmlzTG9hZGVkKSB7XG5cdFx0XHRcdFx0YnJva2VuQ291bnQrKztcblx0XHRcdFx0XHQkKGltYWdlLmltZykucGFyZW50KCkucmVtb3ZlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHR9XG5cblxuXHRmdW5jdGlvbiBpbnN0YW50aWF0ZUlzb3RvcGVHYWxsZXJ5KGVsLG9wdGlvbnMpe1xuXHRcdCQoZWwpLmlzb3RvcGUob3B0aW9ucyk7XG5cdFx0JChlbCkuaXNvdG9wZSggJ29uJywgJ2xheW91dENvbXBsZXRlJywgZnVuY3Rpb24oKXtcblx0XHRcdGlmIChlbD09PScuZ3JpZCcpIHtcblx0XHRcdFx0JChlbCtcIiA6dmlzaWJsZSBpbWdcIikuYW5pbWF0ZUNzcygncHVsc2UnKTtcblx0XHRcdH0gZWxzZSBpZiAoZWw9PT0nLmdyaWQtcHJpY2luZycpIHtcblx0XHRcdFx0JChlbCtcIiA6dmlzaWJsZVwiKS5hbmltYXRlQ3NzKCdwdWxzZScpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gYnVpbGRJbWdDYXRlZ29yaWVzKGxpc3RFbGVtZW50LGltZ0NvbnRhaW5lcnMpIHtcblxuXHRcdHZhciAkaW1nQ29udGFpbmVycyA9ICQoaW1nQ29udGFpbmVycyk7XG5cdFx0dmFyICRidXR0b25zID0gJChsaXN0RWxlbWVudCk7XG5cdFx0dmFyIHRhZ2dlZCA9IHt9O1xuXG5cdFx0JGJ1dHRvbnMuY2hpbGRyZW4oKS5yZW1vdmUoKTtcblxuXHRcdCRpbWdDb250YWluZXJzLmVhY2goZnVuY3Rpb24oKXtcblx0XHRcdHZhciBpbWdDb250YWluZXI9dGhpcztcblx0XHRcdHZhciB0YWdzID0gJCh0aGlzKS5kYXRhKCdwb3J0Zm9saW8tdGFncycpO1xuXG5cdFx0XHRpZiAodGFncykge1xuXHRcdFx0XHR0YWdzLnNwbGl0KFwiLFwiKS5mb3JFYWNoKGZ1bmN0aW9uKHRhZ05hbWUpe1xuXHRcdFx0XHRcdHRhZ05hbWUgPSB0YWdOYW1lLnRyaW0oKTtcblx0XHRcdFx0XHRpZiAodGFnZ2VkW3RhZ05hbWVdPT1udWxsKSB7XG5cdFx0XHRcdFx0XHR0YWdnZWRbdGFnTmFtZV09W107XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRhZ2dlZFt0YWdOYW1lXS5wdXNoKGltZ0NvbnRhaW5lcik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0pXG5cblx0XHQkYnV0dG9ucy5hZGRDbGFzcyhcImZpbHRlci13cmFwcGVyXCIpO1xuXHRcdCQoXCI8bGkvPlwiKS5hcHBlbmRUbygkYnV0dG9ucyk7XG5cblx0XHQkKFwiPGEvPlwiLCB7XG5cdFx0XHR0ZXh0OiBcIlbFoWVcIixcblx0XHRcdGNsYXNzOiBcImZpbHRlci1pdGVtIHNlbGVjdGVkXCIsXG5cdFx0XHRjbGljazogZnVuY3Rpb24oKXtcblx0XHRcdFx0JCh0aGlzKS5hZGRDbGFzcyhcInNlbGVjdGVkXCIpLnBhcmVudCgpLnNpYmxpbmdzKCkuY2hpbGRyZW4oKS5yZW1vdmVDbGFzcyhcInNlbGVjdGVkXCIpO1xuXHRcdFx0fVxuXHRcdH0pLmFwcGVuZFRvKCRidXR0b25zLmNoaWxkcmVuKCkuZXEoMCkpLmF0dHIoJ2RhdGEtbGFuZycsJ1bFoWUnKTtcblxuXHRcdCQoXCI8bGk+PGEgY2xhc3M9J2ZpbHRlci1pdGVtIGZpbHRlci1wb3J0Zm9saW8tZGl2aWRlcic+Jm5ic3A7PC9hPjwvbGk+XCIpLmFwcGVuZFRvKCRidXR0b25zKTtcblxuXHRcdCQuZWFjaCh0YWdnZWQsIGZ1bmN0aW9uKHRhZ05hbWUpIHtcblx0XHRcdCQoXCI8bGkvPlwiKS5hcHBlbmRUbygkYnV0dG9ucyk7XG5cblx0XHRcdCQoXCI8YS8+XCIsIHtcblx0XHRcdFx0dGV4dDogdGFnTmFtZSxcblx0XHRcdFx0Y2xhc3M6IFwiZmlsdGVyLWl0ZW1cIixcblx0XHRcdFx0Y2xpY2s6IGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0JCh0aGlzKS5hZGRDbGFzcyhcInNlbGVjdGVkXCIpLnBhcmVudCgpLnNpYmxpbmdzKCkuY2hpbGRyZW4oKS5yZW1vdmVDbGFzcyhcInNlbGVjdGVkXCIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KS5hcHBlbmRUbygkYnV0dG9ucy5jaGlsZHJlbigpLmxhc3QoKSkuYXR0cignZGF0YS1sYW5nJyx0YWdOYW1lKTtcblx0XHR9KVxuXHR9O1xuXG5cdGZ1bmN0aW9uIHBsYWNlRmlsdGVyTGlzdGVuZXJzKGdyaWRFbCkgeyAgIC8vIFwiLmdyaWRcIlxuXHQgICAgJCgnLmZpbHRlci13cmFwcGVyJykub24oICdjbGljaycsICcuZmlsdGVyLWl0ZW0nLCBmdW5jdGlvbigpIHtcblx0ICAgIFx0dmFyIGZpbHRlclZhbHVlID0gJCh0aGlzKS5kYXRhKCdsYW5nJyk7XG5cdCAgICBcdCAvLyBjb25zb2xlLmxvZyhcIi0tLS0tLS0tXCIpO1xuXHQgICAgXHQgLy8gY29uc29sZS5sb2coZmlsdGVyVmFsdWUpO1xuXG5cdCAgICBcdGlmIChmaWx0ZXJWYWx1ZSA9PT0gJCgkKFwiLmZpbHRlci1pdGVtXCIpWzBdKS5kYXRhKCdsYW5nJykpIHtcblx0ICAgIFx0XHQkKGdyaWRFbCkuaXNvdG9wZSh7XG5cdFx0XHRcdCAgXHRmaWx0ZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQgIFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdCAgXHQgIFx0fVxuXHRcdFx0XHRcdH0pO1xuXHQgICAgXHR9IGVsc2Uge1xuXHRcdFx0XHRcdCQoZ3JpZEVsKS5pc290b3BlKHtcblx0XHRcdFx0XHQgIFx0ZmlsdGVyOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQgIFx0XHR0YWdUZXh0PSAkKHRoaXMpLmRhdGEoJ3BvcnRmb2xpb1RhZ3MnKTtcblx0XHRcdFx0XHQgIFx0XHRmb3VuZCA9IHRhZ1RleHQuc2VhcmNoKGZpbHRlclZhbHVlKTtcblx0XHRcdFx0XHRcdCAgXHRpZiAoZm91bmQ+IC0xKSB7XG5cdFx0XHRcdFx0XHQgIFx0XHRyZXR1cm4gdHJ1ZVxuXHRcdFx0XHRcdFx0ICBcdH0gICBlbHNlIHtcblx0XHRcdFx0XHRcdCAgXHRcdHJldHVybiBmYWxzZVxuXHRcdFx0XHRcdFx0ICBcdH1cblx0XHRcdFx0ICBcdCAgXHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblxuXHQgICAgfSk7XG5cblx0XHQkKGdyaWRFbCArICcgLmdyaWQtaXRlbScpLm9uKCAnY2xpY2snLCBmdW5jdGlvbihlKSB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRpZiAoJCh0aGlzKS5oYXNDbGFzcygnZ3JpZC1pdGVtLXNlbGVjdGVkJykpIHtcblx0XHRcdFx0JCh0aGlzKS5yZW1vdmVDbGFzcygnZ3JpZC1pdGVtLXNlbGVjdGVkJyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkKGdyaWRFbCArICcgLmdyaWQtaXRlbScpLnJlbW92ZUNsYXNzKCdncmlkLWl0ZW0tc2VsZWN0ZWQnKTtcblx0XHRcdFx0JCh0aGlzKS5hZGRDbGFzcygnZ3JpZC1pdGVtLXNlbGVjdGVkJyk7XG5cdFx0XHR9XG5cdFx0XHQkKGdyaWRFbCkuaXNvdG9wZSgnbGF5b3V0Jyk7XG5cdFx0XHQvLyBjb25zb2xlLmxvZygnZ3JpZCBpdGVtIGNsaWNrZWQnKTtcblx0XHRcdC8vIGNvbnNvbGUubG9nKCQodGhpcykpO1xuXHRcdH0pO1xuXG5cdH1cblxuXHRnbG9iYWwubXlTaXRlLmluaXRDb21taXNpb25zR2FsbGVyeSA9IGluaXRDb21taXNpb25zR2FsbGVyeTtcblx0Z2xvYmFsLm15U2l0ZS5pbml0UHJpY2luZ0dhbGxlcnkgPSBpbml0UHJpY2luZ0dhbGxlcnk7XG5cbn0od2luZG93KSk7XG4iXX0=
