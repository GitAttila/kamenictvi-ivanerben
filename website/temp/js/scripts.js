var ContactFormModule=function(){return{initContactFormListener:function(){$("#contact-form .btn-site").on("click",function(){$("#contact-form").submit()}),$("#contact-form").submit(function(e){e.preventDefault(),console.log("Form submitted listener called");var t=$("#contact-form").find("input, textarea, select"),s={};t.each(function(){this.name&&("checkbox"==this.type||"radio"==this.type?this.checked&&(s[this.name]=this.value):s[this.name]=this.value)}),console.log("formValues : "+JSON.stringify(s)),$.ajax({url:"assets/php/handleajaxform.php",method:"POST",data:s,success:function(e){if(console.log("AJAX post result result : "+JSON.stringify(e)),$("div[data-error-id]").text(""),$("#contact-form input, #contact-form textarea").removeClass("form-error"),$("#send-result").text(""),Object.keys(e.errors).length>0)for(var t in e.errors)console.log("error in "+t+": "+e.errors[t]),$('div[data-error-id="'+t+'"]').text(e.errors[t]).hide().slideDown(),$('*[name="'+t+'"]').addClass("form-error"),$('*[name="'+t+'"]').animateCss("shake");else console.log("All validation passed succesfully!"),$("#send-result").text("Thank you. Your message has been sent."),$("#send-result").removeClass("alert-danger").addClass("alert-success"),$("#send-result").show().animateCss("bounceIn",function(){$("input").val(""),$("textarea").val(""),$("#send-result").delay(5e3).slideUp()})},error:function(){$("#send-result").removeClass("alert-success"),$("#send-result").addClass("alert-danger"),$("#send-result").text("Sorry... Your message could not have been delivered."),$("#send-result").slideDown()}})})}}}();
var MapModule=function(){var e,n={lat:50.048822,lng:15.200242};return{initContactMap:function(){var a=[{featureType:"all",elementType:"all",stylers:[{saturation:-100},{gamma:.5}]}],t=new google.maps.Map(document.getElementById("contact-map"),{center:n,scrollwheel:!1,streetViewControl:!0,streetViewControl:{position:google.maps.ControlPosition.LEFT_BOTTOM},mapTypeControl:!0,mapTypeControlOptions:{position:google.maps.ControlPosition.BOTTOM_LEFT},zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},styles:a,zoom:8});e=t;new google.maps.Marker({map:t,position:n,title:"Kamenictví Erben",icon:{url:"assets/images/IE_logo_rounded_pointer.png",scaledSize:new google.maps.Size(150,150)}});e.panBy(0,-$("nav.navbar").height())},placeContactListeners:function(){$(".btn-map").on("click",function(a){a.preventDefault();var t=$(this);if(window.addEventListener("orientationchange",function(){t.children().hasClass("fa-expand")&&(window.matchMedia("(orientation: landscape)").matches&&window.innerWidth<767?$("#contact-map").animate({height:"75vh"},500,function(){google.maps.event.trigger(e,"resize"),e.setCenter(n),e.panBy(0,-$("nav.navbar").height())}):$("#contact-map").animate({height:"50vh"},500,function(){google.maps.event.trigger(e,"resize"),e.setCenter(n),e.panBy(0,-$("nav.navbar").height())}))},!1),t.children().hasClass("fa-expand"))return t.children().removeClass("fa-expand").addClass("fa-compress"),void $("#contact-map").animate({height:"100vh"},500,function(){google.maps.event.trigger(e,"resize"),e.setCenter(n),e.panBy(0,-$("nav.navbar").height())});t.children().hasClass("fa-compress")&&(t.children().removeClass("fa-compress").addClass("fa-expand"),window.matchMedia("(orientation: landscape)").matches&&window.innerWidth<767?$("#contact-map").animate({height:"75vh"},500,function(){google.maps.event.trigger(e,"resize"),e.setCenter(n),e.panBy(0,-$("nav.navbar").height())}):$("#contact-map").animate({height:"50vh"},500,function(){google.maps.event.trigger(e,"resize"),e.setCenter(n),e.panBy(0,-$("nav.navbar").height())}))})}}}();
$(function(n){$(".loader-wrapper").hide();setInterval(function(){$(".btn-down").animateCss("bounce")},3e3);$.fn.extend({animateCss:function(n,e){return this.addClass("animated "+n).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("animated "+n),$.isFunction(e)&&e()}),this}}),initCarousels=function(){console.log("carousels initialized");for(var n=[{carousel:"#main-carousel",interval:7e3,pause:"none"},{carousel:"#about-carousel",interval:5e3,pause:"none"},{carousel:"#carouselTombstones",interval:3e3,pause:"none"},{carousel:"#carouselGarden",interval:3e3,pause:"none"},{carousel:"#carouselRestorations",interval:3e3,pause:"none"},{carousel:"#CarouselMonuments",interval:3e3,pause:"none"}],e=0;e<n.length-1;e++)$(n[e].carousel).carousel({interval:n[e].interval})},n.initCarousels=initCarousels}(window));
!function(a,t){var n=["cz","en"],e=function(a){return new e.init(a)};e.prototype={getKeyVal:function(a){return self=this,function(){a=a.trim();for(var t,n=0;n<=e.data.length-1;n++){if(e.data[n].datatag===a)return t=e.data[n][self.activeLang];t=""}return t}()},switchLang:function(a){self=this;for(var n=t("[data-lang]").length,e=0;e<=n-1;e++){var i=t(t("[data-lang]")[e]).data("lang");value=LNG$(a).getKeyVal(i),""!==value.trim()&&(value.search("<ph>")>-1?(value=value.substr(4,value.length),t(t("[data-lang]")[e]).attr("placeholder",value)):t(t("[data-lang]")[e]).text(LNG$(a).getKeyVal(i)).animateCss("pulse"),t(t("[data-lang]")[e]).css("visibility","visible"))}}},e.init=function(a){this.activeLang=a||n[0]},e.init.prototype=e.prototype,a.Lang=a.LNG$=e,function(a,n){t.getJSON(a,function(){}).done(function(a){console.log("lang data loaded..."),n(a)}).fail(function(a,t,n){console.log("--- error ---"),console.log(a)}).always(function(){})}("./assets/data/lang.json",function(a){e.data=a;var n=t(".lang-switcher>span").text().trim();LNG$(n).switchLang(n)})}(window,jQuery);
$(function(n){function a(){function a(n,a,e){"function"!=typeof e&&(e=function(){}),$(a).append($("<script />",{src:n,async:!0,defer:!0})),e()}function i(n){"function"!=typeof n&&(n=function(){}),$("#ajax-container").show(),$(".loader-wrapper").hide(),$("#ajax-content").fadeIn(500,function(){n()})}var u={};$cachedItems=$("#mainNavbar [data-menuitem]"),$($cachedItems).each(function(n,a){u[$(a).data("menuitem")]=""}),n.mySite.cachedPage=u;var m={main:function(){initCarousels(),o(),d||c("#parallax1","#parallax1 > div")},about:function(){initCarousels(),d||c("#parallax2","#parallax2 > div")},realisations:function(){initCommisionsGallery(function(){LNG$(s).switchLang(s)})},pricing:function(){initPricingGallery(function(){LNG$(s).switchLang(s)})},contact:function(n){n=n||!1,n?a("https://maps.googleapis.com/maps/api/js?key="+l+"&callback=MapModule.initContactMap","body",function(){MapModule.placeContactListeners(),ContactFormModule.initContactFormListener()}):(MapModule.initContactMap(),MapModule.placeContactListeners(),ContactFormModule.initContactFormListener())}};e(),t(!0),$("#mainNavbar").on("show.bs.collapse",function(){$(".hamburger__menu-icon").addClass("hamburger__menu-icon--close-x")}),$("#mainNavbar").on("hide.bs.collapse",function(){$(".hamburger__menu-icon").removeClass("hamburger__menu-icon--close-x")}),$(".nav-link").on("click",function(n){n.preventDefault();var a=this.href.trim().toLowerCase(),e=$(this).data("menuitem").trim().toLowerCase();s=$(".lang-switcher>span").text().trim(),$(this).siblings(".nav-link").removeClass("active"),$(this).addClass("active"),console.log(r),void 0!==r&&null!==r&&(r=r.destroy(!0)),$("#mainNavbar").collapse("hide"),$("#ajax-container").fadeOut(500,function(){$("#ajax-content").hide(),$(".loader-wrapper").fadeIn(500),$("body,html").stop().animate({scrollTop:0},"50"),$(this).remove(),""===mySite.cachedPage[e]?$("#ajax-content").load(a+" #ajax-container",function(n,a){"success"===a?(console.log("Loaded '"+e+"' from SERVER..."),i(function(){LNG$(s).switchLang(s),u[e]=$(n).find("#ajax-container"),mapInitFlag="contact"===e,m[e](mapInitFlag)})):"error"===a&&($(".loader-wrapper").hide(),console.log("Error loading from server..."))}):(console.log("Loaded '"+e+"' from CACHE..."),$(mySite.cachedPage[e]).appendTo("#ajax-content"),i(function(){LNG$(s).switchLang(s),m[e]()}))})})}function e(){var n=0;$(window).on("scroll",function(){var a=$(window).height(),e=$(window).scrollTop();n=a/5,e<0&&(e=0),(a-n)/e>1?$(".btn-move-up").is(":visible")&&$(".btn-move-up").animateCss("bounceOut",function(){$(".btn-move-up").hide(),$(".btn-down").show().animateCss("bounceIn")}):$(".btn-move-up").is(":visible")||$(".btn-down").animateCss("bounceOut",function(){$(".btn-down").hide(),$(".btn-move-up").show(),$(".btn-move-up").animateCss("bounceIn")})}),$(".btn-move-up").on("click",function(){$("body,html").stop().animate({scrollTop:0},"700","swing")}),$(".btn-down").on("click",function(n){n.preventDefault();var a=n.currentTarget.hash,e=$(a).offset().top;$("body,html").stop().animate({scrollTop:e},"700","swing")})}function t(n){function a(n,a){"object"!=typeof n&&(n=n||[]),"string"!=typeof a&&(a=a||"");var e=!1;return-1===n.indexOf(i)?console.log("error: language: '"+a+"' within 'index.html' file is not compatible with languages defined."):e=!0,e}var n=n||!1,e=[],t={cz:!1,fr:!1,en:!0,de:!0,es:!1};$.each(t,function(n,a){a&&e.push(n)});var i=$(".lang-switcher>span").text().trim();n&&LNG$(i).switchLang(i),$(".lang-switcher>span").on("click",function(){var n=e.indexOf(i)+1;a(e,i)&&(n=n===e.length?0:n,i=e[n],$(".lang-switcher>span").text(i),LNG$(i).switchLang(i),$(this).animateCss("bounceIn"))})}function o(){$(".btn-site").on("click",function(n){n.preventDefault;var a=$(this).data("link").trim(),i=window.location.href;i.search("index.html")>=0?i=i.replace("index.html","realisations.html"):i+="realisations.html",$("#ajax-container").fadeOut(500,function(){$("#ajax-content").hide(),$(".loader-wrapper").show(),$(".navbar-nav>.nav-link").removeClass("active"),$(".navbar-nav>.nav-link[href='realisations.html']").addClass("active"),""===mySite.cachedPage.realisations?$("#ajax-content").load(i+" #ajax-container",function(){$(".loader-wrapper").hide(),$("#ajax-content").fadeIn(500),e(),t(),initCommisionsGallery(function(){LNG$(s).switchLang(s),$(".filter-item").each(function(n){if(void 0!==$(this).data("lang")&&$(this).data("lang").toLowerCase().trim()===a)return void $(this).trigger("click")})})}):(console.log("Loaded 'realisations' with quick link from CACHE..."),$(mySite.cachedPage.realisations).appendTo("#ajax-content"),$(".loader-wrapper").hide(),$("#ajax-content").fadeIn(500),e(),t(),initCommisionsGallery(function(){LNG$(s).switchLang(s),$(".filter-item").each(function(n){if(void 0!==$(this).data("lang")&&$(this).data("lang").toLowerCase().trim()===a)return void $(this).trigger("click")})}))})})}function c(n,a){if(n=n||"",a=a||"",!d){var e=new ScrollMagic.Controller({globalSceneOptions:{triggerHook:"onEnter",duration:"100%"}});new ScrollMagic.Scene({triggerElement:n}).setTween(a,{y:"50%",ease:Linear.easeNone}).addTo(e)}}var r,s="",l="AIzaSyA0qVKpndfcoIgP5nwuJxmH5q0v5TSvEc4";n.mySite={};var d=function(){var n=["android","webos","iphone","ipad","blackberry"];for(i in n)if(navigator.userAgent.toLowerCase().search(n[i])>-1&&void 0!==window.orientation)return!0;return!1}();n.mySite.isMobileFlag=d,!0===d&&$("body").addClass("isMobile"),$(window).load(function(){o(),a(),e(),t(),c("#parallax1","#parallax1 > div")}),n.mySite.navMenuInit=a,n.mySite.placeButtonMoveUpListener=e,n.mySite.placeLangSwitchListener=t,n.mySite.initParallax=c}(window));
function initCommisionsGallery(e){e="function"==typeof e?e:function(){};var i=0;$(".grid-item>.img-result-wrapper").hide(),$(".grid-item>.img-loader-wrapper").show(),$(".grid>.grid-item").addClass("hover-off"),$("#portfolios").imagesLoaded().always(function(i){console.log("all images of 'Commisions menu' loaded"),instantiateIsotopeGallery(".grid",{itemSelector:".grid-item",stagger:30}),buildImgCategories("#filter-portfolio","#portfolio-gallery .grid-item"),placeFilterListeners(".grid"),$(".grid-item>.img-result-wrapper").fadeOut(1e3),$(".img-loader>.img-loader-text").text("images loaded"),$(".img-loader-bar").css("background-color","green"),$(".img-loader").delay(3e3).slideUp(1e3),$(".grid>.grid-item").removeClass("hover-off"),e()}).done(function(){console.log("all images of 'Commisions menu' successfully loaded")}).fail(function(){console.log(i+" of 'Commisions menu' images have broken links. Check your image paths."),$(".img-loader").delay(3e3).slideUp(1e3)}).progress(function(e,t){t.isLoaded?($(t.img).siblings(".img-loader-wrapper").hide(),$(t.img).siblings(".img-result-wrapper").animateCss("bounceIn").show(),$(".img-loader-bar").width(e.progressedCount/e.images.length*100+"%")):(i++,$(t.img).parent().remove())})}function initPricingGallery(e){e="function"==typeof e?e:function(){};var i=0;$(".grid-pricing>.grid-item-pricing").addClass("hover-off"),$("#pricing").imagesLoaded().always(function(i){console.log("all images of 'Pricing menu' loaded"),instantiateIsotopeGallery(".grid-pricing",{itemSelector:".grid-item-pricing",stagger:30}),buildImgCategories("#filter-pricelist","#pricing-gallery .grid-item-pricing"),placeFilterListeners(".grid-pricing"),$(".grid-pricing>.grid-item-pricing").removeClass("hover-off"),e()}).done(function(){console.log("All images of 'Pricing menu' successfully loaded")}).fail(function(){console.log(i+" of 'Pricing menu' images have broken links. Check your image paths.")}).progress(function(e,t){t.isLoaded||(i++,$(t.img).parent().remove())})}function instantiateIsotopeGallery(e,i){$(e).isotope(i)}function buildImgCategories(e,i){var t=$(i),o=$(e),r={};o.children().remove(),t.each(function(){var e=this,i=$(this).data("portfolio-tags");i&&i.split(",").forEach(function(i){i=i.trim(),null==r[i]&&(r[i]=[]),r[i].push(e)})}),o.addClass("filter-wrapper"),$("<li/>").appendTo(o),$("<a/>",{text:"Vše",class:"filter-item selected",click:function(){$(this).addClass("selected").parent().siblings().children().removeClass("selected")}}).appendTo(o.children().eq(0)).attr("data-lang","Vše"),$("<li><a class='filter-item filter-portfolio-divider'>&nbsp;</a></li>").appendTo(o),$.each(r,function(e){$("<li/>").appendTo(o),$("<a/>",{text:e,class:"filter-item",click:function(){$(this).addClass("selected").parent().siblings().children().removeClass("selected")}}).appendTo(o.children().last()).attr("data-lang",e)})}function placeFilterListeners(e){$(".filter-wrapper").on("click",".filter-item",function(){var i=$(this).data("lang");i===$($(".filter-item")[0]).data("lang")?$(e).isotope({filter:function(){return!0}}):$(e).isotope({filter:function(){return tagText=$(this).data("portfolioTags"),found=tagText.search(i),found>-1}})}),$(e+" .grid-item").on("click",function(i){i.preventDefault(),$(this).hasClass("grid-item-selected")?$(this).removeClass("grid-item-selected"):($(e+" .grid-item").removeClass("grid-item-selected"),$(this).addClass("grid-item-selected")),$(e).isotope("layout")})}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRhY3QtZm9ybS5qcyIsImNvbnRhY3RfbWFwLmpzIiwiaW5pdC5qcyIsImxhbmd1YWdlLWNvbnRyb2xsZXIuanMiLCJuYXZpZ2F0aW9uLmpzIiwicG9ydGZvbGlvX2ZpbHRlci5qcyJdLCJuYW1lcyI6WyJDb250YWN0Rm9ybU1vZHVsZSIsImluaXRDb250YWN0Rm9ybUxpc3RlbmVyIiwiJCIsIm9uIiwic3VibWl0IiwiZSIsInByZXZlbnREZWZhdWx0IiwiY29uc29sZSIsImxvZyIsImlucHV0RWxlbWVudHMiLCJmaW5kIiwiZm9ybVZhbHVlcyIsImVhY2giLCJ0aGlzIiwibmFtZSIsInR5cGUiLCJjaGVja2VkIiwidmFsdWUiLCJKU09OIiwic3RyaW5naWZ5IiwiYWpheCIsInVybCIsIm1ldGhvZCIsImRhdGEiLCJzdWNjZXNzIiwicmVzdWx0IiwidGV4dCIsInJlbW92ZUNsYXNzIiwiT2JqZWN0Iiwia2V5cyIsImVycm9ycyIsImxlbmd0aCIsImlucHV0TmFtZSIsImhpZGUiLCJzbGlkZURvd24iLCJhZGRDbGFzcyIsImFuaW1hdGVDc3MiLCJzaG93IiwidmFsIiwiZGVsYXkiLCJzbGlkZVVwIiwiZXJyb3IiLCJNYXBNb2R1bGUiLCJteU1hcCIsIm15UG9zaXRpb24iLCJsYXQiLCJsbmciLCJpbml0Q29udGFjdE1hcCIsInN0eWxlQXJyYXkiLCJmZWF0dXJlVHlwZSIsImVsZW1lbnRUeXBlIiwic3R5bGVycyIsInNhdHVyYXRpb24iLCJnYW1tYSIsIm1hcCIsImdvb2dsZSIsIm1hcHMiLCJNYXAiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY2VudGVyIiwic2Nyb2xsd2hlZWwiLCJzdHJlZXRWaWV3Q29udHJvbCIsInBvc2l0aW9uIiwiQ29udHJvbFBvc2l0aW9uIiwiTEVGVF9CT1RUT00iLCJtYXBUeXBlQ29udHJvbCIsIm1hcFR5cGVDb250cm9sT3B0aW9ucyIsIkJPVFRPTV9MRUZUIiwiem9vbUNvbnRyb2wiLCJ6b29tQ29udHJvbE9wdGlvbnMiLCJMRUZUX0NFTlRFUiIsInN0eWxlcyIsInpvb20iLCJNYXJrZXIiLCJ0aXRsZSIsImljb24iLCJzY2FsZWRTaXplIiwiU2l6ZSIsInBhbkJ5IiwiaGVpZ2h0IiwicGxhY2VDb250YWN0TGlzdGVuZXJzIiwiJHRoaXMiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiY2hpbGRyZW4iLCJoYXNDbGFzcyIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwiaW5uZXJXaWR0aCIsImFuaW1hdGUiLCJldmVudCIsInRyaWdnZXIiLCJzZXRDZW50ZXIiLCJnbG9iYWwiLCJzZXRJbnRlcnZhbCIsImZuIiwiZXh0ZW5kIiwiYW5pbWF0aW9uTmFtZSIsImNhbGxCYWNrRnVuYyIsIm9uZSIsImlzRnVuY3Rpb24iLCJpbml0Q2Fyb3VzZWxzIiwiY2Fyb3VzZWxzU2V0dXAiLCJjYXJvdXNlbCIsImludGVydmFsIiwicGF1c2UiLCJpIiwic2l0ZUxhbmdzIiwiTGFuZyIsImFjdGl2ZUxhbmciLCJpbml0IiwicHJvdG90eXBlIiwiZ2V0S2V5VmFsIiwia2V5VmFsIiwic2VsZiIsInRyaW0iLCJkYXRhdGFnIiwic3dpdGNoTGFuZyIsInN3aXRjaFRvTGFuZyIsIm51bU9mTGFuZ0VscyIsInJldHJpZXZlZERhdGFUYWciLCJMTkckIiwic2VhcmNoIiwic3Vic3RyIiwiYXR0ciIsImNzcyIsImNhbGxiYWNrRnVuYyIsImdldEpTT04iLCJkb25lIiwiZmFpbCIsImpxWEhSIiwidGV4dFN0YXR1cyIsImVycm9yVGhyb3duIiwiYWx3YXlzIiwiaW5pdExhbmciLCJqUXVlcnkiLCJuYXZNZW51SW5pdCIsImFkZFNjcmlwdCIsInNyYyIsImVsIiwiY2FsbGJhY2tGIiwiYXBwZW5kIiwiYXN5bmMiLCJkZWZlciIsInVwZGF0ZVBhZ2UiLCJmYWRlSW4iLCJjYWNoZWRQYWdlIiwiJGNhY2hlZEl0ZW1zIiwiaW5kZXgiLCJteVNpdGUiLCJwYWdlQ2FsbGJhY2tGdW5jIiwibWFpbiIsImxpbmtUb0dhbGxlcnkiLCJpc01vYmlsZUZsYWciLCJpbml0UGFyYWxsYXgiLCJhYm91dCIsInJlYWxpc2F0aW9ucyIsImluaXRDb21taXNpb25zR2FsbGVyeSIsInByaWNpbmciLCJpbml0UHJpY2luZ0dhbGxlcnkiLCJjb250YWN0IiwicnVuTWFwSW5pdFNjcmlwdCIsIkFQSWtleSIsInBsYWNlQnV0dG9uTW92ZVVwTGlzdGVuZXIiLCJwbGFjZUxhbmdTd2l0Y2hMaXN0ZW5lciIsImhyZWYiLCJ0b0xvd2VyQ2FzZSIsIm1lbnVOYW1lIiwic2libGluZ3MiLCJjb250cm9sbGVyIiwidW5kZWZpbmVkIiwiZGVzdHJveSIsImNvbGxhcHNlIiwiZmFkZU91dCIsInN0b3AiLCJzY3JvbGxUb3AiLCJyZW1vdmUiLCJsb2FkIiwic3RhdHVzIiwibWFwSW5pdEZsYWciLCJhcHBlbmRUbyIsIm9mZlNldFkiLCJhY3R1YWxIZWlnaHQiLCJhY3R1YWxTY3JvbGxQb3MiLCJpcyIsImp1bXBIYXNoIiwiY3VycmVudFRhcmdldCIsImhhc2giLCJqdW1wUG9pbnQiLCJvZmZzZXQiLCJ0b3AiLCJ1cGRhdGUiLCJpc0xhbmdEZWZpbmVkIiwiYWN0aXZlTGFuZ3MiLCJsYW5nVG9DaGVjayIsImlzRGVmaW5lZCIsImluZGV4T2YiLCJhY3RpdmVMYW5ndWFnZXMiLCJsYW5ndWFnZXMiLCJjeiIsImZyIiwiZW4iLCJkZSIsImVzIiwicHVzaCIsIm5leHQiLCJnYWxMaW5rIiwibG9jYXRpb24iLCJyZXBsYWNlIiwidHJpZ2dlckVsZW1lbnQiLCJ0d2VlbkVsZW1lbnQiLCJTY3JvbGxNYWdpYyIsIkNvbnRyb2xsZXIiLCJnbG9iYWxTY2VuZU9wdGlvbnMiLCJ0cmlnZ2VySG9vayIsImR1cmF0aW9uIiwiU2NlbmUiLCJzZXRUd2VlbiIsInkiLCJlYXNlIiwiTGluZWFyIiwiZWFzZU5vbmUiLCJhZGRUbyIsImFnZW50cyIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsIm9yaWVudGF0aW9uIiwiYnJva2VuQ291bnQiLCJpbWFnZXNMb2FkZWQiLCJpbnN0YW5jZSIsImluc3RhbnRpYXRlSXNvdG9wZUdhbGxlcnkiLCJpdGVtU2VsZWN0b3IiLCJzdGFnZ2VyIiwiYnVpbGRJbWdDYXRlZ29yaWVzIiwicGxhY2VGaWx0ZXJMaXN0ZW5lcnMiLCJwcm9ncmVzcyIsImltYWdlIiwiaXNMb2FkZWQiLCJpbWciLCJ3aWR0aCIsInByb2dyZXNzZWRDb3VudCIsImltYWdlcyIsInBhcmVudCIsIm9wdGlvbnMiLCJpc290b3BlIiwibGlzdEVsZW1lbnQiLCJpbWdDb250YWluZXJzIiwiJGltZ0NvbnRhaW5lcnMiLCIkYnV0dG9ucyIsInRhZ2dlZCIsImltZ0NvbnRhaW5lciIsInRhZ3MiLCJzcGxpdCIsImZvckVhY2giLCJ0YWdOYW1lIiwiY2xhc3MiLCJjbGljayIsImVxIiwibGFzdCIsImdyaWRFbCIsImZpbHRlclZhbHVlIiwiZmlsdGVyIiwidGFnVGV4dCIsImZvdW5kIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFJQSxtQkFBb0IsV0E0RXBCLE9BQ0lDLHdCQTNFMEIsV0FFMUJDLEVBQUUsMkJBQTJCQyxHQUFJLFFBQVMsV0FFdENELEVBQUcsaUJBQWtCRSxXQUd6QkYsRUFBRSxpQkFBaUJFLE9BQU8sU0FBU0MsR0FDL0JBLEVBQUVDLGlCQUVGQyxRQUFRQyxJQUFJLGlDQUVaLElBQUlDLEdBQWdCUCxFQUFFLGlCQUFpQlEsS0FBSywyQkFDeENDLElBRUpGLEdBQWNHLEtBQUssV0FDWEMsS0FBS0MsT0FDWSxZQUFiRCxLQUFLRSxNQUFtQyxTQUFiRixLQUFLRSxLQUM1QkYsS0FBS0csVUFDTEwsRUFBV0UsS0FBS0MsTUFBUUQsS0FBS0ksT0FHakNOLEVBQVdFLEtBQUtDLE1BQVFELEtBQUtJLFNBS3pDVixRQUFRQyxJQUFJLGdCQUFrQlUsS0FBS0MsVUFBVVIsSUFFN0NULEVBQUVrQixNQUNFQyxJQUFLLGdDQUNMQyxPQUFRLE9BQ1JDLEtBQU1aLEVBQ05hLFFBQVMsU0FBU0MsR0FRZCxHQU5BbEIsUUFBUUMsSUFBSSw2QkFBK0JVLEtBQUtDLFVBQVVNLElBRTFEdkIsRUFBRSxzQkFBc0J3QixLQUFLLElBQzdCeEIsRUFBRSwrQ0FBK0N5QixZQUFZLGNBQzdEekIsRUFBRSxnQkFBZ0J3QixLQUFLLElBRW5CRSxPQUFPQyxLQUFLSixFQUFPSyxRQUFRQyxPQUFTLEVBQ3BDLElBQUssR0FBSUMsS0FBYVAsR0FBT0ssT0FDekJ2QixRQUFRQyxJQUFJLFlBQWN3QixFQUFZLEtBQU9QLEVBQU9LLE9BQU9FLElBRTNEOUIsRUFBRSxzQkFBd0I4QixFQUFZLE1BQU1OLEtBQUtELEVBQU9LLE9BQU9FLElBQVlDLE9BQU9DLFlBQ2xGaEMsRUFBRSxXQUFhOEIsRUFBWSxNQUFNRyxTQUFTLGNBQzFDakMsRUFBRSxXQUFhOEIsRUFBWSxNQUFNSSxXQUFXLGFBR2hEN0IsU0FBUUMsSUFBSSxzQ0FFWk4sRUFBRSxnQkFBZ0J3QixLQUFLLDBDQUN2QnhCLEVBQUUsZ0JBQWdCeUIsWUFBWSxnQkFBZ0JRLFNBQVMsaUJBRXZEakMsRUFBRSxnQkFBZ0JtQyxPQUFPRCxXQUFXLFdBQVksV0FDNUNsQyxFQUFFLFNBQVNvQyxJQUFJLElBQ2ZwQyxFQUFFLFlBQVlvQyxJQUFJLElBQ2xCcEMsRUFBRSxnQkFBZ0JxQyxNQUFNLEtBQU1DLGFBSTFDQyxNQUFPLFdBQ0h2QyxFQUFFLGdCQUFnQnlCLFlBQVksaUJBQzlCekIsRUFBRSxnQkFBZ0JpQyxTQUFTLGdCQUMzQmpDLEVBQUUsZ0JBQWdCd0IsS0FBSyx3REFDdkJ4QixFQUFFLGdCQUFnQmdDO0FDbkV0QyxHQUFJUSxXQUFZLFdBRWQsR0FBSUMsR0FDQUMsR0FBY0MsSUFBSyxVQUFXQyxJQUFLLFVBc0hyQyxRQUNJQyxlQXJIZSxXQUdqQixHQUFJQyxLQUVBQyxZQUFlLE1BQ2ZDLFlBQWUsTUFDZkMsVUFFUUMsWUFBZSxNQUdmQyxNQUFTLE9BT2pCQyxFQUFNLEdBQUlDLFFBQU9DLEtBQUtDLElBQUlDLFNBQVNDLGVBQWUsZ0JBQ2xEQyxPQUFRaEIsRUFDUmlCLGFBQWEsRUFDYkMsbUJBQW1CLEVBQ25CQSxtQkFDRUMsU0FBVVIsT0FBT0MsS0FBS1EsZ0JBQWdCQyxhQUV4Q0MsZ0JBQWdCLEVBQ2hCQyx1QkFDSUosU0FBVVIsT0FBT0MsS0FBS1EsZ0JBQWdCSSxhQUUxQ0MsYUFBYSxFQUNiQyxvQkFDRVAsU0FBVVIsT0FBT0MsS0FBS1EsZ0JBQWdCTyxhQUd4Q0MsT0FBUXhCLEVBQ1J5QixLQUFNLEdBR1Y5QixHQUFRVyxDQUdLLElBQUlDLFFBQU9DLEtBQUtrQixRQUMzQnBCLElBQUtBLEVBQ0xTLFNBQVVuQixFQUNWK0IsTUFBTyxtQkFDUEMsTUFDRXZELElBQUssNENBQ0x3RCxXQUFZLEdBQUl0QixRQUFPQyxLQUFLc0IsS0FBSyxJQUFLLE9BSTFDbkMsR0FBTW9DLE1BQU0sR0FBSTdFLEVBQUUsY0FBYzhFLFdBa0U5QkMsc0JBOUR3QixXQUM1Qi9FLEVBQUUsWUFBWUMsR0FBRyxRQUFTLFNBQVNFLEdBQ2xDQSxFQUFFQyxnQkFDRixJQUFJNEUsR0FBTWhGLEVBQUVXLEtBd0JaLElBdEJBc0UsT0FBT0MsaUJBQWlCLG9CQUFxQixXQUN4Q0YsRUFBTUcsV0FBV0MsU0FBUyxlQUN6QkgsT0FBT0ksV0FBVyw0QkFBNEJDLFNBQVdMLE9BQU9NLFdBQVcsSUFDOUV2RixFQUFFLGdCQUFnQndGLFNBQ2pCVixPQUFRLFFBQ1AsSUFBSyxXQUNOekIsT0FBT0MsS0FBS21DLE1BQU1DLFFBQVFqRCxFQUFPLFVBQ2pDQSxFQUFNa0QsVUFBVWpELEdBQ2hCRCxFQUFNb0MsTUFBTSxHQUFJN0UsRUFBRSxjQUFjOEUsWUFHakM5RSxFQUFFLGdCQUFnQndGLFNBQ2pCVixPQUFRLFFBQ1AsSUFBSyxXQUNOekIsT0FBT0MsS0FBS21DLE1BQU1DLFFBQVFqRCxFQUFPLFVBQ2pDQSxFQUFNa0QsVUFBVWpELEdBQ2hCRCxFQUFNb0MsTUFBTSxHQUFJN0UsRUFBRSxjQUFjOEUsZUFJakMsR0FFQ0UsRUFBTUcsV0FBV0MsU0FBUyxhQVM3QixNQVJBSixHQUFNRyxXQUFXMUQsWUFBWSxhQUFhUSxTQUFTLG1CQUNuRGpDLEdBQUUsZ0JBQWdCd0YsU0FDakJWLE9BQVEsU0FDUCxJQUFLLFdBQ056QixPQUFPQyxLQUFLbUMsTUFBTUMsUUFBUWpELEVBQU8sVUFDakNBLEVBQU1rRCxVQUFVakQsR0FDaEJELEVBQU1vQyxNQUFNLEdBQUk3RSxFQUFFLGNBQWM4RSxXQUd2QkUsR0FBTUcsV0FBV0MsU0FBUyxpQkFDcENKLEVBQU1HLFdBQVcxRCxZQUFZLGVBQWVRLFNBQVMsYUFDakRnRCxPQUFPSSxXQUFXLDRCQUE0QkMsU0FBV0wsT0FBT00sV0FBVyxJQUM5RXZGLEVBQUUsZ0JBQWdCd0YsU0FDakJWLE9BQVEsUUFDUCxJQUFLLFdBQ056QixPQUFPQyxLQUFLbUMsTUFBTUMsUUFBUWpELEVBQU8sVUFDakNBLEVBQU1rRCxVQUFVakQsR0FDaEJELEVBQU1vQyxNQUFNLEdBQUk3RSxFQUFFLGNBQWM4RSxZQUdqQzlFLEVBQUUsZ0JBQWdCd0YsU0FDakJWLE9BQVEsUUFDUCxJQUFLLFdBQ056QixPQUFPQyxLQUFLbUMsTUFBTUMsUUFBUWpELEVBQU8sVUFDakNBLEVBQU1rRCxVQUFVakQsR0FDaEJELEVBQU1vQyxNQUFNLEdBQUk3RSxFQUFFLGNBQWM4RTtBQ25IeEM5RSxFQUFFLFNBQVM0RixHQUtQNUYsRUFBRSxtQkFBbUIrQixNQUVIOEQsYUFBWSxXQUN0QjdGLEVBQUUsYUFBYWtDLFdBQVcsV0FDNUIsSUFHTmxDLEdBQUU4RixHQUFHQyxRQUNEN0QsV0FBWSxTQUFVOEQsRUFBZUMsR0FRakMsTUFOQXRGLE1BQUtzQixTQUFTLFlBQWMrRCxHQUFlRSxJQUR4QiwrRUFDMEMsV0FDekRsRyxFQUFFVyxNQUFNYyxZQUFZLFlBQWN1RSxHQUM5QmhHLEVBQUVtRyxXQUFXRixJQUNiQSxNQUdEdEYsUUFJZnlGLGNBQWdCLFdBQ1ovRixRQUFRQyxJQUFJLHdCQWtDWixLQUFLLEdBakNEK0YsS0FFUUMsU0FBVSxpQkFDVkMsU0FBUyxJQUNUQyxNQUFPLFNBR1BGLFNBQVUsa0JBQ1ZDLFNBQVMsSUFDVEMsTUFBTyxTQUdQRixTQUFVLHNCQUNWQyxTQUFTLElBQ1RDLE1BQU8sU0FHUEYsU0FBVSxrQkFDVkMsU0FBUyxJQUNUQyxNQUFPLFNBR1BGLFNBQVUsd0JBQ1ZDLFNBQVMsSUFDVEMsTUFBTyxTQUdQRixTQUFVLHFCQUNWQyxTQUFTLElBQ1RDLE1BQU8sU0FJVkMsRUFBRSxFQUFHQSxFQUFFSixFQUFleEUsT0FBTyxFQUFFNEUsSUFDcEN6RyxFQUFFcUcsRUFBZUksR0FBYSxVQUFHSCxVQUM3QkMsU0FBVUYsRUFBZUksR0FBYSxZQUtsRGIsRUFBT1EsY0FBZ0JBLGVBRXpCbkI7Q0NyRUQsU0FBU1csRUFBTzVGLEdBRWhCLEdBQ0kwRyxJQUFhLEtBQUssTUFFbEJDLEVBQU8sU0FBU0MsR0FDbkIsTUFBTyxJQUFJRCxHQUFLRSxLQUFLRCxHQUd0QkQsR0FBS0csV0FDSkMsVUFBVyxTQUFTQyxHQUVuQixNQURBQyxNQUFPdEcsS0FDQSxXQUNOcUcsRUFBU0EsRUFBT0UsTUFFaEIsS0FBSyxHQUREM0YsR0FDS2tGLEVBQUUsRUFBR0EsR0FBS0UsRUFBS3RGLEtBQUtRLE9BQU8sRUFBRzRFLElBQUssQ0FDM0MsR0FBSUUsRUFBS3RGLEtBQUtvRixHQUFHVSxVQUFVSCxFQUUxQixNQURBekYsR0FBU29GLEVBQUt0RixLQUFLb0YsR0FBR1EsS0FBS0wsV0FHM0JyRixHQUFTLEdBR1gsTUFBT0EsT0FHVDZGLFdBQVksU0FBU0MsR0FDcEJKLEtBQU90RyxJQUVQLEtBQUssR0FERDJHLEdBQWV0SCxFQUFFLGVBQWU2QixPQUMzQjRFLEVBQUcsRUFBRUEsR0FBR2EsRUFBYSxFQUFFYixJQUFLLENBQ3BDLEdBQUljLEdBQW1CdkgsRUFBRUEsRUFBRSxlQUFleUcsSUFBSXBGLEtBQUssT0FDbkROLE9BQVF5RyxLQUFLSCxHQUFjTixVQUFVUSxHQUNsQixLQUFmeEcsTUFBTW1HLFNBQ0xuRyxNQUFNMEcsT0FBTyxTQUFTLEdBQ3pCMUcsTUFBUUEsTUFBTTJHLE9BQU8sRUFBRTNHLE1BQU1jLFFBQzdCN0IsRUFBRUEsRUFBRSxlQUFleUcsSUFBSWtCLEtBQUssY0FBYzVHLFFBRTFDZixFQUFFQSxFQUFFLGVBQWV5RyxJQUFJakYsS0FBS2dHLEtBQUtILEdBQWNOLFVBQVVRLElBQW1CckYsV0FBVyxTQUV4RmxDLEVBQUVBLEVBQUUsZUFBZXlHLElBQUltQixJQUFJLGFBQWEsZUFPNUNqQixFQUFLRSxLQUFPLFNBQVNELEdBQ1RqRyxLQUNOaUcsV0FBYUEsR0FBY0YsRUFBVSxJQUczQ0MsRUFBS0UsS0FBS0MsVUFBWUgsRUFBS0csVUFDM0JsQixFQUFPZSxLQUFPZixFQUFPNEIsS0FBT2IsRUFRNUIsU0FBdUJ4RixFQUFLMEcsR0FDZjdILEVBQUU4SCxRQUFRM0csRUFBSyxjQUd4QjRHLEtBQUssU0FBUzFHLEdBQ2RoQixRQUFRQyxJQUFLLHVCQUVidUgsRUFBYXhHLEtBRWIyRyxLQUFLLFNBQVNDLEVBQU9DLEVBQVlDLEdBQ2pDOUgsUUFBUUMsSUFBSyxpQkFDYkQsUUFBUUMsSUFBSTJILEtBRVpHLE9BQU8sZUF2RUYsMEJBb0RTLFNBQVMvRyxHQUMxQnNGLEVBQUt0RixLQUFPQSxDQUNaLElBQUlnSCxHQUFXckksRUFBRSx1QkFBdUJ3QixPQUFPMEYsTUFDL0NNLE1BQUthLEdBQVVqQixXQUFXaUIsTUFxQjFCcEQsT0FBUXFEO0FDNUVWdEksRUFBRSxTQUFTNEYsR0F5QlYsUUFBUzJDLEtBc0RQLFFBQVNDLEdBQVdDLEVBQUtDLEVBQUdDLEdBQ0osa0JBQVpBLEtBQ1ZBLEVBQVUsY0FFWDNJLEVBQUUwSSxHQUFJRSxPQUFPNUksRUFBRSxjQUNieUksSUFBS0EsRUFDTkksT0FBTyxFQUNQQyxPQUFPLEtBRVJILElBR0QsUUFBU0ksR0FBV2xCLEdBQ1Esa0JBQWhCQSxLQUNUQSxFQUFlLGNBRWpCN0gsRUFBRSxtQkFBbUJtQyxPQUNyQm5DLEVBQUUsbUJBQW1CK0IsT0FDckIvQixFQUFFLGlCQUFpQmdKLE9BQU8sSUFBSSxXQUM3Qm5CLE1BeEVGLEdBQUlvQixLQUNKQyxjQUFlbEosRUFBRSwrQkFDakJBLEVBQUVrSixjQUFjeEksS0FBSyxTQUFTeUksRUFBTXBJLEdBQ25Da0ksRUFBV2pKLEVBQUVlLEdBQU9NLEtBQUssYUFBZSxLQUV6Q3VFLEVBQU93RCxPQUFPSCxXQUFhQSxDQUUzQixJQUFJSSxJQUNIQyxLQUFNLFdBQ0xsRCxnQkFDQW1ELElBQ0tDLEdBQ0pDLEVBQWEsYUFBYSxxQkFHNUJDLE1BQU8sV0FDTnRELGdCQUNLb0QsR0FDSkMsRUFBYSxhQUFhLHFCQUc1QkUsYUFBYyxXQUNiQyxzQkFBc0IsV0FDckJwQyxLQUFLYSxHQUFVakIsV0FBV2lCLE1BRzVCd0IsUUFBUyxXQUNSQyxtQkFBbUIsV0FDbEJ0QyxLQUFLYSxHQUFVakIsV0FBV2lCLE1BRzVCMEIsUUFBUyxTQUFTQyxHQUNqQkEsRUFBbUJBLElBQW9CLEVBQ25DQSxFQUNIeEIsRUFDQywrQ0FBaUR5QixFQUFTLHFDQUMxRCxPQUNBLFdBQ0N6SCxVQUFVdUMsd0JBQ1ZqRixrQkFBa0JDLDZCQUdwQnlDLFVBQVVLLGlCQUNWTCxVQUFVdUMsd0JBQ1ZqRixrQkFBa0JDLDRCQUtyQm1LLEtBQ0FDLEdBQXdCLEdBMEJ2Qm5LLEVBQUUsZUFBZUMsR0FBRyxtQkFBb0IsV0FDdENELEVBQUUseUJBQXlCaUMsU0FBUyxtQ0FFdENqQyxFQUFFLGVBQWVDLEdBQUcsbUJBQW9CLFdBQ3RDRCxFQUFFLHlCQUF5QnlCLFlBQVksbUNBR3hDekIsRUFBRSxhQUFhQyxHQUFJLFFBQVMsU0FBU0UsR0FDakNBLEVBQUVDLGdCQUNGLElBQUllLEdBQU1SLEtBQUt5SixLQUFLbEQsT0FBT21ELGNBQ3ZCQyxFQUFXdEssRUFBRVcsTUFBTVUsS0FBSyxZQUFZNkYsT0FBT21ELGFBQ25EaEMsR0FBV3JJLEVBQUUsdUJBQXVCd0IsT0FBTzBGLE9BQ3ZDbEgsRUFBRVcsTUFBTTRKLFNBQVMsYUFBYTlJLFlBQVksVUFDMUN6QixFQUFFVyxNQUFNc0IsU0FBUyxVQUVyQjVCLFFBQVFDLElBQUlrSyxPQUNLQyxLQUFiRCxHQUF1QyxPQUFiQSxJQUU3QkEsRUFBYUEsRUFBV0UsU0FBUSxJQUlqQzFLLEVBQUUsZUFBZTJLLFNBQVMsUUFHdEIzSyxFQUFFLG1CQUFtQjRLLFFBQVEsSUFBSyxXQUNyQzVLLEVBQUUsaUJBQWlCK0IsT0FDbkIvQixFQUFFLG1CQUFtQmdKLE9BQU8sS0FDeEJoSixFQUFFLGFBQWE2SyxPQUFPckYsU0FBU3NGLFVBQVUsR0FBSSxNQUNqRDlLLEVBQUVXLE1BQU1vSyxTQUUwQixLQUE5QjNCLE9BQU9ILFdBQVdxQixHQUdqQnRLLEVBQUUsaUJBQWlCZ0wsS0FBSzdKLEVBQU0sbUJBQW9CLFNBQVNJLEVBQU8wSixHQUN0RCxZQUFYQSxHQUNINUssUUFBUUMsSUFBSSxXQUFhZ0ssRUFBVyxvQkFDcEN2QixFQUFXLFdBQ1Z2QixLQUFLYSxHQUFVakIsV0FBV2lCLEdBQzFCWSxFQUFXcUIsR0FBVXRLLEVBQUV1QixHQUFRZixLQUFLLG1CQUNaMEssWUFBWixZQUFaWixFQUNBakIsRUFBaUJpQixHQUFVWSxnQkFHSCxVQUFYRCxJQUNWakwsRUFBRSxtQkFBbUIrQixPQUNyQjFCLFFBQVFDLElBQUksb0NBT2xCRCxRQUFRQyxJQUFJLFdBQWFnSyxFQUFXLG1CQUNwQ3RLLEVBQUVvSixPQUFPSCxXQUFXcUIsSUFBV2EsU0FBUyxpQkFDeENwQyxFQUFXLFdBQ1Z2QixLQUFLYSxHQUFVakIsV0FBV2lCLEdBQzFCZ0IsRUFBaUJpQixZQVF4QixRQUFTSixLQUVSLEdBQUlrQixHQUFRLENBQ1pwTCxHQUFFaUYsUUFBUWhGLEdBQUcsU0FBVSxXQUN0QixHQUFJb0wsR0FBZXJMLEVBQUVpRixRQUFRSCxTQUN6QndHLEVBQWtCdEwsRUFBRWlGLFFBQVE2RixXQUVoQ00sR0FBVUMsRUFBYSxFQUVuQkMsRUFBZ0IsSUFBSUEsRUFBZ0IsSUFLbENELEVBQWFELEdBQVNFLEVBQWlCLEVBQ3hDdEwsRUFBRSxnQkFBZ0J1TCxHQUFHLGFBQ3hCdkwsRUFBRSxnQkFBZ0JrQyxXQUFXLFlBQWEsV0FDekNsQyxFQUFFLGdCQUFnQitCLE9BQ2xCL0IsRUFBRSxhQUFhbUMsT0FBT0QsV0FBVyxjQU05QmxDLEVBQUUsZ0JBQWdCdUwsR0FBRyxhQUN4QnZMLEVBQUUsYUFBYWtDLFdBQVcsWUFBWSxXQUNyQ2xDLEVBQUUsYUFBYStCLE9BQ2YvQixFQUFFLGdCQUFnQm1DLE9BQ2xCbkMsRUFBRSxnQkFBZ0JrQyxXQUFXLGdCQUtsQ2xDLEVBQUUsZ0JBQWdCQyxHQUFHLFFBQVMsV0FDN0JELEVBQUUsYUFBYTZLLE9BQU9yRixTQUFTc0YsVUFBVSxHQUFJLE1BQU8sV0FFckQ5SyxFQUFFLGFBQWFDLEdBQUcsUUFBUyxTQUFTRSxHQUNuQ0EsRUFBRUMsZ0JBQ0YsSUFBSW9MLEdBQVdyTCxFQUFFc0wsY0FBY0MsS0FDM0JDLEVBQVkzTCxFQUFFd0wsR0FBVUksU0FBU0MsR0FDckM3TCxHQUFFLGFBQWE2SyxPQUFPckYsU0FBU3NGLFVBQVVhLEdBQVksTUFBTyxXQUs5RCxRQUFTeEIsR0FBd0IyQixHQWdDaEMsUUFBU0MsR0FBY0MsRUFBWUMsR0FDUixnQkFBZkQsS0FDVkEsRUFBY0EsT0FFVyxnQkFBZkMsS0FDVkEsRUFBY0EsR0FBZSxHQUU5QixJQUFJQyxJQUFZLENBT2hCLFFBTGEsSUFESEYsRUFBWUcsUUFBUXZGLEdBRTdCdkcsUUFBUUMsSUFBSSxxQkFBc0IyTCxFQUFhLHdFQUUvQ0MsR0FBWSxFQUVOQSxFQTdDUixHQUFJSixHQUFTQSxJQUFVLEVBQ25CTSxLQUNBQyxHQUNIQyxJQUFLLEVBQ0xDLElBQUssRUFDTEMsSUFBSyxFQUNMQyxJQUFLLEVBQ0xDLElBQUssRUFFTjFNLEdBQUVVLEtBQUsyTCxFQUFXLFNBQVNsRCxFQUFNcEksR0FDNUJBLEdBQ0hxTCxFQUFnQk8sS0FBS3hELElBR3ZCLElBQUl2QyxHQUFhNUcsRUFBRSx1QkFBdUJ3QixPQUFPMEYsTUFDN0M0RSxJQUNIdEUsS0FBS1osR0FBWVEsV0FBV1IsR0FHN0I1RyxFQUFFLHVCQUF1QkMsR0FBRyxRQUFTLFdBQ3BDLEdBQUkyTSxHQUFPUixFQUFnQkQsUUFBUXZGLEdBQVksQ0FDMUNtRixHQUFjSyxFQUFnQnhGLEtBR0RnRyxFQUFsQ0EsSUFBU1IsRUFBZ0J2SyxPQUFjLEVBQVMrSyxFQUNoRGhHLEVBQWF3RixFQUFnQlEsR0FDN0I1TSxFQUFFLHVCQUF1QndCLEtBQUtvRixHQUM5QlksS0FBS1osR0FBWVEsV0FBV1IsR0FDNUI1RyxFQUFFVyxNQUFNdUIsV0FBVyxlQXFCckIsUUFBU3FILEtBRVJ2SixFQUFFLGFBQWFDLEdBQUcsUUFBUSxTQUFTRSxHQUNsQ0EsRUFBRUMsY0FDRixJQUFJeU0sR0FBVTdNLEVBQUVXLE1BQU1VLEtBQUssUUFBUTZGLE9BQy9CL0YsRUFBTThELE9BQU82SCxTQUFTMUMsSUFDdEJqSixHQUFJc0csT0FBTyxlQUFpQixFQUMvQnRHLEVBQU1BLEVBQUk0TCxRQUFRLGFBQWEscUJBRS9CNUwsR0FBWSxvQkFFUG5CLEVBQUUsbUJBQW1CNEssUUFBUSxJQUFLLFdBQ2pDNUssRUFBRSxpQkFBaUIrQixPQUN2Qi9CLEVBQUUsbUJBQW1CbUMsT0FDckJuQyxFQUFFLHlCQUF5QnlCLFlBQVksVUFDdkN6QixFQUFFLG1EQUFtRGlDLFNBQVMsVUFFdEIsS0FBcENtSCxPQUFPSCxXQUF5QixhQUMvQmpKLEVBQUUsaUJBQWlCZ0wsS0FBSzdKLEVBQU0sbUJBQW9CLFdBQ3JEbkIsRUFBRSxtQkFBbUIrQixPQUNqQi9CLEVBQUUsaUJBQWlCZ0osT0FBTyxLQUMxQmtCLElBQ0FDLElBQ0FQLHNCQUFzQixXQUN6QnBDLEtBQUthLEdBQVVqQixXQUFXaUIsR0FDdEJySSxFQUFFLGdCQUFnQlUsS0FBSyxTQUFTK0YsR0FDbkMsT0FBNkJnRSxLQUF6QnpLLEVBQUVXLE1BQU1VLEtBQUssU0FDUnJCLEVBQUVXLE1BQU1VLEtBQUssUUFBUWdKLGNBQWNuRCxTQUFXMkYsRUFFakQsV0FEQTdNLEdBQUVXLE1BQU0rRSxRQUFRLGdCQVF6QnJGLFFBQVFDLElBQUksdURBQ1pOLEVBQUVvSixPQUFPSCxXQUF5QixjQUFHa0MsU0FBUyxpQkFDOUNuTCxFQUFFLG1CQUFtQitCLE9BQ3JCL0IsRUFBRSxpQkFBaUJnSixPQUFPLEtBQzFCa0IsSUFDQUMsSUFDQVAsc0JBQXNCLFdBQ3JCcEMsS0FBS2EsR0FBVWpCLFdBQVdpQixHQUMxQnJJLEVBQUUsZ0JBQWdCVSxLQUFLLFNBQVMrRixHQUMvQixPQUE2QmdFLEtBQXpCekssRUFBRVcsTUFBTVUsS0FBSyxTQUNackIsRUFBRVcsTUFBTVUsS0FBSyxRQUFRZ0osY0FBY25ELFNBQVcyRixFQUVqRCxXQURBN00sR0FBRVcsTUFBTStFLFFBQVEsa0JBVzFCLFFBQVMrRCxHQUFhdUQsRUFBZUMsR0FHcEMsR0FGQUQsRUFBaUJBLEdBQWtCLEdBQ25DQyxFQUFlQSxHQUFnQixJQUMxQnpELEVBQ0UsQ0FBQSxHQUFJZ0IsR0FBYSxHQUFJMEMsYUFBWUMsWUFBWUMsb0JBQXFCQyxZQUFhLFVBQVdDLFNBQVUsU0FDcEYsSUFBSUosYUFBWUssT0FBT1AsZUFBZ0JBLElBQ2xEUSxTQUFTUCxHQUFlUSxFQUFHLE1BQU9DLEtBQU1DLE9BQU9DLFdBRS9DQyxNQUFNckQsSUF2VW5CLEdBQUlBLEdBQ0FuQyxFQUFTLEdBR1Q0QixFQUFTLHlDQUNickUsR0FBT3dELFNBWVAsSUFBSUksR0FWSixXQUNJLEdBQUlzRSxJQUFVLFVBQVcsUUFBUyxTQUFVLE9BQVEsYUFDcEQsS0FBSXJILElBQUtxSCxHQUNMLEdBQUlDLFVBQVVDLFVBQVUzRCxjQUFjNUMsT0FBT3FHLEVBQU9ySCxLQUFLLE9BQTRCZ0UsS0FBckJ4RixPQUFPZ0osWUFDbkUsT0FBTyxDQUdmLFFBQU8sSUFJWHJJLEdBQU93RCxPQUFPSSxhQUFlQSxHQUVWLElBQWZBLEdBQ0h4SixFQUFFLFFBQVFpQyxTQUFTLFlBc1RwQmpDLEVBQUVpRixRQUFRK0YsS0FBSyxXQUNkekIsSUFDQWhCLElBQ0EyQixJQUNBQyxJQUNBVixFQUFhLGFBQWEsc0JBRzNCN0QsRUFBT3dELE9BQU9iLFlBQWNBLEVBQzVCM0MsRUFBT3dELE9BQU9jLDBCQUE0QkEsRUFDMUN0RSxFQUFPd0QsT0FBT2Usd0JBQTBCQSxFQUN4Q3ZFLEVBQU93RCxPQUFPSyxhQUFlQSxHQUU1QnhFO0FDelZELFFBQVMyRSx1QkFBc0IvQixHQUNLQSxFQUFiLGtCQUFmQSxHQUEyQ0EsRUFBOEIsWUFFaEYsSUFBSXFHLEdBQWMsQ0FFbEJsTyxHQUFFLGtDQUFrQytCLE9BQ3BDL0IsRUFBRSxrQ0FBa0NtQyxPQUNwQ25DLEVBQUUsb0JBQW9CaUMsU0FBUyxhQUUvQmpDLEVBQUUsZUFBZW1PLGVBQ2QvRixPQUFRLFNBQVVnRyxHQUNqQi9OLFFBQVFDLElBQUksMENBRWYrTiwwQkFBMEIsU0FDdkJDLGFBQWMsYUFDZEMsUUFBUyxLQUdUQyxtQkFBbUIsb0JBQW9CLGlDQUN2Q0MscUJBQXFCLFNBRXhCek8sRUFBRSxrQ0FBa0M0SyxRQUFRLEtBQ3pDNUssRUFBRSxnQ0FBZ0N3QixLQUFLLGlCQUN2Q3hCLEVBQUUsbUJBQW1CNEgsSUFBSSxtQkFBbUIsU0FDNUM1SCxFQUFFLGVBQWVxQyxNQUFNLEtBQU1DLFFBQVEsS0FDckN0QyxFQUFFLG9CQUFvQnlCLFlBQVksYUFFbENvRyxNQUdERSxLQUFNLFdBQ0wxSCxRQUFRQyxJQUFJLHlEQUdiMEgsS0FBTSxXQUNMM0gsUUFBUUMsSUFBSzROLEVBQWMsMkVBQzNCbE8sRUFBRSxlQUFlcUMsTUFBTSxLQUFNQyxRQUFRLE9BRXhDb00sU0FBVSxTQUFVTixFQUFVTyxHQUV2QkEsRUFBTUMsVUFDVDVPLEVBQUUyTyxFQUFNRSxLQUFLdEUsU0FBUyx1QkFBdUJ4SSxPQUM3Qy9CLEVBQUUyTyxFQUFNRSxLQUFLdEUsU0FBUyx1QkFBdUJySSxXQUFXLFlBQVlDLE9BQ3ZFbkMsRUFBRSxtQkFBbUI4TyxNQUFPVixFQUFTVyxnQkFBZ0JYLEVBQVNZLE9BQU9uTixPQUFRLElBQU0sT0FFbkZxTSxJQUNBbE8sRUFBRTJPLEVBQU1FLEtBQUtJLFNBQVNsRSxZQU16QixRQUFTakIsb0JBQW1CakMsR0FDUUEsRUFBYixrQkFBZkEsR0FBMkNBLEVBQThCLFlBRWhGLElBQUlxRyxHQUFjLENBQ2xCbE8sR0FBRSxvQ0FBb0NpQyxTQUFTLGFBRS9DakMsRUFBRSxZQUFZbU8sZUFDWC9GLE9BQVEsU0FBVWdHLEdBQ2hCL04sUUFBUUMsSUFBSSx1Q0FFWitOLDBCQUEwQixpQkFDMUJDLGFBQWMscUJBQ2RDLFFBQVMsS0FHVEMsbUJBQW1CLG9CQUFvQix1Q0FDdkNDLHFCQUFxQixpQkFDckJ6TyxFQUFFLG9DQUFvQ3lCLFlBQVksYUFFcERvRyxNQUdDRSxLQUFNLFdBQ0wxSCxRQUFRQyxJQUFJLHNEQUdiMEgsS0FBTSxXQUNMM0gsUUFBUUMsSUFBSzROLEVBQWMsMEVBRTlCUSxTQUFVLFNBQVVOLEVBQVVPLEdBRXRCQSxFQUFNQyxXQUNiVixJQUNBbE8sRUFBRTJPLEVBQU1FLEtBQUtJLFNBQVNsRSxZQU0xQixRQUFTc0QsMkJBQTBCM0YsRUFBR3dHLEdBQ3JDbFAsRUFBRTBJLEdBQUl5RyxRQUFRRCxHQUdmLFFBQVNWLG9CQUFtQlksRUFBWUMsR0FFdkMsR0FBSUMsR0FBaUJ0UCxFQUFFcVAsR0FDbkJFLEVBQVd2UCxFQUFFb1AsR0FDYkksSUFFSkQsR0FBU3BLLFdBQVc0RixTQUVwQnVFLEVBQWU1TyxLQUFLLFdBQ25CLEdBQUkrTyxHQUFhOU8sS0FDYitPLEVBQU8xUCxFQUFFVyxNQUFNVSxLQUFLLGlCQUVwQnFPLElBQ0hBLEVBQUtDLE1BQU0sS0FBS0MsUUFBUSxTQUFTQyxHQUNoQ0EsRUFBVUEsRUFBUTNJLE9BQ0csTUFBakJzSSxFQUFPSyxLQUNWTCxFQUFPSyxPQUVSTCxFQUFPSyxHQUFTbEQsS0FBSzhDLE9BS3hCRixFQUFTdE4sU0FBUyxrQkFDbEJqQyxFQUFFLFNBQVNtTCxTQUFTb0UsR0FFcEJ2UCxFQUFFLFFBQ0R3QixLQUFNLE1BQ05zTyxNQUFPLHVCQUNQQyxNQUFPLFdBQ04vUCxFQUFFVyxNQUFNc0IsU0FBUyxZQUFZZ04sU0FBUzFFLFdBQVdwRixXQUFXMUQsWUFBWSxlQUV2RTBKLFNBQVNvRSxFQUFTcEssV0FBVzZLLEdBQUcsSUFBSXJJLEtBQUssWUFBWSxPQUV4RDNILEVBQUUsdUVBQXVFbUwsU0FBU29FLEdBRWxGdlAsRUFBRVUsS0FBSzhPLEVBQVEsU0FBU0ssR0FDdkI3UCxFQUFFLFNBQVNtTCxTQUFTb0UsR0FFcEJ2UCxFQUFFLFFBQ0R3QixLQUFNcU8sRUFDTkMsTUFBTyxjQUNQQyxNQUFPLFdBQ04vUCxFQUFFVyxNQUFNc0IsU0FBUyxZQUFZZ04sU0FBUzFFLFdBQVdwRixXQUFXMUQsWUFBWSxlQUV2RTBKLFNBQVNvRSxFQUFTcEssV0FBVzhLLFFBQVF0SSxLQUFLLFlBQVlrSSxLQUszRCxRQUFTcEIsc0JBQXFCeUIsR0FDMUJsUSxFQUFFLG1CQUFtQkMsR0FBSSxRQUFTLGVBQWdCLFdBQ2pELEdBQUlrUSxHQUFjblEsRUFBRVcsTUFBTVUsS0FBSyxPQUkzQjhPLEtBQWdCblEsRUFBRUEsRUFBRSxnQkFBZ0IsSUFBSXFCLEtBQUssUUFDaERyQixFQUFFa1EsR0FBUWYsU0FDVmlCLE9BQVEsV0FDUCxPQUFPLEtBSVZwUSxFQUFFa1EsR0FBUWYsU0FDUGlCLE9BQVEsV0FHUCxNQUZBQyxTQUFTclEsRUFBRVcsTUFBTVUsS0FBSyxpQkFDdEJpUCxNQUFRRCxRQUFRNUksT0FBTzBJLEdBQ25CRyxPQUFRLE9BVW5CdFEsRUFBRWtRLEVBQVMsZUFBZWpRLEdBQUksUUFBUyxTQUFTRSxHQUMvQ0EsRUFBRUMsaUJBQ0VKLEVBQUVXLE1BQU15RSxTQUFTLHNCQUNwQnBGLEVBQUVXLE1BQU1jLFlBQVksdUJBRXBCekIsRUFBRWtRLEVBQVMsZUFBZXpPLFlBQVksc0JBQ3RDekIsRUFBRVcsTUFBTXNCLFNBQVMsdUJBRWxCakMsRUFBRWtRLEdBQVFmLFFBQVEiLCJmaWxlIjoic2NyaXB0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBDb250YWN0Rm9ybU1vZHVsZSA9IChmdW5jdGlvbigpIHtcblxuICAgIHZhciBpbml0Q29udGFjdEZvcm1MaXN0ZW5lciA9IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgJChcIiNjb250YWN0LWZvcm0gLmJ0bi1zaXRlXCIpLm9uKCBcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcImNsaWNrIGV2ZW50OiAuY29udGFjdC1zdWJtaXQgYnV0dG9uXCIpO1xuICAgICAgICAgICAgJCggXCIjY29udGFjdC1mb3JtXCIgKS5zdWJtaXQoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJChcIiNjb250YWN0LWZvcm1cIikuc3VibWl0KGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJGb3JtIHN1Ym1pdHRlZCBsaXN0ZW5lciBjYWxsZWRcIik7XG5cbiAgICAgICAgICAgIHZhciBpbnB1dEVsZW1lbnRzID0gJChcIiNjb250YWN0LWZvcm1cIikuZmluZCgnaW5wdXQsIHRleHRhcmVhLCBzZWxlY3QnKTtcbiAgICAgICAgICAgIHZhciBmb3JtVmFsdWVzID0ge307XG5cbiAgICAgICAgICAgIGlucHV0RWxlbWVudHMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnR5cGUgPT0gXCJjaGVja2JveFwiIHx8IHRoaXMudHlwZSA9PSBcInJhZGlvXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtVmFsdWVzW3RoaXMubmFtZV0gPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtVmFsdWVzW3RoaXMubmFtZV0gPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZm9ybVZhbHVlcyA6IFwiICsgSlNPTi5zdHJpbmdpZnkoZm9ybVZhbHVlcykpO1xuXG4gICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIHVybDogXCJhc3NldHMvcGhwL2hhbmRsZWFqYXhmb3JtLnBocFwiLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgZGF0YTogZm9ybVZhbHVlcyxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXN1bHQpIHtcblxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFKQVggcG9zdCByZXN1bHQgcmVzdWx0IDogXCIgKyBKU09OLnN0cmluZ2lmeShyZXN1bHQpKTtcblxuICAgICAgICAgICAgICAgICAgICAkKCdkaXZbZGF0YS1lcnJvci1pZF0nKS50ZXh0KFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAkKCcjY29udGFjdC1mb3JtIGlucHV0LCAjY29udGFjdC1mb3JtIHRleHRhcmVhJykucmVtb3ZlQ2xhc3MoJ2Zvcm0tZXJyb3InKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnI3NlbmQtcmVzdWx0JykudGV4dChcIlwiKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMocmVzdWx0LmVycm9ycykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5wdXROYW1lIGluIHJlc3VsdC5lcnJvcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yIGluIFwiICsgaW5wdXROYW1lICsgXCI6IFwiICsgcmVzdWx0LmVycm9yc1tpbnB1dE5hbWVdKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJ2RpdltkYXRhLWVycm9yLWlkPVwiJyArIGlucHV0TmFtZSArICdcIl0nKS50ZXh0KHJlc3VsdC5lcnJvcnNbaW5wdXROYW1lXSkuaGlkZSgpLnNsaWRlRG93bigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJypbbmFtZT1cIicgKyBpbnB1dE5hbWUgKyAnXCJdJykuYWRkQ2xhc3MoJ2Zvcm0tZXJyb3InKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcqW25hbWU9XCInICsgaW5wdXROYW1lICsgJ1wiXScpLmFuaW1hdGVDc3MoJ3NoYWtlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQWxsIHZhbGlkYXRpb24gcGFzc2VkIHN1Y2Nlc2Z1bGx5IVwiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNzZW5kLXJlc3VsdFwiKS50ZXh0KFwiVGhhbmsgeW91LiBZb3VyIG1lc3NhZ2UgaGFzIGJlZW4gc2VudC5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiI3NlbmQtcmVzdWx0XCIpLnJlbW92ZUNsYXNzKCdhbGVydC1kYW5nZXInKS5hZGRDbGFzcygnYWxlcnQtc3VjY2VzcycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiI3NlbmQtcmVzdWx0XCIpLnNob3coKS5hbmltYXRlQ3NzKCdib3VuY2VJbicsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnaW5wdXQnKS52YWwoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgndGV4dGFyZWEnKS52YWwoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNzZW5kLXJlc3VsdFwiKS5kZWxheSg1MDAwKS5zbGlkZVVwKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAkKFwiI3NlbmQtcmVzdWx0XCIpLnJlbW92ZUNsYXNzKCdhbGVydC1zdWNjZXNzJyk7XG4gICAgICAgICAgICAgICAgICAgICQoXCIjc2VuZC1yZXN1bHRcIikuYWRkQ2xhc3MoJ2FsZXJ0LWRhbmdlcicpO1xuICAgICAgICAgICAgICAgICAgICAkKFwiI3NlbmQtcmVzdWx0XCIpLnRleHQoXCJTb3JyeS4uLiBZb3VyIG1lc3NhZ2UgY291bGQgbm90IGhhdmUgYmVlbiBkZWxpdmVyZWQuXCIpO1xuICAgICAgICAgICAgICAgICAgICAkKFwiI3NlbmQtcmVzdWx0XCIpLnNsaWRlRG93bigpO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTsgIC8vIHRoZSBlbmQgb2YgYWpheCBjYWxsIHRvIHBvc3QgZm9ybVZhbHVlc1xuICAgICAgICB9KTsgLy8gdGhlIGVuZCBvZiBmb3JtIHN1Ym1pdCBmdW5jdGlvblxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGluaXRDb250YWN0Rm9ybUxpc3RlbmVyOiBpbml0Q29udGFjdEZvcm1MaXN0ZW5lclxuICAgIH07XG5cbn0pKCk7XG4iLCIvLyAtLS0tLS0tLS0tIEdPT0dMRSBNQVAgLS0tLS0tLS0tLVxudmFyIE1hcE1vZHVsZSA9IChmdW5jdGlvbigpIHtcblxuICB2YXIgbXlNYXA7XG4gIHZhciBteVBvc2l0aW9uID0ge2xhdDogNTAuMDQ4ODIyLCBsbmc6IDE1LjIwMDI0Mn07XG5cbiAgdmFyIGluaXRDb250YWN0TWFwID0gZnVuY3Rpb24oKXtcblxuICAgICAgLy8gU3BlY2lmeSBmZWF0dXJlcyBhbmQgZWxlbWVudHMgdG8gZGVmaW5lIHN0eWxlcy5cbiAgICAgIHZhciBzdHlsZUFycmF5ID0gW1xuICAgICAgICB7XG4gICAgICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcImFsbFwiLFxuICAgICAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJhbGxcIixcbiAgICAgICAgICBcInN0eWxlcnNcIjogW1xuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBcInNhdHVyYXRpb25cIjogLTEwMFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBcImdhbW1hXCI6IDAuNVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgXVxuICAgICAgICB9XG4gICAgICBdO1xuXG4gICAgICAvLyBDcmVhdGUgYSBtYXAgb2JqZWN0IGFuZCBzcGVjaWZ5IHRoZSBET00gZWxlbWVudCBmb3IgZGlzcGxheS5cbiAgICAgIHZhciBtYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udGFjdC1tYXBcIiksIHtcbiAgICAgICAgICBjZW50ZXI6IG15UG9zaXRpb24sXG4gICAgICAgICAgc2Nyb2xsd2hlZWw6IGZhbHNlLFxuICAgICAgICAgIHN0cmVldFZpZXdDb250cm9sOiB0cnVlLFxuICAgICAgICAgIHN0cmVldFZpZXdDb250cm9sOiB7XG4gICAgICAgICAgICBwb3NpdGlvbjogZ29vZ2xlLm1hcHMuQ29udHJvbFBvc2l0aW9uLkxFRlRfQk9UVE9NXG4gICAgICAgICAgfSxcbiAgICAgICAgICBtYXBUeXBlQ29udHJvbDogdHJ1ZSxcbiAgICAgICAgICBtYXBUeXBlQ29udHJvbE9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgcG9zaXRpb246IGdvb2dsZS5tYXBzLkNvbnRyb2xQb3NpdGlvbi5CT1RUT01fTEVGVFxuICAgICAgICAgIH0sXG4gICAgICAgICAgem9vbUNvbnRyb2w6IHRydWUsXG4gICAgICAgICAgem9vbUNvbnRyb2xPcHRpb25zOiB7XG4gICAgICAgICAgICBwb3NpdGlvbjogZ29vZ2xlLm1hcHMuQ29udHJvbFBvc2l0aW9uLkxFRlRfQ0VOVEVSXG4gICAgICAgICAgfSxcbiAgICAgICAgICAvLyBBcHBseSB0aGUgbWFwIHN0eWxlIGFycmF5IHRvIHRoZSBtYXAuXG4gICAgICAgICAgc3R5bGVzOiBzdHlsZUFycmF5LFxuICAgICAgICAgIHpvb206IDhcbiAgICAgIH0pO1xuXG4gICAgICBteU1hcCA9IG1hcDtcbiAgICAgIC8vIENyZWF0ZSBhIG1hcmtlciBhbmQgc2V0IGl0cyBwb3NpdGlvbi5cblxuICAgICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xuICAgICAgICBtYXA6IG1hcCxcbiAgICAgICAgcG9zaXRpb246IG15UG9zaXRpb24sXG4gICAgICAgIHRpdGxlOiAnS2FtZW5pY3R2w60gRXJiZW4nLFxuICAgICAgICBpY29uOiB7XG4gICAgICAgICAgdXJsOiBcImFzc2V0cy9pbWFnZXMvSUVfbG9nb19yb3VuZGVkX3BvaW50ZXIucG5nXCIsXG4gICAgICAgICAgc2NhbGVkU2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoMTUwLCAxNTApXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBteU1hcC5wYW5CeSgwLCgtJChcIm5hdi5uYXZiYXJcIikuaGVpZ2h0KCkpKTtcblxuICAgIH1cblxuICAgIHZhciBwbGFjZUNvbnRhY3RMaXN0ZW5lcnMgPSBmdW5jdGlvbigpe1xuICBcdFx0JChcIi5idG4tbWFwXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSl7XG4gIFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcbiAgXHRcdFx0dmFyICR0aGlzPSQodGhpcyk7XG5cbiAgXHRcdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvcmllbnRhdGlvbmNoYW5nZVwiLCBmdW5jdGlvbigpIHtcbiAgXHRcdFx0XHRpZiAoJHRoaXMuY2hpbGRyZW4oKS5oYXNDbGFzcyhcImZhLWV4cGFuZFwiKSkge1xuICBcdFx0XHRcdFx0aWYgKHdpbmRvdy5tYXRjaE1lZGlhKFwiKG9yaWVudGF0aW9uOiBsYW5kc2NhcGUpXCIpLm1hdGNoZXMgJiYgd2luZG93LmlubmVyV2lkdGg8NzY3KSB7XG4gIFx0XHRcdFx0XHRcdCQoXCIjY29udGFjdC1tYXBcIikuYW5pbWF0ZSh7XG4gIFx0XHRcdFx0XHRcdFx0aGVpZ2h0OiBcIjc1dmhcIlxuICBcdFx0XHRcdFx0XHR9LDUwMCwgZnVuY3Rpb24oKXtcbiAgXHRcdFx0XHRcdFx0XHRnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKG15TWFwLCBcInJlc2l6ZVwiKTtcbiAgXHRcdFx0XHRcdFx0XHRteU1hcC5zZXRDZW50ZXIobXlQb3NpdGlvbik7XG4gIFx0XHRcdFx0XHRcdFx0bXlNYXAucGFuQnkoMCwoLSQoXCJuYXYubmF2YmFyXCIpLmhlaWdodCgpKSk7XG4gIFx0XHRcdFx0XHRcdH0pO1xuICBcdFx0XHRcdFx0fSBlbHNlIHtcbiAgXHRcdFx0XHRcdFx0JChcIiNjb250YWN0LW1hcFwiKS5hbmltYXRlKHtcbiAgXHRcdFx0XHRcdFx0XHRoZWlnaHQ6IFwiNTB2aFwiXG4gIFx0XHRcdFx0XHRcdH0sNTAwLCBmdW5jdGlvbigpe1xuICBcdFx0XHRcdFx0XHRcdGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIobXlNYXAsIFwicmVzaXplXCIpO1xuICBcdFx0XHRcdFx0XHRcdG15TWFwLnNldENlbnRlcihteVBvc2l0aW9uKTtcbiAgXHRcdFx0XHRcdFx0XHRteU1hcC5wYW5CeSgwLCgtJChcIm5hdi5uYXZiYXJcIikuaGVpZ2h0KCkpKTtcbiAgXHRcdFx0XHRcdFx0fSk7XG4gIFx0XHRcdFx0XHR9XG4gIFx0XHRcdFx0fVxuICBcdFx0XHR9LCBmYWxzZSk7XG5cbiAgXHRcdFx0aWYgKCR0aGlzLmNoaWxkcmVuKCkuaGFzQ2xhc3MoXCJmYS1leHBhbmRcIikpIHtcbiAgXHRcdFx0XHQkdGhpcy5jaGlsZHJlbigpLnJlbW92ZUNsYXNzKFwiZmEtZXhwYW5kXCIpLmFkZENsYXNzKFwiZmEtY29tcHJlc3NcIik7XG4gIFx0XHRcdFx0JChcIiNjb250YWN0LW1hcFwiKS5hbmltYXRlKHtcbiAgXHRcdFx0XHRcdGhlaWdodDogXCIxMDB2aFwiXG4gIFx0XHRcdFx0fSw1MDAsIGZ1bmN0aW9uKCl7XG4gIFx0XHRcdFx0XHRnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKG15TWFwLCBcInJlc2l6ZVwiKTtcbiAgXHRcdFx0XHRcdG15TWFwLnNldENlbnRlcihteVBvc2l0aW9uKTtcbiAgXHRcdFx0XHRcdG15TWFwLnBhbkJ5KDAsKC0kKFwibmF2Lm5hdmJhclwiKS5oZWlnaHQoKSkpO1xuICBcdFx0XHRcdH0pO1xuICBcdFx0XHRcdHJldHVybjtcbiAgXHRcdFx0fSBlbHNlIGlmICgkdGhpcy5jaGlsZHJlbigpLmhhc0NsYXNzKFwiZmEtY29tcHJlc3NcIikpIHtcbiAgXHRcdFx0XHQkdGhpcy5jaGlsZHJlbigpLnJlbW92ZUNsYXNzKFwiZmEtY29tcHJlc3NcIikuYWRkQ2xhc3MoXCJmYS1leHBhbmRcIik7XG4gIFx0XHRcdFx0aWYgKHdpbmRvdy5tYXRjaE1lZGlhKFwiKG9yaWVudGF0aW9uOiBsYW5kc2NhcGUpXCIpLm1hdGNoZXMgJiYgd2luZG93LmlubmVyV2lkdGg8NzY3KSB7XG4gIFx0XHRcdFx0XHQkKFwiI2NvbnRhY3QtbWFwXCIpLmFuaW1hdGUoe1xuICBcdFx0XHRcdFx0XHRoZWlnaHQ6IFwiNzV2aFwiXG4gIFx0XHRcdFx0XHR9LDUwMCwgZnVuY3Rpb24oKXtcbiAgXHRcdFx0XHRcdFx0Z29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcihteU1hcCwgXCJyZXNpemVcIik7XG4gIFx0XHRcdFx0XHRcdG15TWFwLnNldENlbnRlcihteVBvc2l0aW9uKTtcbiAgXHRcdFx0XHRcdFx0bXlNYXAucGFuQnkoMCwoLSQoXCJuYXYubmF2YmFyXCIpLmhlaWdodCgpKSk7XG4gIFx0XHRcdFx0XHR9KTtcbiAgXHRcdFx0XHR9IGVsc2Uge1xuICBcdFx0XHRcdFx0JChcIiNjb250YWN0LW1hcFwiKS5hbmltYXRlKHtcbiAgXHRcdFx0XHRcdFx0aGVpZ2h0OiBcIjUwdmhcIlxuICBcdFx0XHRcdFx0fSw1MDAsIGZ1bmN0aW9uKCl7XG4gIFx0XHRcdFx0XHRcdGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIobXlNYXAsIFwicmVzaXplXCIpO1xuICBcdFx0XHRcdFx0XHRteU1hcC5zZXRDZW50ZXIobXlQb3NpdGlvbik7XG4gIFx0XHRcdFx0XHRcdG15TWFwLnBhbkJ5KDAsKC0kKFwibmF2Lm5hdmJhclwiKS5oZWlnaHQoKSkpO1xuICBcdFx0XHRcdFx0fSk7XG4gIFx0XHRcdFx0fVxuICBcdFx0XHR9XG4gIFx0XHR9KVxuICBcdH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGluaXRDb250YWN0TWFwOmluaXRDb250YWN0TWFwLFxuICAgICAgICBwbGFjZUNvbnRhY3RMaXN0ZW5lcnM6cGxhY2VDb250YWN0TGlzdGVuZXJzXG4gICAgfVxuXG59KSgpO1xuIiwiJChmdW5jdGlvbihnbG9iYWwpe1xuICAgIFxuICAgIC8vIHZhciBzY2VuZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXJhbGxheC1zY2VuZScpO1xuICAgIC8vIHZhciBwYXJhbGxheCA9IG5ldyBQYXJhbGxheChzY2VuZSk7XG5cbiAgICAkKCcubG9hZGVyLXdyYXBwZXInKS5oaWRlKCk7XG4gICAgXG4gICAgdmFyIGJ0bkludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICQoXCIuYnRuLWRvd25cIikuYW5pbWF0ZUNzcyhcImJvdW5jZVwiKTtcbiAgICAgICAgfSwzMDAwKTtcblxuICAgIC8vIC0tLS0tLS0tLS0gSlFVRVJZIEFOSU1BVEUgRVhURU5TSU9OIC0tLS0tLS0tLS1cbiAgICAkLmZuLmV4dGVuZCh7XG4gICAgICAgIGFuaW1hdGVDc3M6IGZ1bmN0aW9uIChhbmltYXRpb25OYW1lLCBjYWxsQmFja0Z1bmMpIHtcbiAgICAgICAgICAgIHZhciBhbmltYXRpb25FbmQgPSAnd2Via2l0QW5pbWF0aW9uRW5kIG1vekFuaW1hdGlvbkVuZCBNU0FuaW1hdGlvbkVuZCBvYW5pbWF0aW9uZW5kIGFuaW1hdGlvbmVuZCc7XG4gICAgICAgICAgICB0aGlzLmFkZENsYXNzKCdhbmltYXRlZCAnICsgYW5pbWF0aW9uTmFtZSkub25lKGFuaW1hdGlvbkVuZCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnYW5pbWF0ZWQgJyArIGFuaW1hdGlvbk5hbWUpO1xuICAgICAgICAgICAgICAgIGlmICgkLmlzRnVuY3Rpb24oY2FsbEJhY2tGdW5jKSkge1xuICAgICAgICAgICAgICAgICAgICBjYWxsQmFja0Z1bmMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBpbml0Q2Fyb3VzZWxzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY2Fyb3VzZWxzIGluaXRpYWxpemVkXCIpO1xuICAgICAgICB2YXIgY2Fyb3VzZWxzU2V0dXAgPSBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjYXJvdXNlbDogXCIjbWFpbi1jYXJvdXNlbFwiLFxuICAgICAgICAgICAgICAgICAgICBpbnRlcnZhbDo3MDAwLFxuICAgICAgICAgICAgICAgICAgICBwYXVzZTogXCJub25lXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY2Fyb3VzZWw6IFwiI2Fib3V0LWNhcm91c2VsXCIsXG4gICAgICAgICAgICAgICAgICAgIGludGVydmFsOjUwMDAsXG4gICAgICAgICAgICAgICAgICAgIHBhdXNlOiBcIm5vbmVcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjYXJvdXNlbDogXCIjY2Fyb3VzZWxUb21ic3RvbmVzXCIsXG4gICAgICAgICAgICAgICAgICAgIGludGVydmFsOjMwMDAsXG4gICAgICAgICAgICAgICAgICAgIHBhdXNlOiBcIm5vbmVcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjYXJvdXNlbDogXCIjY2Fyb3VzZWxHYXJkZW5cIixcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJ2YWw6MzAwMCxcbiAgICAgICAgICAgICAgICAgICAgcGF1c2U6IFwibm9uZVwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNhcm91c2VsOiBcIiNjYXJvdXNlbFJlc3RvcmF0aW9uc1wiLFxuICAgICAgICAgICAgICAgICAgICBpbnRlcnZhbDozMDAwLFxuICAgICAgICAgICAgICAgICAgICBwYXVzZTogXCJub25lXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY2Fyb3VzZWw6IFwiI0Nhcm91c2VsTW9udW1lbnRzXCIsXG4gICAgICAgICAgICAgICAgICAgIGludGVydmFsOjMwMDAsXG4gICAgICAgICAgICAgICAgICAgIHBhdXNlOiBcIm5vbmVcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgICAvLyAtLS0tLS0tLS0tIENBUk9VU0VMUyBTRVRVUCAtLS0tLS0tLS0tXG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxjYXJvdXNlbHNTZXR1cC5sZW5ndGgtMTtpKyspIHtcbiAgICAgICAgICAgICQoY2Fyb3VzZWxzU2V0dXBbaV1bJ2Nhcm91c2VsJ10pLmNhcm91c2VsKHtcbiAgICAgICAgICAgICAgICBpbnRlcnZhbDogY2Fyb3VzZWxzU2V0dXBbaV1bJ2ludGVydmFsJ11cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGdsb2JhbC5pbml0Q2Fyb3VzZWxzID0gaW5pdENhcm91c2VscztcblxufSh3aW5kb3cpKTtcblxuIiwiKGZ1bmN0aW9uKGdsb2JhbCwkKXtcblxuXHR2YXIgVVJMID0nLi9hc3NldHMvZGF0YS9sYW5nLmpzb24nO1xuXHR2YXIgc2l0ZUxhbmdzID0gW1wiY3pcIixcImVuXCJdO1xuXG5cdHZhciBMYW5nID0gZnVuY3Rpb24oYWN0aXZlTGFuZyl7XG5cdFx0cmV0dXJuIG5ldyBMYW5nLmluaXQoYWN0aXZlTGFuZyk7XG5cdH1cblxuXHRMYW5nLnByb3RvdHlwZSA9IHtcblx0XHRnZXRLZXlWYWw6IGZ1bmN0aW9uKGtleVZhbCl7XG5cdFx0XHRzZWxmID0gdGhpcztcblx0XHRcdHJldHVybiBmdW5jdGlvbigpe1xuXHRcdFx0XHRrZXlWYWwgPSBrZXlWYWwudHJpbSgpO1xuXHRcdFx0XHR2YXIgcmVzdWx0O1xuXHRcdFx0XHRmb3IgKHZhciBpPTA7IGkgPD0gTGFuZy5kYXRhLmxlbmd0aC0xOyBpKyspIHtcblx0XHRcdFx0XHRpZiAoTGFuZy5kYXRhW2ldLmRhdGF0YWc9PT1rZXlWYWwpIHtcblx0XHRcdFx0XHRcdHJlc3VsdCA9IExhbmcuZGF0YVtpXVtzZWxmLmFjdGl2ZUxhbmddO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmVzdWx0ID0gXCJcIjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHRcdH0oKTtcblx0XHR9LFxuXHRcdHN3aXRjaExhbmc6IGZ1bmN0aW9uKHN3aXRjaFRvTGFuZyl7XG5cdFx0XHRzZWxmID0gdGhpcztcblx0XHRcdHZhciBudW1PZkxhbmdFbHMgPSAkKFwiW2RhdGEtbGFuZ11cIikubGVuZ3RoO1xuXHRcdFx0Zm9yICh2YXIgaSA9MDtpPD1udW1PZkxhbmdFbHMtMTtpKyspIHtcblx0XHRcdFx0dmFyIHJldHJpZXZlZERhdGFUYWcgPSAkKCQoXCJbZGF0YS1sYW5nXVwiKVtpXSkuZGF0YSgnbGFuZycpO1xuXHRcdFx0XHR2YWx1ZSA9IExORyQoc3dpdGNoVG9MYW5nKS5nZXRLZXlWYWwocmV0cmlldmVkRGF0YVRhZyk7XG5cdFx0XHRcdGlmICh2YWx1ZS50cmltKCkhPT1cIlwiKSB7XG5cdFx0XHRcdFx0aWYgKHZhbHVlLnNlYXJjaChcIjxwaD5cIik+LTEpIHtcblx0XHRcdFx0XHRcdHZhbHVlID0gdmFsdWUuc3Vic3RyKDQsdmFsdWUubGVuZ3RoKTtcblx0XHRcdFx0XHRcdCQoJChcIltkYXRhLWxhbmddXCIpW2ldKS5hdHRyKFwicGxhY2Vob2xkZXJcIix2YWx1ZSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdCQoJChcIltkYXRhLWxhbmddXCIpW2ldKS50ZXh0KExORyQoc3dpdGNoVG9MYW5nKS5nZXRLZXlWYWwocmV0cmlldmVkRGF0YVRhZykpLmFuaW1hdGVDc3MoJ3B1bHNlJyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdCQoJChcIltkYXRhLWxhbmddXCIpW2ldKS5jc3MoXCJ2aXNpYmlsaXR5XCIsXCJ2aXNpYmxlXCIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdH07XG5cblx0TGFuZy5pbml0ID0gZnVuY3Rpb24oYWN0aXZlTGFuZyl7XG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdHNlbGYuYWN0aXZlTGFuZyA9IGFjdGl2ZUxhbmcgfHwgc2l0ZUxhbmdzWzBdO1xuXHR9XG5cblx0TGFuZy5pbml0LnByb3RvdHlwZSA9IExhbmcucHJvdG90eXBlO1xuXHRnbG9iYWwuTGFuZyA9IGdsb2JhbC5MTkckID0gTGFuZztcblxuXHRnZXRTZXJ2ZXJEYXRhKFVSTCxmdW5jdGlvbihkYXRhKXtcblx0XHRMYW5nLmRhdGEgPSBkYXRhO1xuXHRcdHZhciBpbml0TGFuZyA9ICQoXCIubGFuZy1zd2l0Y2hlcj5zcGFuXCIpLnRleHQoKS50cmltKCk7XG5cdFx0TE5HJChpbml0TGFuZykuc3dpdGNoTGFuZyhpbml0TGFuZyk7XG5cdH0pO1xuXG5cdGZ1bmN0aW9uIGdldFNlcnZlckRhdGEodXJsLCBjYWxsYmFja0Z1bmMpIHtcblx0dmFyIHJlc3VsdCA9ICQuZ2V0SlNPTih1cmwsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdC8vY29uc29sZS5sb2coIFwiLS0tIHN1Y2Nlc3MgLS0tXCIgKTtcblx0XHRcdFx0fSlcblx0XHRcdFx0LmRvbmUoZnVuY3Rpb24oZGF0YSkge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCBcImxhbmcgZGF0YSBsb2FkZWQuLi5cIiApO1xuXHRcdFx0XHRcdC8vY29uc29sZS5sb2coZGF0YSk7XG5cdFx0XHRcdFx0Y2FsbGJhY2tGdW5jKGRhdGEpO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuZmFpbChmdW5jdGlvbihqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyggXCItLS0gZXJyb3IgLS0tXCIgKTtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhqcVhIUik7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5hbHdheXMoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0Ly9jb25zb2xlLmxvZyggXCJjb21wbGV0ZVwiICk7XG5cdFx0XHRcdH0pO1xuXHR9O1xuXG59KHdpbmRvdywgalF1ZXJ5KSk7XG4iLCIvLyAtLS0tLS0tLS0tIE5BVklHQVRJT04gLS0tLS0tLS0tLVxuXG4kKGZ1bmN0aW9uKGdsb2JhbCl7XG5cdHZhciBjb250cm9sbGVyLCBwYXJhbGxheDEsIHBhcmFsbGF4Mjtcblx0dmFyIGluaXRMYW5nPVwiXCI7XG5cdC8vIGthbWVuaWN0dmktZXJiZW4uY3ogZ29vZ2xlIG1hcHMga2V5ID1cIkFJemFTeURzU1U4NFdvaXh2dkNaNkVWNDhCdDE3NzdOMk5MS0htc1wiXG5cdC8vIHN0ZWlubWV0ei1lcmJlbi5kZSBnb29nbGUgbWFwcyBrZXkgPVwiQUl6YVN5QTBxVktwbmRmY29JZ1A1bnd1SnhtSDVxMHY1VFN2RWM0XCJcblx0dmFyIEFQSWtleSA9IFwiQUl6YVN5QTBxVktwbmRmY29JZ1A1bnd1SnhtSDVxMHY1VFN2RWM0XCI7XG5cdGdsb2JhbC5teVNpdGUgPXt9O1xuXG5cdGZ1bmN0aW9uIGlzX21vYmlsZSgpIHtcblx0ICAgIHZhciBhZ2VudHMgPSBbJ2FuZHJvaWQnLCAnd2Vib3MnLCAnaXBob25lJywgJ2lwYWQnLCAnYmxhY2tiZXJyeSddO1xuXHQgICAgZm9yKGkgaW4gYWdlbnRzKSB7XG5cdCAgICAgICAgaWYoKG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5zZWFyY2goYWdlbnRzW2ldKT4tMSkgJiYgKHdpbmRvdy5vcmllbnRhdGlvbiE9PXVuZGVmaW5lZCkpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHR9O1xuXG5cdHZhciBpc01vYmlsZUZsYWcgPSBpc19tb2JpbGUoKTtcblx0Z2xvYmFsLm15U2l0ZS5pc01vYmlsZUZsYWcgPSBpc01vYmlsZUZsYWc7XG5cblx0aWYgKGlzTW9iaWxlRmxhZz09PXRydWUpIHtcblx0XHQkKFwiYm9keVwiKS5hZGRDbGFzcyhcImlzTW9iaWxlXCIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gbmF2TWVudUluaXQoKSB7XG5cdFx0XHR2YXIgY2FjaGVkUGFnZT17fTtcblx0XHRcdCRjYWNoZWRJdGVtcyA9ICQoXCIjbWFpbk5hdmJhciBbZGF0YS1tZW51aXRlbV1cIik7XG5cdFx0XHQkKCRjYWNoZWRJdGVtcykuZWFjaChmdW5jdGlvbihpbmRleCx2YWx1ZSl7XG5cdFx0XHRcdGNhY2hlZFBhZ2VbJCh2YWx1ZSkuZGF0YSgnbWVudWl0ZW0nKV0gPSBcIlwiO1xuXHRcdFx0fSk7XG5cdFx0XHRnbG9iYWwubXlTaXRlLmNhY2hlZFBhZ2UgPSBjYWNoZWRQYWdlO1xuXG5cdFx0XHR2YXIgcGFnZUNhbGxiYWNrRnVuYyA9IHtcblx0XHRcdFx0bWFpbjogZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRpbml0Q2Fyb3VzZWxzKCk7XG5cdFx0XHRcdFx0bGlua1RvR2FsbGVyeSgpO1xuXHRcdFx0XHRcdGlmICghaXNNb2JpbGVGbGFnKSB7XG5cdFx0XHRcdFx0XHRpbml0UGFyYWxsYXgoXCIjcGFyYWxsYXgxXCIsXCIjcGFyYWxsYXgxID4gZGl2XCIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0YWJvdXQ6IGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0aW5pdENhcm91c2VscygpO1xuXHRcdFx0XHRcdGlmICghaXNNb2JpbGVGbGFnKSB7XG5cdFx0XHRcdFx0XHRpbml0UGFyYWxsYXgoXCIjcGFyYWxsYXgyXCIsXCIjcGFyYWxsYXgyID4gZGl2XCIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0cmVhbGlzYXRpb25zOiBmdW5jdGlvbigpe1xuXHRcdFx0XHRcdGluaXRDb21taXNpb25zR2FsbGVyeShmdW5jdGlvbigpe1xuXHRcdFx0XHRcdFx0TE5HJChpbml0TGFuZykuc3dpdGNoTGFuZyhpbml0TGFuZyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHByaWNpbmc6IGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0aW5pdFByaWNpbmdHYWxsZXJ5KGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0XHRMTkckKGluaXRMYW5nKS5zd2l0Y2hMYW5nKGluaXRMYW5nKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSxcblx0XHRcdFx0Y29udGFjdDogZnVuY3Rpb24ocnVuTWFwSW5pdFNjcmlwdCl7XG5cdFx0XHRcdFx0cnVuTWFwSW5pdFNjcmlwdCA9IHJ1bk1hcEluaXRTY3JpcHQgfHwgZmFsc2U7XG5cdFx0XHRcdFx0aWYgKHJ1bk1hcEluaXRTY3JpcHQpIHtcblx0XHRcdFx0XHRcdGFkZFNjcmlwdChcblx0XHRcdFx0XHRcdFx0XCJodHRwczovL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvanM/a2V5PVwiICsgQVBJa2V5ICsgXCImY2FsbGJhY2s9TWFwTW9kdWxlLmluaXRDb250YWN0TWFwXCIsXG5cdFx0XHRcdFx0XHRcdFwiYm9keVwiLFxuXHRcdFx0XHRcdFx0XHRmdW5jdGlvbigpe1xuXHRcdFx0XHRcdFx0XHRcdE1hcE1vZHVsZS5wbGFjZUNvbnRhY3RMaXN0ZW5lcnMoKTtcblx0XHRcdFx0XHRcdFx0XHRDb250YWN0Rm9ybU1vZHVsZS5pbml0Q29udGFjdEZvcm1MaXN0ZW5lcigpO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0TWFwTW9kdWxlLmluaXRDb250YWN0TWFwKCk7XG5cdFx0XHRcdFx0XHRNYXBNb2R1bGUucGxhY2VDb250YWN0TGlzdGVuZXJzKCk7XG5cdFx0XHRcdFx0XHRDb250YWN0Rm9ybU1vZHVsZS5pbml0Q29udGFjdEZvcm1MaXN0ZW5lcigpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRwbGFjZUJ1dHRvbk1vdmVVcExpc3RlbmVyKCk7XG5cdFx0XHRwbGFjZUxhbmdTd2l0Y2hMaXN0ZW5lcih0cnVlKTtcblxuXHRcdFx0Ly9oZWxwZXIgZnVuY3Rpb24gdG8gbG9hZCBnb29nbGUgbWFwcyBzY3JpcHRcblx0XHRcdGZ1bmN0aW9uIGFkZFNjcmlwdCggc3JjLCBlbCxjYWxsYmFja0YgKSB7XG5cdFx0XHRcdGlmICh0eXBlb2YgY2FsbGJhY2tGIT09XCJmdW5jdGlvblwiKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2tGPWZ1bmN0aW9uKCl7fTtcblx0XHRcdFx0fVxuXHRcdFx0XHQkKGVsKS5hcHBlbmQoJChcIjxzY3JpcHQgLz5cIiwge1xuICBcdFx0XHRcdHNyYzogc3JjLFxuXHRcdFx0XHRcdGFzeW5jOiB0cnVlLFxuXHRcdFx0XHRcdGRlZmVyOiB0cnVlXG5cdFx0XHRcdH0pKTtcblx0XHRcdFx0Y2FsbGJhY2tGKCk7XG5cdFx0XHR9XG5cdFx0XHQvL2hlbHBlciBmdW5jdGlvbiB0byB1cGRhdGUgdGhlIHBhZ2Ugd2hlbiBjbGlja2luZyBvbiBtZW51XG5cdFx0XHRmdW5jdGlvbiB1cGRhdGVQYWdlKGNhbGxiYWNrRnVuYyl7XG5cdFx0XHRcdGlmICh0eXBlb2YgY2FsbGJhY2tGdW5jIT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRcdGNhbGxiYWNrRnVuYyA9IGZ1bmN0aW9uKCl7fTtcblx0XHRcdFx0fVxuXHRcdFx0XHQkKCcjYWpheC1jb250YWluZXInKS5zaG93KCk7XG5cdFx0XHRcdCQoJy5sb2FkZXItd3JhcHBlcicpLmhpZGUoKTtcblx0XHRcdFx0JCgnI2FqYXgtY29udGVudCcpLmZhZGVJbig1MDAsZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRjYWxsYmFja0Z1bmMoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHQgICQoJyNtYWluTmF2YmFyJykub24oJ3Nob3cuYnMuY29sbGFwc2UnLCBmdW5jdGlvbiAoKSB7XG5cdCAgXHRcdFx0JChcIi5oYW1idXJnZXJfX21lbnUtaWNvblwiKS5hZGRDbGFzcyhcImhhbWJ1cmdlcl9fbWVudS1pY29uLS1jbG9zZS14XCIpO1xuXHRcdFx0fSlcblx0IFx0XHQkKCcjbWFpbk5hdmJhcicpLm9uKCdoaWRlLmJzLmNvbGxhcHNlJywgZnVuY3Rpb24gKCkge1xuXHQgIFx0XHRcdCQoXCIuaGFtYnVyZ2VyX19tZW51LWljb25cIikucmVtb3ZlQ2xhc3MoXCJoYW1idXJnZXJfX21lbnUtaWNvbi0tY2xvc2UteFwiKTtcblx0XHRcdH0pXG5cblx0ICAgICQoJy5uYXYtbGluaycpLm9uKCAnY2xpY2snLCBmdW5jdGlvbihlKSB7XG5cdCAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgICAgIHZhciB1cmwgPSB0aGlzLmhyZWYudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG5cdCAgICAgICAgdmFyIG1lbnVOYW1lID0gJCh0aGlzKS5kYXRhKCdtZW51aXRlbScpLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRcdGluaXRMYW5nID0gJChcIi5sYW5nLXN3aXRjaGVyPnNwYW5cIikudGV4dCgpLnRyaW0oKTtcblx0ICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKFwiLm5hdi1saW5rXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuXHQgICAgICAgICQodGhpcykuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG5cblx0XHRcdFx0XHRjb25zb2xlLmxvZyhjb250cm9sbGVyKTtcblx0XHRcdFx0XHRpZiAoY29udHJvbGxlciE9PXVuZGVmaW5lZCAmJiBjb250cm9sbGVyIT09bnVsbCkge1xuXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyID0gY29udHJvbGxlci5kZXN0cm95KHRydWUpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vY2xvc2UgdGhlIG1vYmlsZSBtZW51IGlmIGl0IGlzIG9wZW5lZFxuXHRcdFx0XHRcdCQoJyNtYWluTmF2YmFyJykuY29sbGFwc2UoJ2hpZGUnKTtcblxuXG5cdCAgICAgICAgJCgnI2FqYXgtY29udGFpbmVyJykuZmFkZU91dCg1MDAsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0XHQkKCcjYWpheC1jb250ZW50JykuaGlkZSgpO1xuXHRcdFx0XHRcdFx0JCgnLmxvYWRlci13cmFwcGVyJykuZmFkZUluKDUwMCk7XG5cdCAgICAgICAgXHQkKFwiYm9keSxodG1sXCIpLnN0b3AoKS5hbmltYXRlKHtzY3JvbGxUb3A6MH0sICc1MCcpO1xuXHRcdFx0XHRcdFx0JCh0aGlzKS5yZW1vdmUoKTtcblxuXHRcdFx0XHRcdFx0aWYgKG15U2l0ZS5jYWNoZWRQYWdlW21lbnVOYW1lXT09PScnKSB7XG5cdFx0XHRcdFx0XHRcdC8vIGRvIHRoZSBmb2xsb3dpbmcgaWYgdGhlIHBhZ2UgbmVlZHMgdG8gYmUgbG9hZGVkIGZvciB0aGUgZmlyc3QgdGltZShub3QgY2FjaGVkIHlldClcblx0XHRcdFx0XHRcdFx0Ly8gc3RhcnQgb2YgdGhlIGFqYXggbG9hZCBmdW5jdGlvblxuXHRcdCAgICAgICAgXHQkKCcjYWpheC1jb250ZW50JykubG9hZCh1cmwgKyAnICNhamF4LWNvbnRhaW5lcicsIGZ1bmN0aW9uKHJlc3VsdCxzdGF0dXMpe1xuXHRcdFx0XHRcdFx0XHRcdGlmIChzdGF0dXMgPT09IFwic3VjY2Vzc1wiKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIkxvYWRlZCAnXCIgKyBtZW51TmFtZSArIFwiJyBmcm9tIFNFUlZFUi4uLlwiKTtcblx0XHRcdFx0XHRcdFx0XHRcdHVwZGF0ZVBhZ2UoZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdFx0XHRcdFx0TE5HJChpbml0TGFuZykuc3dpdGNoTGFuZyhpbml0TGFuZyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNhY2hlZFBhZ2VbbWVudU5hbWVdPSQocmVzdWx0KS5maW5kKFwiI2FqYXgtY29udGFpbmVyXCIpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRtZW51TmFtZSA9PT0nY29udGFjdCcgPyBtYXBJbml0RmxhZyA9IHRydWUgOiBtYXBJbml0RmxhZyA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRwYWdlQ2FsbGJhY2tGdW5jW21lbnVOYW1lXShtYXBJbml0RmxhZyk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcblxuXHRcdCAgICAgICAgXHRcdH0gZWxzZSBpZiAoc3RhdHVzID09PSBcImVycm9yXCIpIHtcblx0XHQgICAgICAgIFx0XHRcdCQoJy5sb2FkZXItd3JhcHBlcicpLmhpZGUoKTtcblx0XHQgICAgICAgIFx0XHRcdGNvbnNvbGUubG9nKFwiRXJyb3IgbG9hZGluZyBmcm9tIHNlcnZlci4uLlwiKTtcblx0XHQgICAgICAgIFx0XHR9XG5cblx0XHQgICAgICAgIFx0fSk7IC8vIGVuZCBvZiBhamF4IGxvYWQgZnVuY3Rpb25cblxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Ly9pZiB0aGUgcGFnZSBpcyBhbHJlYWR5IGNhY2hlZC4uLlxuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIkxvYWRlZCAnXCIgKyBtZW51TmFtZSArIFwiJyBmcm9tIENBQ0hFLi4uXCIpO1xuXHRcdFx0XHRcdFx0XHQkKG15U2l0ZS5jYWNoZWRQYWdlW21lbnVOYW1lXSkuYXBwZW5kVG8oJyNhamF4LWNvbnRlbnQnKTtcblx0XHRcdFx0XHRcdFx0dXBkYXRlUGFnZShmdW5jdGlvbigpe1xuXHRcdFx0XHRcdFx0XHRcdExORyQoaW5pdExhbmcpLnN3aXRjaExhbmcoaW5pdExhbmcpO1xuXHRcdFx0XHRcdFx0XHRcdHBhZ2VDYWxsYmFja0Z1bmNbbWVudU5hbWVdKCk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHQgICAgICAgIH0pOyAgLy8gZW5kIG9mIGFuaW1hdGVDc3MgZnVuY3Rpb25cblx0ICAgIH0pOyAvLyBlbmQgb2YgY2xpY2sgbGlzdGVuZXJcblxuXHR9XG5cblx0ZnVuY3Rpb24gcGxhY2VCdXR0b25Nb3ZlVXBMaXN0ZW5lcigpIHtcblxuXHRcdHZhciBvZmZTZXRZPTA7XG5cdFx0JCh3aW5kb3cpLm9uKFwic2Nyb2xsXCIsIGZ1bmN0aW9uKCl7XG5cdFx0XHR2YXIgYWN0dWFsSGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpO1xuXHRcdFx0dmFyIGFjdHVhbFNjcm9sbFBvcyA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcblxuXHRcdFx0b2ZmU2V0WSA9IGFjdHVhbEhlaWdodC81O1xuXG5cdFx0XHRpZiAoYWN0dWFsU2Nyb2xsUG9zPDApIHthY3R1YWxTY3JvbGxQb3M9MH07XG5cblx0XHRcdC8vY29uc29sZS5sb2coYWN0dWFsSGVpZ2h0LGFjdHVhbFNjcm9sbFBvcyk7XG5cdFx0XHQvL2NvbnNvbGUubG9nKGFjdHVhbEhlaWdodC1vZmZTZXRZLGFjdHVhbFNjcm9sbFBvcyk7XG5cblx0XHRcdGlmICgoKGFjdHVhbEhlaWdodC1vZmZTZXRZKS9hY3R1YWxTY3JvbGxQb3MpPjEpIHtcblx0XHRcdFx0aWYgKCQoJy5idG4tbW92ZS11cCcpLmlzKFwiOnZpc2libGVcIikpIHtcblx0XHRcdFx0XHQkKFwiLmJ0bi1tb3ZlLXVwXCIpLmFuaW1hdGVDc3MoJ2JvdW5jZU91dCcsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0XHQkKFwiLmJ0bi1tb3ZlLXVwXCIpLmhpZGUoKTtcblx0XHRcdFx0XHRcdCQoXCIuYnRuLWRvd25cIikuc2hvdygpLmFuaW1hdGVDc3MoJ2JvdW5jZUluJyk7XG5cdFx0XHRcdFx0XHQvLyQoXCIuYnRuLWRvd25cIikuYW5pbWF0ZUNzcygnYm91bmNlSW4nKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAoISQoJy5idG4tbW92ZS11cCcpLmlzKFwiOnZpc2libGVcIikpIHtcbiBcdFx0XHRcdFx0JChcIi5idG4tZG93blwiKS5hbmltYXRlQ3NzKCdib3VuY2VPdXQnLGZ1bmN0aW9uKCl7XG4gXHRcdFx0XHRcdFx0JChcIi5idG4tZG93blwiKS5oaWRlKCk7XG4gXHRcdFx0XHRcdFx0JChcIi5idG4tbW92ZS11cFwiKS5zaG93KCk7XG4gXHRcdFx0XHRcdFx0JChcIi5idG4tbW92ZS11cFwiKS5hbmltYXRlQ3NzKCdib3VuY2VJbicpO1xuIFx0XHRcdFx0XHR9KTtcbiBcdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0XHQkKFwiLmJ0bi1tb3ZlLXVwXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcblx0XHRcdCQoXCJib2R5LGh0bWxcIikuc3RvcCgpLmFuaW1hdGUoe3Njcm9sbFRvcDowfSwgJzcwMCcsIFwic3dpbmdcIik7XG5cdFx0fSk7XG5cdFx0JChcIi5idG4tZG93blwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpe1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0dmFyIGp1bXBIYXNoID0gZS5jdXJyZW50VGFyZ2V0Lmhhc2g7XG5cdFx0XHR2YXIganVtcFBvaW50ID0gJChqdW1wSGFzaCkub2Zmc2V0KCkudG9wO1xuXHRcdFx0JChcImJvZHksaHRtbFwiKS5zdG9wKCkuYW5pbWF0ZSh7c2Nyb2xsVG9wOmp1bXBQb2ludH0sICc3MDAnLCBcInN3aW5nXCIpO1xuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBwbGFjZUxhbmdTd2l0Y2hMaXN0ZW5lcih1cGRhdGUpIHtcblx0XHR2YXIgdXBkYXRlID0gdXBkYXRlIHx8IGZhbHNlO1xuXHRcdHZhciBhY3RpdmVMYW5ndWFnZXMgPVtdO1xuXHRcdHZhciBsYW5ndWFnZXMgPSB7XG5cdFx0XHRcImN6XCI6ZmFsc2UsXG5cdFx0XHRcImZyXCI6ZmFsc2UsXG5cdFx0XHRcImVuXCI6dHJ1ZSxcblx0XHRcdFwiZGVcIjp0cnVlLFxuXHRcdFx0XCJlc1wiOmZhbHNlXG5cdFx0fTtcblx0XHQkLmVhY2gobGFuZ3VhZ2VzLCBmdW5jdGlvbihpbmRleCx2YWx1ZSl7XG5cdFx0XHRpZiAodmFsdWUpIHtcblx0XHRcdFx0YWN0aXZlTGFuZ3VhZ2VzLnB1c2goaW5kZXgpO1xuXHRcdFx0fVxuXHRcdH0pXG5cdFx0dmFyIGFjdGl2ZUxhbmcgPSAkKFwiLmxhbmctc3dpdGNoZXI+c3BhblwiKS50ZXh0KCkudHJpbSgpO1xuXHRcdGlmICh1cGRhdGUpIHtcblx0XHRcdExORyQoYWN0aXZlTGFuZykuc3dpdGNoTGFuZyhhY3RpdmVMYW5nKTtcblx0XHR9XG5cblx0XHQkKFwiLmxhbmctc3dpdGNoZXI+c3BhblwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XG5cdFx0XHR2YXIgbmV4dCA9IGFjdGl2ZUxhbmd1YWdlcy5pbmRleE9mKGFjdGl2ZUxhbmcpKzE7XG5cdFx0XHRpZiAoIWlzTGFuZ0RlZmluZWQoYWN0aXZlTGFuZ3VhZ2VzLGFjdGl2ZUxhbmcpKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdG5leHQgPT09IGFjdGl2ZUxhbmd1YWdlcy5sZW5ndGggPyBuZXh0PTAgOiBuZXh0PW5leHQ7XG5cdFx0XHRhY3RpdmVMYW5nID0gYWN0aXZlTGFuZ3VhZ2VzW25leHRdO1xuXHRcdFx0JChcIi5sYW5nLXN3aXRjaGVyPnNwYW5cIikudGV4dChhY3RpdmVMYW5nKTtcblx0XHRcdExORyQoYWN0aXZlTGFuZykuc3dpdGNoTGFuZyhhY3RpdmVMYW5nKTtcblx0XHRcdCQodGhpcykuYW5pbWF0ZUNzcyhcImJvdW5jZUluXCIpO1xuXHRcdH0pO1xuXG5cdFx0ZnVuY3Rpb24gaXNMYW5nRGVmaW5lZChhY3RpdmVMYW5ncyxsYW5nVG9DaGVjayl7XG5cdFx0XHRpZiAodHlwZW9mIGFjdGl2ZUxhbmdzICE9PSdvYmplY3QnKSB7XG5cdFx0XHRcdGFjdGl2ZUxhbmdzID0gYWN0aXZlTGFuZ3MgfHwgW107XG5cdFx0XHR9XG5cdFx0XHRpZiAodHlwZW9mIGxhbmdUb0NoZWNrICE9PSdzdHJpbmcnKSB7XG5cdFx0XHRcdGxhbmdUb0NoZWNrID0gbGFuZ1RvQ2hlY2sgfHwgXCJcIjtcblx0XHRcdH1cblx0XHRcdHZhciBpc0RlZmluZWQgPSBmYWxzZTtcblx0XHRcdHZhciBpbmQgPSBhY3RpdmVMYW5ncy5pbmRleE9mKGFjdGl2ZUxhbmcpO1xuXHRcdFx0aWYgKGluZCA9PT0gLTEpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJlcnJvcjogbGFuZ3VhZ2U6ICdcIisgbGFuZ1RvQ2hlY2sgK1wiJyB3aXRoaW4gJ2luZGV4Lmh0bWwnIGZpbGUgaXMgbm90IGNvbXBhdGlibGUgd2l0aCBsYW5ndWFnZXMgZGVmaW5lZC5cIik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpc0RlZmluZWQgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGlzRGVmaW5lZDtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBsaW5rVG9HYWxsZXJ5KCl7XG5cblx0XHQkKFwiLmJ0bi1zaXRlXCIpLm9uKCdjbGljaycsZnVuY3Rpb24oZSl7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0O1xuXHRcdFx0dmFyIGdhbExpbmsgPSAkKHRoaXMpLmRhdGEoJ2xpbmsnKS50cmltKCk7XG5cdFx0XHR2YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG5cdFx0XHRpZiAodXJsLnNlYXJjaChcImluZGV4Lmh0bWxcIikgPj0gMCApIHtcblx0XHRcdFx0dXJsID0gdXJsLnJlcGxhY2UoXCJpbmRleC5odG1sXCIsXCJyZWFsaXNhdGlvbnMuaHRtbFwiKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHVybCA9IHVybCArIFwicmVhbGlzYXRpb25zLmh0bWxcIjtcblx0XHRcdH1cblx0ICAgICAgICAkKCcjYWpheC1jb250YWluZXInKS5mYWRlT3V0KDUwMCwgZnVuY3Rpb24oKXtcblx0ICAgICAgICBcdCQoJyNhamF4LWNvbnRlbnQnKS5oaWRlKCk7XG5cdFx0XHRcdFx0XHQkKCcubG9hZGVyLXdyYXBwZXInKS5zaG93KCk7XG5cdFx0XHRcdFx0XHQkKFwiLm5hdmJhci1uYXY+Lm5hdi1saW5rXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuXHRcdFx0XHRcdFx0JChcIi5uYXZiYXItbmF2Pi5uYXYtbGlua1tocmVmPSdyZWFsaXNhdGlvbnMuaHRtbCddXCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuXG5cdFx0XHRcdFx0XHRpZiAobXlTaXRlLmNhY2hlZFBhZ2VbJ3JlYWxpc2F0aW9ucyddPT09JycpIHtcblx0XHQgICAgICAgIFx0JCgnI2FqYXgtY29udGVudCcpLmxvYWQodXJsICsgJyAjYWpheC1jb250YWluZXInLCBmdW5jdGlvbigpe1xuXHRcdFx0XHRcdFx0XHRcdCQoJy5sb2FkZXItd3JhcHBlcicpLmhpZGUoKTtcblx0XHQgICAgICAgIFx0XHQkKCcjYWpheC1jb250ZW50JykuZmFkZUluKDUwMCk7XG5cdFx0ICAgICAgICBcdFx0cGxhY2VCdXR0b25Nb3ZlVXBMaXN0ZW5lcigpO1xuXHRcdCAgICAgICAgXHRcdHBsYWNlTGFuZ1N3aXRjaExpc3RlbmVyKCk7XG5cdFx0ICAgICAgICBcdFx0aW5pdENvbW1pc2lvbnNHYWxsZXJ5KGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0XHRcdFx0XHRMTkckKGluaXRMYW5nKS5zd2l0Y2hMYW5nKGluaXRMYW5nKTtcblx0XHRcdCAgICAgICAgXHRcdCQoXCIuZmlsdGVyLWl0ZW1cIikuZWFjaChmdW5jdGlvbihpKXtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCQodGhpcykuZGF0YSgnbGFuZycpICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdCAgICAgICAgXHRcdFx0XHRpZiAoJCh0aGlzKS5kYXRhKCdsYW5nJykudG9Mb3dlckNhc2UoKS50cmltKCkgPT09IGdhbExpbmspIHtcblx0XHRcdCAgICAgICAgXHRcdFx0XHRcdCQodGhpcykudHJpZ2dlcignY2xpY2snKTtcblx0XHRcdCAgICAgICAgXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdCAgICAgICAgXHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdCAgICAgICAgXHRcdH0pO1xuXHRcdCAgICAgICAgXHRcdH0pO1xuXHRcdCAgICAgICAgXHR9KTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiTG9hZGVkICdyZWFsaXNhdGlvbnMnIHdpdGggcXVpY2sgbGluayBmcm9tIENBQ0hFLi4uXCIpO1xuXHRcdFx0XHRcdFx0XHQkKG15U2l0ZS5jYWNoZWRQYWdlWydyZWFsaXNhdGlvbnMnXSkuYXBwZW5kVG8oJyNhamF4LWNvbnRlbnQnKTtcblx0XHRcdFx0XHRcdFx0JCgnLmxvYWRlci13cmFwcGVyJykuaGlkZSgpO1xuXHRcdFx0XHRcdFx0XHQkKCcjYWpheC1jb250ZW50JykuZmFkZUluKDUwMCk7XG5cdFx0XHRcdFx0XHRcdHBsYWNlQnV0dG9uTW92ZVVwTGlzdGVuZXIoKTtcblx0XHRcdFx0XHRcdFx0cGxhY2VMYW5nU3dpdGNoTGlzdGVuZXIoKTtcblx0XHRcdFx0XHRcdFx0aW5pdENvbW1pc2lvbnNHYWxsZXJ5KGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0XHRcdFx0TE5HJChpbml0TGFuZykuc3dpdGNoTGFuZyhpbml0TGFuZyk7XG5cdFx0XHRcdFx0XHRcdFx0JChcIi5maWx0ZXItaXRlbVwiKS5lYWNoKGZ1bmN0aW9uKGkpe1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCQodGhpcykuZGF0YSgnbGFuZycpICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCQodGhpcykuZGF0YSgnbGFuZycpLnRvTG93ZXJDYXNlKCkudHJpbSgpID09PSBnYWxMaW5rKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0JCh0aGlzKS50cmlnZ2VyKCdjbGljaycpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH1cblx0ICAgICAgICB9KTtcblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGluaXRQYXJhbGxheCh0cmlnZ2VyRWxlbWVudCx0d2VlbkVsZW1lbnQpIHtcblx0XHR0cmlnZ2VyRWxlbWVudCA9IHRyaWdnZXJFbGVtZW50IHx8IFwiXCI7XG5cdFx0dHdlZW5FbGVtZW50ID0gdHdlZW5FbGVtZW50IHx8IFwiXCI7XG5cdFx0aWYgKCFpc01vYmlsZUZsYWcpIHtcblx0ICAgICAgICB2YXIgY29udHJvbGxlciA9IG5ldyBTY3JvbGxNYWdpYy5Db250cm9sbGVyKHtnbG9iYWxTY2VuZU9wdGlvbnM6IHt0cmlnZ2VySG9vazogXCJvbkVudGVyXCIsIGR1cmF0aW9uOiBcIjEwMCVcIn19KTtcblx0ICAgICAgICB2YXIgcGFyYWxsYXgxID0gbmV3IFNjcm9sbE1hZ2ljLlNjZW5lKHt0cmlnZ2VyRWxlbWVudDogdHJpZ2dlckVsZW1lbnR9KVxuXHQgICAgICAgICAgICAuc2V0VHdlZW4odHdlZW5FbGVtZW50LCB7eTogXCI1MCVcIiwgZWFzZTogTGluZWFyLmVhc2VOb25lfSlcblx0ICAgICAgICAgICAgLy8uYWRkSW5kaWNhdG9ycyh7bmFtZTogdHJpZ2dlckVsZW1lbnR9KVxuXHQgICAgICAgICAgICAuYWRkVG8oY29udHJvbGxlcik7XG5cdCAgICB9XG5cdH1cblxuXHQkKHdpbmRvdykubG9hZChmdW5jdGlvbigpe1xuXHRcdGxpbmtUb0dhbGxlcnkoKTtcblx0XHRuYXZNZW51SW5pdCgpO1xuXHRcdHBsYWNlQnV0dG9uTW92ZVVwTGlzdGVuZXIoKTtcblx0XHRwbGFjZUxhbmdTd2l0Y2hMaXN0ZW5lcigpO1xuXHRcdGluaXRQYXJhbGxheChcIiNwYXJhbGxheDFcIixcIiNwYXJhbGxheDEgPiBkaXZcIik7XG5cdH0pO1xuXG5cdGdsb2JhbC5teVNpdGUubmF2TWVudUluaXQgPSBuYXZNZW51SW5pdDtcblx0Z2xvYmFsLm15U2l0ZS5wbGFjZUJ1dHRvbk1vdmVVcExpc3RlbmVyID0gcGxhY2VCdXR0b25Nb3ZlVXBMaXN0ZW5lcjtcblx0Z2xvYmFsLm15U2l0ZS5wbGFjZUxhbmdTd2l0Y2hMaXN0ZW5lciA9IHBsYWNlTGFuZ1N3aXRjaExpc3RlbmVyO1xuXHRnbG9iYWwubXlTaXRlLmluaXRQYXJhbGxheCA9IGluaXRQYXJhbGxheDtcblxufSh3aW5kb3cpKTtcbiIsIi8vIC0tLS0tLS0tLS0gUE9SVEZPTElPIEZJTFRFUiAtLS0tLS0tLS0tXG5cblx0ZnVuY3Rpb24gaW5pdENvbW1pc2lvbnNHYWxsZXJ5KGNhbGxiYWNrRnVuYyl7XG5cdFx0dHlwZW9mIGNhbGxiYWNrRnVuYz09PVwiZnVuY3Rpb25cIiA/IGNhbGxiYWNrRnVuYyA9IGNhbGxiYWNrRnVuYyA6IGNhbGxiYWNrRnVuYyA9IGZ1bmN0aW9uKCl7fTtcblxuXHRcdHZhciBicm9rZW5Db3VudCA9IDA7XG5cblx0XHQkKFwiLmdyaWQtaXRlbT4uaW1nLXJlc3VsdC13cmFwcGVyXCIpLmhpZGUoKTtcblx0XHQkKFwiLmdyaWQtaXRlbT4uaW1nLWxvYWRlci13cmFwcGVyXCIpLnNob3coKTtcblx0XHQkKFwiLmdyaWQ+LmdyaWQtaXRlbVwiKS5hZGRDbGFzcyhcImhvdmVyLW9mZlwiKTtcblxuXHRcdCQoJyNwb3J0Zm9saW9zJykuaW1hZ2VzTG9hZGVkKClcblx0XHQgIC5hbHdheXMoIGZ1bmN0aW9uKCBpbnN0YW5jZSApIHtcblx0XHQgICAgY29uc29sZS5sb2coXCJhbGwgaW1hZ2VzIG9mICdDb21taXNpb25zIG1lbnUnIGxvYWRlZFwiKTtcblxuXHRcdFx0aW5zdGFudGlhdGVJc290b3BlR2FsbGVyeShcIi5ncmlkXCIse1xuXHRcdCAgXHRcdGl0ZW1TZWxlY3RvcjogJy5ncmlkLWl0ZW0nLFxuXHRcdCAgXHRcdHN0YWdnZXI6IDMwXG5cdFx0XHR9KTtcblxuXHRcdCAgICBidWlsZEltZ0NhdGVnb3JpZXMoXCIjZmlsdGVyLXBvcnRmb2xpb1wiLFwiI3BvcnRmb2xpby1nYWxsZXJ5IC5ncmlkLWl0ZW1cIik7XG5cdFx0ICAgIHBsYWNlRmlsdGVyTGlzdGVuZXJzKFwiLmdyaWRcIik7XG5cblx0XHRcdCQoXCIuZ3JpZC1pdGVtPi5pbWctcmVzdWx0LXdyYXBwZXJcIikuZmFkZU91dCgxMDAwKTtcblx0XHQgICAgJChcIi5pbWctbG9hZGVyPi5pbWctbG9hZGVyLXRleHRcIikudGV4dChcImltYWdlcyBsb2FkZWRcIik7XG5cdFx0ICAgICQoXCIuaW1nLWxvYWRlci1iYXJcIikuY3NzKFwiYmFja2dyb3VuZC1jb2xvclwiLFwiZ3JlZW5cIik7XG5cdFx0ICAgICQoXCIuaW1nLWxvYWRlclwiKS5kZWxheSgzMDAwKS5zbGlkZVVwKDEwMDApO1xuXHRcdCAgICAkKFwiLmdyaWQ+LmdyaWQtaXRlbVwiKS5yZW1vdmVDbGFzcyhcImhvdmVyLW9mZlwiKTtcblxuXHRcdCAgICBjYWxsYmFja0Z1bmMoKTtcblxuXHRcdCAgfSlcblx0XHQgIC5kb25lKCBmdW5jdGlvbigpIHtcblx0XHQgICAgY29uc29sZS5sb2coXCJhbGwgaW1hZ2VzIG9mICdDb21taXNpb25zIG1lbnUnIHN1Y2Nlc3NmdWxseSBsb2FkZWRcIik7XG5cblx0XHQgIH0pXG5cdFx0ICAuZmFpbCggZnVuY3Rpb24oKSB7XG5cdFx0ICAgIGNvbnNvbGUubG9nKCBicm9rZW5Db3VudCArIFwiIG9mICdDb21taXNpb25zIG1lbnUnIGltYWdlcyBoYXZlIGJyb2tlbiBsaW5rcy4gQ2hlY2sgeW91ciBpbWFnZSBwYXRocy5cIik7XG5cdFx0ICAgICQoXCIuaW1nLWxvYWRlclwiKS5kZWxheSgzMDAwKS5zbGlkZVVwKDEwMDApO1xuXHRcdCAgfSlcblx0XHQucHJvZ3Jlc3MoIGZ1bmN0aW9uKCBpbnN0YW5jZSwgaW1hZ2UgKSB7XG5cblx0XHQgICAgaWYgKGltYWdlLmlzTG9hZGVkKSB7XG5cdFx0ICAgIFx0JChpbWFnZS5pbWcpLnNpYmxpbmdzKFwiLmltZy1sb2FkZXItd3JhcHBlclwiKS5oaWRlKCk7XG5cdFx0ICAgIFx0JChpbWFnZS5pbWcpLnNpYmxpbmdzKFwiLmltZy1yZXN1bHQtd3JhcHBlclwiKS5hbmltYXRlQ3NzKFwiYm91bmNlSW5cIikuc2hvdygpO1xuXHRcdFx0XHQkKFwiLmltZy1sb2FkZXItYmFyXCIpLndpZHRoKChpbnN0YW5jZS5wcm9ncmVzc2VkQ291bnQvaW5zdGFuY2UuaW1hZ2VzLmxlbmd0aCkqMTAwICsgXCIlXCIpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0YnJva2VuQ291bnQrKztcblx0XHRcdFx0JChpbWFnZS5pbWcpLnBhcmVudCgpLnJlbW92ZSgpO1xuXHRcdFx0fVxuXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBpbml0UHJpY2luZ0dhbGxlcnkoY2FsbGJhY2tGdW5jKXtcblx0XHR0eXBlb2YgY2FsbGJhY2tGdW5jPT09XCJmdW5jdGlvblwiID8gY2FsbGJhY2tGdW5jID0gY2FsbGJhY2tGdW5jIDogY2FsbGJhY2tGdW5jID0gZnVuY3Rpb24oKXt9O1xuXG5cdFx0dmFyIGJyb2tlbkNvdW50ID0gMDtcblx0XHQkKFwiLmdyaWQtcHJpY2luZz4uZ3JpZC1pdGVtLXByaWNpbmdcIikuYWRkQ2xhc3MoXCJob3Zlci1vZmZcIik7XG5cblx0XHQkKFwiI3ByaWNpbmdcIikuaW1hZ2VzTG9hZGVkKClcblx0XHQgXHQuYWx3YXlzKCBmdW5jdGlvbiggaW5zdGFuY2UgKSB7XG5cdFx0ICAgIFx0Y29uc29sZS5sb2coXCJhbGwgaW1hZ2VzIG9mICdQcmljaW5nIG1lbnUnIGxvYWRlZFwiKTtcblxuXHRcdCAgIFx0XHRpbnN0YW50aWF0ZUlzb3RvcGVHYWxsZXJ5KFwiLmdyaWQtcHJpY2luZ1wiLHtcblx0XHQgIFx0XHRcdGl0ZW1TZWxlY3RvcjogJy5ncmlkLWl0ZW0tcHJpY2luZycsXG5cdFx0ICBcdFx0XHRzdGFnZ2VyOiAzMFxuXHRcdFx0XHR9KTtcblxuXHRcdCAgICBcdGJ1aWxkSW1nQ2F0ZWdvcmllcyhcIiNmaWx0ZXItcHJpY2VsaXN0XCIsXCIjcHJpY2luZy1nYWxsZXJ5IC5ncmlkLWl0ZW0tcHJpY2luZ1wiKTtcblx0XHQgICAgXHRwbGFjZUZpbHRlckxpc3RlbmVycyhcIi5ncmlkLXByaWNpbmdcIik7XG5cdFx0ICAgIFx0JChcIi5ncmlkLXByaWNpbmc+LmdyaWQtaXRlbS1wcmljaW5nXCIpLnJlbW92ZUNsYXNzKFwiaG92ZXItb2ZmXCIpO1xuXG5cdFx0XHRcdFx0Y2FsbGJhY2tGdW5jKCk7XG5cblx0XHQgIFx0fSlcblx0XHQgIFx0LmRvbmUoIGZ1bmN0aW9uKCkge1xuXHRcdCAgICBcdGNvbnNvbGUubG9nKFwiQWxsIGltYWdlcyBvZiAnUHJpY2luZyBtZW51JyBzdWNjZXNzZnVsbHkgbG9hZGVkXCIpO1xuXG5cdFx0ICBcdH0pXG5cdFx0ICBcdC5mYWlsKCBmdW5jdGlvbigpIHtcblx0XHQgICAgXHRjb25zb2xlLmxvZyggYnJva2VuQ291bnQgKyBcIiBvZiAnUHJpY2luZyBtZW51JyBpbWFnZXMgaGF2ZSBicm9rZW4gbGlua3MuIENoZWNrIHlvdXIgaW1hZ2UgcGF0aHMuXCIpO1xuXHRcdCAgXHR9KVxuXHRcdFx0LnByb2dyZXNzKCBmdW5jdGlvbiggaW5zdGFuY2UsIGltYWdlICkge1xuXG5cdFx0ICAgIFx0aWYgKCFpbWFnZS5pc0xvYWRlZCkge1xuXHRcdFx0XHRcdGJyb2tlbkNvdW50Kys7XG5cdFx0XHRcdFx0JChpbWFnZS5pbWcpLnBhcmVudCgpLnJlbW92ZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0fVxuXG5cblx0ZnVuY3Rpb24gaW5zdGFudGlhdGVJc290b3BlR2FsbGVyeShlbCxvcHRpb25zKXtcblx0XHQkKGVsKS5pc290b3BlKG9wdGlvbnMpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYnVpbGRJbWdDYXRlZ29yaWVzKGxpc3RFbGVtZW50LGltZ0NvbnRhaW5lcnMpIHtcblxuXHRcdHZhciAkaW1nQ29udGFpbmVycyA9ICQoaW1nQ29udGFpbmVycyk7XG5cdFx0dmFyICRidXR0b25zID0gJChsaXN0RWxlbWVudCk7XG5cdFx0dmFyIHRhZ2dlZCA9IHt9O1xuXG5cdFx0JGJ1dHRvbnMuY2hpbGRyZW4oKS5yZW1vdmUoKTtcblxuXHRcdCRpbWdDb250YWluZXJzLmVhY2goZnVuY3Rpb24oKXtcblx0XHRcdHZhciBpbWdDb250YWluZXI9dGhpcztcblx0XHRcdHZhciB0YWdzID0gJCh0aGlzKS5kYXRhKCdwb3J0Zm9saW8tdGFncycpO1xuXG5cdFx0XHRpZiAodGFncykge1xuXHRcdFx0XHR0YWdzLnNwbGl0KFwiLFwiKS5mb3JFYWNoKGZ1bmN0aW9uKHRhZ05hbWUpe1xuXHRcdFx0XHRcdHRhZ05hbWUgPSB0YWdOYW1lLnRyaW0oKTtcblx0XHRcdFx0XHRpZiAodGFnZ2VkW3RhZ05hbWVdPT1udWxsKSB7XG5cdFx0XHRcdFx0XHR0YWdnZWRbdGFnTmFtZV09W107XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRhZ2dlZFt0YWdOYW1lXS5wdXNoKGltZ0NvbnRhaW5lcik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0pXG5cblx0XHQkYnV0dG9ucy5hZGRDbGFzcyhcImZpbHRlci13cmFwcGVyXCIpO1xuXHRcdCQoXCI8bGkvPlwiKS5hcHBlbmRUbygkYnV0dG9ucyk7XG5cblx0XHQkKFwiPGEvPlwiLCB7XG5cdFx0XHR0ZXh0OiBcIlbFoWVcIixcblx0XHRcdGNsYXNzOiBcImZpbHRlci1pdGVtIHNlbGVjdGVkXCIsXG5cdFx0XHRjbGljazogZnVuY3Rpb24oKXtcblx0XHRcdFx0JCh0aGlzKS5hZGRDbGFzcyhcInNlbGVjdGVkXCIpLnBhcmVudCgpLnNpYmxpbmdzKCkuY2hpbGRyZW4oKS5yZW1vdmVDbGFzcyhcInNlbGVjdGVkXCIpO1xuXHRcdFx0fVxuXHRcdH0pLmFwcGVuZFRvKCRidXR0b25zLmNoaWxkcmVuKCkuZXEoMCkpLmF0dHIoJ2RhdGEtbGFuZycsJ1bFoWUnKTtcblxuXHRcdCQoXCI8bGk+PGEgY2xhc3M9J2ZpbHRlci1pdGVtIGZpbHRlci1wb3J0Zm9saW8tZGl2aWRlcic+Jm5ic3A7PC9hPjwvbGk+XCIpLmFwcGVuZFRvKCRidXR0b25zKTtcblxuXHRcdCQuZWFjaCh0YWdnZWQsIGZ1bmN0aW9uKHRhZ05hbWUpIHtcblx0XHRcdCQoXCI8bGkvPlwiKS5hcHBlbmRUbygkYnV0dG9ucyk7XG5cblx0XHRcdCQoXCI8YS8+XCIsIHtcblx0XHRcdFx0dGV4dDogdGFnTmFtZSxcblx0XHRcdFx0Y2xhc3M6IFwiZmlsdGVyLWl0ZW1cIixcblx0XHRcdFx0Y2xpY2s6IGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0JCh0aGlzKS5hZGRDbGFzcyhcInNlbGVjdGVkXCIpLnBhcmVudCgpLnNpYmxpbmdzKCkuY2hpbGRyZW4oKS5yZW1vdmVDbGFzcyhcInNlbGVjdGVkXCIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KS5hcHBlbmRUbygkYnV0dG9ucy5jaGlsZHJlbigpLmxhc3QoKSkuYXR0cignZGF0YS1sYW5nJyx0YWdOYW1lKTtcblx0XHR9KVxuXG5cdH07XG5cblx0ZnVuY3Rpb24gcGxhY2VGaWx0ZXJMaXN0ZW5lcnMoZ3JpZEVsKSB7ICAgLy8gXCIuZ3JpZFwiXG5cdCAgICAkKCcuZmlsdGVyLXdyYXBwZXInKS5vbiggJ2NsaWNrJywgJy5maWx0ZXItaXRlbScsIGZ1bmN0aW9uKCkge1xuXHQgICAgXHR2YXIgZmlsdGVyVmFsdWUgPSAkKHRoaXMpLmRhdGEoJ2xhbmcnKTtcblx0ICAgIFx0IC8vIGNvbnNvbGUubG9nKFwiLS0tLS0tLS1cIik7XG5cdCAgICBcdCAvLyBjb25zb2xlLmxvZyhmaWx0ZXJWYWx1ZSk7XG5cblx0ICAgIFx0aWYgKGZpbHRlclZhbHVlID09PSAkKCQoXCIuZmlsdGVyLWl0ZW1cIilbMF0pLmRhdGEoJ2xhbmcnKSkge1xuXHQgICAgXHRcdCQoZ3JpZEVsKS5pc290b3BlKHtcblx0XHRcdFx0ICBcdGZpbHRlcjogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCAgXHRcdHJldHVybiB0cnVlO1xuXHRcdFx0ICBcdCAgXHR9XG5cdFx0XHRcdFx0fSk7XG5cdCAgICBcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JChncmlkRWwpLmlzb3RvcGUoe1xuXHRcdFx0XHRcdCAgXHRmaWx0ZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCAgXHRcdHRhZ1RleHQ9ICQodGhpcykuZGF0YSgncG9ydGZvbGlvVGFncycpO1xuXHRcdFx0XHRcdCAgXHRcdGZvdW5kID0gdGFnVGV4dC5zZWFyY2goZmlsdGVyVmFsdWUpO1xuXHRcdFx0XHRcdFx0ICBcdGlmIChmb3VuZD4gLTEpIHtcblx0XHRcdFx0XHRcdCAgXHRcdHJldHVybiB0cnVlXG5cdFx0XHRcdFx0XHQgIFx0fSAgIGVsc2Uge1xuXHRcdFx0XHRcdFx0ICBcdFx0cmV0dXJuIGZhbHNlXG5cdFx0XHRcdFx0XHQgIFx0fVxuXHRcdFx0XHQgIFx0ICBcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHQgICAgfSk7XG5cblx0XHQkKGdyaWRFbCArICcgLmdyaWQtaXRlbScpLm9uKCAnY2xpY2snLCBmdW5jdGlvbihlKSB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRpZiAoJCh0aGlzKS5oYXNDbGFzcygnZ3JpZC1pdGVtLXNlbGVjdGVkJykpIHtcblx0XHRcdFx0JCh0aGlzKS5yZW1vdmVDbGFzcygnZ3JpZC1pdGVtLXNlbGVjdGVkJyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkKGdyaWRFbCArICcgLmdyaWQtaXRlbScpLnJlbW92ZUNsYXNzKCdncmlkLWl0ZW0tc2VsZWN0ZWQnKTtcblx0XHRcdFx0JCh0aGlzKS5hZGRDbGFzcygnZ3JpZC1pdGVtLXNlbGVjdGVkJyk7XG5cdFx0XHR9XG5cdFx0XHQkKGdyaWRFbCkuaXNvdG9wZSgnbGF5b3V0Jyk7XG5cdFx0XHQvLyBjb25zb2xlLmxvZygnZ3JpZCBpdGVtIGNsaWNrZWQnKTtcblx0XHRcdC8vIGNvbnNvbGUubG9nKCQodGhpcykpO1xuXHRcdH0pO1xuXG5cdH1cbiJdfQ==
