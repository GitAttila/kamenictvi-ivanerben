function initContactFormListener(){$("#contact-form .btn-site").on("click",function(){$("#contact-form").submit()}),$("#contact-form").submit(function(e){e.preventDefault(),console.log("Form submitted listener called");var s=$("#contact-form").find("input, textarea, select"),t={};s.each(function(){this.name&&("checkbox"==this.type||"radio"==this.type?this.checked&&(t[this.name]=this.value):t[this.name]=this.value)}),console.log("formValues : "+JSON.stringify(t)),$.ajax({url:"assets/php/handleajaxform.php",method:"POST",data:t,success:function(e){if(console.log("AJAX post result result : "+JSON.stringify(e)),$("div[data-error-id]").text(""),$("#contact-form input, #contact-form textarea").removeClass("form-error"),$("#send-result").text(""),Object.keys(e.errors).length>0)for(var s in e.errors)console.log("error in "+s+": "+e.errors[s]),$('div[data-error-id="'+s+'"]').text(e.errors[s]).hide().slideDown(),$('*[name="'+s+'"]').addClass("form-error"),$('*[name="'+s+'"]').animateCss("shake");else console.log("All validation passed succesfully!"),$("#send-result").text("Thank you. Your message has been sent."),$("#send-result").removeClass("alert-danger").addClass("alert-success"),$("#send-result").show().animateCss("bounceIn",function(){$("input").val(""),$("textarea").val(""),$("#send-result").delay(5e3).slideUp()})},error:function(){$("#send-result").removeClass("alert-success"),$("#send-result").addClass("alert-danger"),$("#send-result").text("Sorry... Your message could not have been delivered."),$("#send-result").slideDown()}})})}
function initContactMap(){var o=[{featureType:"all",elementType:"all",stylers:[{saturation:-100},{gamma:.5}]}],t=new google.maps.Map(document.getElementById("contact-map"),{center:myPosition,scrollwheel:!1,streetViewControl:!0,streetViewControl:{position:google.maps.ControlPosition.LEFT_BOTTOM},mapTypeControl:!0,mapTypeControlOptions:{position:google.maps.ControlPosition.BOTTOM_LEFT},zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},styles:o,zoom:14});myMap=t;new google.maps.Marker({map:t,position:myPosition,title:"Kamenictví Erben",icon:{url:"assets/images/IE_logo_rounded_pointer.png",scaledSize:new google.maps.Size(150,150)}});myMap.panBy(0,-$("nav.navbar").height())}var myMap,myPosition={lat:50.048822,lng:15.200242};
$(function(n){$(".loader-wrapper").hide();setInterval(function(){$(".btn-down").animateCss("bounce")},3e3);$.fn.extend({animateCss:function(n,e){return this.addClass("animated "+n).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("animated "+n),$.isFunction(e)&&e()}),this}}),initCarousels=function(){console.log("carousels initialized");for(var n=[{carousel:"#main-carousel",interval:7e3,pause:"none"},{carousel:"#about-carousel",interval:5e3,pause:"none"},{carousel:"#carouselTombstones",interval:3e3,pause:"none"},{carousel:"#carouselGarden",interval:3e3,pause:"none"},{carousel:"#carouselRestorations",interval:3e3,pause:"none"},{carousel:"#CarouselMonuments",interval:3e3,pause:"none"}],e=0;e<n.length-1;e++)$(n[e].carousel).carousel({interval:n[e].interval})},n.initCarousels=initCarousels}(window));
!function(t,a){var n=["cz","en"],e=function(t){return new e.init(t)};e.prototype={getKeyVal:function(t){return self=this,function(){t=t.trim();for(var a,n=0;n<=e.data.length-1;n++){if(e.data[n].datatag===t)return a=e.data[n][self.activeLang];a=""}return a}()},switchLang:function(t){self=this;for(var n=a("[data-lang]").length,e=0;e<=n-1;e++){var o=a(a("[data-lang]")[e]).data("lang");value=LNG$(t).getKeyVal(o),""!==value.trim()&&(value.search("<ph>")>-1?(value=value.substr(4,value.length),a(a("[data-lang]")[e]).attr("placeholder",value)):a(a("[data-lang]")[e]).text(LNG$(t).getKeyVal(o)).animateCss("pulse"))}}},e.init=function(t){this.activeLang=t||n[0]},e.init.prototype=e.prototype,t.Lang=t.LNG$=e,function(t,n){a.getJSON(t,function(){console.log("--- success ---")}).done(function(t){console.log("--- second success ---"),n(t)}).fail(function(t,a,n){console.log("--- error ---"),console.log(t)}).always(function(){})}("./assets/data/lang.json",function(t){e.data=t;var n=a(".lang-switcher a").text().trim();LNG$(n).switchLang(n)})}(window,jQuery);
$(function(n){function e(){$("#mainNavbar").on("show.bs.collapse",function(){$(".hamburger__menu-icon").addClass("hamburger__menu-icon--close-x")}),$("#mainNavbar").on("hide.bs.collapse",function(){$(".hamburger__menu-icon").removeClass("hamburger__menu-icon--close-x")}),$(".nav-link").on("click",function(n){n.preventDefault();var e=this.href.trim().toLowerCase(),i=this.pathname.trim().toLowerCase();$(this).siblings(".nav-link").removeClass("active"),$(this).addClass("active"),void 0!==s&&null!==s&&(s=s.destroy(!0)),$("#mainNavbar").collapse("hide"),$(".loader-wrapper").show(),$("#ajax-container").animateCss("fadeOutDown",function(){var n=this;$("body,html").stop().animate({scrollTop:0},"50"),$("#ajax-content").load(e+" #ajax-container",function(e,h){"success"===h?($(n).remove(),$("#ajax-content").hide(),$(".loader-wrapper").hide(),$("#ajax-content").show(),$("#ajax-content").animateCss("fadeInUp"),a(),t(),o(!0),i.search("realisations.html")>-1?initCommisionsGallery():i.search("contact.html")>-1?(initContactMap(),initContactFormListener()):i.search("index.html")>-1?(initCarousels(),r(),m||(s=new ScrollMagic.Controller({globalSceneOptions:{triggerHook:"onEnter",duration:"100%"}}),c=new ScrollMagic.Scene({triggerElement:"#parallax1"}).setTween("#parallax1 > div",{y:"50%",ease:Linear.easeNone}).addTo(s))):i.search("about.html")>-1?(initCarousels(),m||(s=new ScrollMagic.Controller({globalSceneOptions:{triggerHook:"onEnter",duration:"100%"}}),l=new ScrollMagic.Scene({triggerElement:"#parallax2"}).setTween("#parallax2 > div",{y:"50%",ease:Linear.easeNone}).addTo(s))):i.search("pricing.html")>-1&&initPricingGallery()):"error"===h&&($(".loader-wrapper").hide(),console.log("Error loading from server..."))})})})}function a(){$(".btn-map").on("click",function(n){n.preventDefault();var e=$(this);if(window.addEventListener("orientationchange",function(){e.children().hasClass("fa-expand")&&(window.matchMedia("(orientation: landscape)").matches&&window.innerWidth<767?$("#contact-map").animate({height:"75vh"},500,function(){google.maps.event.trigger(myMap,"resize"),myMap.setCenter(myPosition),myMap.panBy(0,-$("nav.navbar").height())}):$("#contact-map").animate({height:"50vh"},500,function(){google.maps.event.trigger(myMap,"resize"),myMap.setCenter(myPosition),myMap.panBy(0,-$("nav.navbar").height())}))},!1),e.children().hasClass("fa-expand"))return e.children().removeClass("fa-expand").addClass("fa-compress"),void $("#contact-map").animate({height:"100vh"},500,function(){google.maps.event.trigger(myMap,"resize"),myMap.setCenter(myPosition),myMap.panBy(0,-$("nav.navbar").height())});e.children().hasClass("fa-compress")&&(e.children().removeClass("fa-compress").addClass("fa-expand"),window.matchMedia("(orientation: landscape)").matches&&window.innerWidth<767?$("#contact-map").animate({height:"75vh"},500,function(){google.maps.event.trigger(myMap,"resize"),myMap.setCenter(myPosition),myMap.panBy(0,-$("nav.navbar").height())}):$("#contact-map").animate({height:"50vh"},500,function(){google.maps.event.trigger(myMap,"resize"),myMap.setCenter(myPosition),myMap.panBy(0,-$("nav.navbar").height())}))})}function t(){var n=0;$(window).on("scroll",function(){var e=$(window).height(),a=$(window).scrollTop();n=e/5,a<0&&(a=0),(e-n)/a>1?$(".btn-move-up").is(":visible")&&$(".btn-move-up").animateCss("bounceOut",function(){$(".btn-move-up").hide(),$(".btn-down").show().animateCss("bounceIn")}):$(".btn-move-up").is(":visible")||$(".btn-down").animateCss("bounceOut",function(){$(".btn-down").hide(),$(".btn-move-up").show(),$(".btn-move-up").animateCss("bounceIn")})}),$(".btn-move-up").on("click",function(){$("body,html").stop().animate({scrollTop:0},"700","swing")}),$(".btn-down").on("click",function(n){console.log(n),n.preventDefault();var e=n.currentTarget.hash,a=$(e).offset().top;$("body,html").stop().animate({scrollTop:a},"700","swing")})}function o(n){var n=n||!1,e=$(".lang-switcher>span").text().trim();n&&LNG$(e).switchLang(e),$(".lang-switcher>span").on("click",function(){"cz"===e?(e="en",$(".lang-switcher>span").text(e),LNG$(e).switchLang(e)):"en"===e&&(e="cz",$(".lang-switcher>span").text(e),LNG$(e).switchLang(e)),$(this).animateCss("bounceIn")})}function r(){$(".btn-site").on("click",function(n){n.preventDefault;var e=$(this).data("link").trim(),i=window.location.href;i.search("index.html")>=0?i=i.replace("index.html","realisations.html"):i+="realisations.html",$("#ajax-container").animateCss("fadeOutDown",function(){$("#ajax-content").hide(),$("#ajax-content").load(i+" #ajax-container",function(){$(".navbar-nav>.nav-link").removeClass("active"),$(".navbar-nav>.nav-link[href='realisations.html']").addClass("active"),$("#ajax-content").show(),$("#ajax-content").animateCss("fadeInUp"),a(),t(),o(),initCommisionsGallery(function(){$(".filter-item").each(function(n){if($(this).text().toLowerCase().trim()===e)return void $(this).trigger("click")})})})})})}var s,c,l;n.mySite={};var m=function(){var n=["android","webos","iphone","ipad","blackberry"];for(i in n)if(navigator.userAgent.toLowerCase().search(n[i])>-1&&void 0!==window.orientation)return!0;return!1}();if(n.mySite.isMobileFlag=m,!0===m&&$("body").addClass("isMobile"),!m)var s=new ScrollMagic.Controller({globalSceneOptions:{triggerHook:"onEnter",duration:"100%"}}),c=new ScrollMagic.Scene({triggerElement:"#parallax1"}).setTween("#parallax1 > div",{y:"50%",ease:Linear.easeNone}).addTo(s);r(),e(),a(),t(),o(),n.mySite.navMenuInit=e,n.mySite.placeContactListeners=a,n.mySite.placeButtonMoveUpListener=t,n.mySite.placeLangSwitchListener=o}(window));
function initCommisionsGallery(e){var e=e||function(){},i=0;$(".grid-item>.img-result-wrapper").hide(),$(".grid-item>.img-loader-wrapper").show(),$(".grid>.grid-item").addClass("hover-off"),$("#portfolios").imagesLoaded().always(function(i){console.log("all images of 'Commisions menu' loaded"),instantiateIsotopeGallery(".grid",{itemSelector:".grid-item",stagger:30}),buildImgCategories("#filter-portfolio","#portfolio-gallery .grid-item"),placeFilterListeners(".grid"),$(".grid-item>.img-result-wrapper").fadeOut(1e3),$(".img-loader>.img-loader-text").text("images loaded"),$(".img-loader-bar").css("background-color","green"),$(".img-loader").delay(3e3).slideUp(1e3),$(".grid>.grid-item").removeClass("hover-off"),e()}).done(function(){console.log("all images of 'Commisions menu' successfully loaded")}).fail(function(){console.log(i+" of 'Commisions menu' images have broken links. Check your image paths."),$(".img-loader").delay(3e3).slideUp(1e3)}).progress(function(e,t){t.isLoaded?($(t.img).siblings(".img-loader-wrapper").hide(),$(t.img).siblings(".img-result-wrapper").animateCss("bounceIn").show(),$(".img-loader-bar").width(e.progressedCount/e.images.length*100+"%")):(i++,$(t.img).parent().remove())})}function initPricingGallery(){var e=0;$(".grid-pricing>.grid-item-pricing").addClass("hover-off"),$("#pricing").imagesLoaded().always(function(e){console.log("all images of 'Pricing menu' loaded"),instantiateIsotopeGallery(".grid-pricing",{itemSelector:".grid-item-pricing",stagger:30}),buildImgCategories("#filter-pricelist","#pricing-gallery .grid-item-pricing"),placeFilterListeners(".grid-pricing"),$(".grid-pricing>.grid-item-pricing").removeClass("hover-off")}).done(function(){console.log("All images of 'Pricing menu' successfully loaded")}).fail(function(){console.log(e+" of 'Pricing menu' images have broken links. Check your image paths.")}).progress(function(i,t){t.isLoaded||(e++,$(t.img).parent().remove())})}function instantiateIsotopeGallery(e,i){$(e).isotope(i)}function buildImgCategories(e,i){var t=$(i),r=$(e),o={};r.children().remove(),t.each(function(){var e=this,i=$(this).data("portfolio-tags");i&&i.split(",").forEach(function(i){i=i.trim(),null==o[i]&&(o[i]=[]),o[i].push(e)})}),r.addClass("filter-wrapper"),$("<li/>").appendTo(r),$("<a/>",{text:"Vše",class:"filter-item selected",click:function(){$(this).addClass("selected").parent().siblings().children().removeClass("selected")}}).appendTo(r.children().eq(0)).attr("data-lang","Vše"),$("<li><a class='filter-item filter-portfolio-divider'>&nbsp;</a></li>").appendTo(r),$.each(o,function(e){$("<li/>").appendTo(r),$("<a/>",{text:e,class:"filter-item",click:function(){$(this).addClass("selected").parent().siblings().children().removeClass("selected")}}).appendTo(r.children().last()).attr("data-lang",e)})}function placeFilterListeners(e){$(".filter-wrapper").on("click",".filter-item",function(){var i=$(this).data("lang");i===$($(".filter-item")[0]).data("lang")?$(e).isotope({filter:function(){return!0}}):$(e).isotope({filter:function(){return tagText=$(this).data("portfolioTags"),found=tagText.search(i),found>-1}})}),$(e+" .grid-item").on("click",function(i){i.preventDefault(),$(this).hasClass("grid-item-selected")?$(this).removeClass("grid-item-selected"):($(e+" .grid-item").removeClass("grid-item-selected"),$(this).addClass("grid-item-selected")),$(e).isotope("layout")})}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRhY3QtZm9ybS5qcyIsImNvbnRhY3RfbWFwLmpzIiwiaW5pdC5qcyIsImxhbmd1YWdlLWNvbnRyb2xsZXIuanMiLCJuYXZpZ2F0aW9uLmpzIiwicG9ydGZvbGlvX2ZpbHRlci5qcyJdLCJuYW1lcyI6WyJpbml0Q29udGFjdEZvcm1MaXN0ZW5lciIsIiQiLCJvbiIsInN1Ym1pdCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImNvbnNvbGUiLCJsb2ciLCJpbnB1dEVsZW1lbnRzIiwiZmluZCIsImZvcm1WYWx1ZXMiLCJlYWNoIiwidGhpcyIsIm5hbWUiLCJ0eXBlIiwiY2hlY2tlZCIsInZhbHVlIiwiSlNPTiIsInN0cmluZ2lmeSIsImFqYXgiLCJ1cmwiLCJtZXRob2QiLCJkYXRhIiwic3VjY2VzcyIsInJlc3VsdCIsInRleHQiLCJyZW1vdmVDbGFzcyIsIk9iamVjdCIsImtleXMiLCJlcnJvcnMiLCJsZW5ndGgiLCJpbnB1dE5hbWUiLCJoaWRlIiwic2xpZGVEb3duIiwiYWRkQ2xhc3MiLCJhbmltYXRlQ3NzIiwic2hvdyIsInZhbCIsImRlbGF5Iiwic2xpZGVVcCIsImVycm9yIiwiaW5pdENvbnRhY3RNYXAiLCJzdHlsZUFycmF5IiwiZmVhdHVyZVR5cGUiLCJlbGVtZW50VHlwZSIsInN0eWxlcnMiLCJzYXR1cmF0aW9uIiwiZ2FtbWEiLCJtYXAiLCJnb29nbGUiLCJtYXBzIiwiTWFwIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNlbnRlciIsIm15UG9zaXRpb24iLCJzY3JvbGx3aGVlbCIsInN0cmVldFZpZXdDb250cm9sIiwicG9zaXRpb24iLCJDb250cm9sUG9zaXRpb24iLCJMRUZUX0JPVFRPTSIsIm1hcFR5cGVDb250cm9sIiwibWFwVHlwZUNvbnRyb2xPcHRpb25zIiwiQk9UVE9NX0xFRlQiLCJ6b29tQ29udHJvbCIsInpvb21Db250cm9sT3B0aW9ucyIsIkxFRlRfQ0VOVEVSIiwic3R5bGVzIiwiem9vbSIsIm15TWFwIiwiTWFya2VyIiwidGl0bGUiLCJpY29uIiwic2NhbGVkU2l6ZSIsIlNpemUiLCJwYW5CeSIsImhlaWdodCIsImxhdCIsImxuZyIsImdsb2JhbCIsInNldEludGVydmFsIiwiZm4iLCJleHRlbmQiLCJhbmltYXRpb25OYW1lIiwiY2FsbEJhY2tGdW5jIiwib25lIiwiaXNGdW5jdGlvbiIsImluaXRDYXJvdXNlbHMiLCJjYXJvdXNlbHNTZXR1cCIsImNhcm91c2VsIiwiaW50ZXJ2YWwiLCJwYXVzZSIsImkiLCJ3aW5kb3ciLCJzaXRlTGFuZ3MiLCJMYW5nIiwiYWN0aXZlTGFuZyIsImluaXQiLCJwcm90b3R5cGUiLCJnZXRLZXlWYWwiLCJrZXlWYWwiLCJzZWxmIiwidHJpbSIsImRhdGF0YWciLCJzd2l0Y2hMYW5nIiwic3dpdGNoVG9MYW5nIiwibnVtT2ZMYW5nRWxzIiwicmV0cmlldmVkRGF0YVRhZyIsIkxORyQiLCJzZWFyY2giLCJzdWJzdHIiLCJhdHRyIiwiY2FsbGJhY2tGdW5jIiwiZ2V0SlNPTiIsImRvbmUiLCJmYWlsIiwianFYSFIiLCJ0ZXh0U3RhdHVzIiwiZXJyb3JUaHJvd24iLCJhbHdheXMiLCJpbml0TGFuZyIsImpRdWVyeSIsIm5hdk1lbnVJbml0IiwiaHJlZiIsInRvTG93ZXJDYXNlIiwibWVudU5hbWUiLCJwYXRobmFtZSIsInNpYmxpbmdzIiwidW5kZWZpbmVkIiwiY29udHJvbGxlciIsImRlc3Ryb3kiLCJjb2xsYXBzZSIsInN0b3AiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwibG9hZCIsInN0YXR1cyIsInJlbW92ZSIsInBsYWNlQ29udGFjdExpc3RlbmVycyIsInBsYWNlQnV0dG9uTW92ZVVwTGlzdGVuZXIiLCJwbGFjZUxhbmdTd2l0Y2hMaXN0ZW5lciIsImluaXRDb21taXNpb25zR2FsbGVyeSIsImxpbmtUb0dhbGxlcnkiLCJpc01vYmlsZUZsYWciLCJTY3JvbGxNYWdpYyIsIkNvbnRyb2xsZXIiLCJnbG9iYWxTY2VuZU9wdGlvbnMiLCJ0cmlnZ2VySG9vayIsImR1cmF0aW9uIiwicGFyYWxsYXgxIiwiU2NlbmUiLCJ0cmlnZ2VyRWxlbWVudCIsInNldFR3ZWVuIiwieSIsImVhc2UiLCJMaW5lYXIiLCJlYXNlTm9uZSIsImFkZFRvIiwicGFyYWxsYXgyIiwiaW5pdFByaWNpbmdHYWxsZXJ5IiwiJHRoaXMiLCJhZGRFdmVudExpc3RlbmVyIiwiY2hpbGRyZW4iLCJoYXNDbGFzcyIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwiaW5uZXJXaWR0aCIsImV2ZW50IiwidHJpZ2dlciIsInNldENlbnRlciIsIm9mZlNldFkiLCJhY3R1YWxIZWlnaHQiLCJhY3R1YWxTY3JvbGxQb3MiLCJpcyIsImp1bXBIYXNoIiwiY3VycmVudFRhcmdldCIsImhhc2giLCJqdW1wUG9pbnQiLCJvZmZzZXQiLCJ0b3AiLCJ1cGRhdGUiLCJnYWxMaW5rIiwibG9jYXRpb24iLCJyZXBsYWNlIiwibXlTaXRlIiwiYWdlbnRzIiwibmF2aWdhdG9yIiwidXNlckFnZW50Iiwib3JpZW50YXRpb24iLCJicm9rZW5Db3VudCIsImltYWdlc0xvYWRlZCIsImluc3RhbmNlIiwiaW5zdGFudGlhdGVJc290b3BlR2FsbGVyeSIsIml0ZW1TZWxlY3RvciIsInN0YWdnZXIiLCJidWlsZEltZ0NhdGVnb3JpZXMiLCJwbGFjZUZpbHRlckxpc3RlbmVycyIsImZhZGVPdXQiLCJjc3MiLCJwcm9ncmVzcyIsImltYWdlIiwiaXNMb2FkZWQiLCJpbWciLCJ3aWR0aCIsInByb2dyZXNzZWRDb3VudCIsImltYWdlcyIsInBhcmVudCIsImVsIiwib3B0aW9ucyIsImlzb3RvcGUiLCJsaXN0RWxlbWVudCIsImltZ0NvbnRhaW5lcnMiLCIkaW1nQ29udGFpbmVycyIsIiRidXR0b25zIiwidGFnZ2VkIiwiaW1nQ29udGFpbmVyIiwidGFncyIsInNwbGl0IiwiZm9yRWFjaCIsInRhZ05hbWUiLCJwdXNoIiwiYXBwZW5kVG8iLCJjbGFzcyIsImNsaWNrIiwiZXEiLCJsYXN0IiwiZ3JpZEVsIiwiZmlsdGVyVmFsdWUiLCJmaWx0ZXIiLCJ0YWdUZXh0IiwiZm91bmQiXSwibWFwcGluZ3MiOiJBQUFBLFFBQVNBLDJCQUlMQyxFQUFFLDJCQUEyQkMsR0FBSSxRQUFTLFdBRXRDRCxFQUFHLGlCQUFrQkUsV0FHekJGLEVBQUUsaUJBQWlCRSxPQUFPLFNBQVNDLEdBQy9CQSxFQUFFQyxpQkFFRkMsUUFBUUMsSUFBSSxpQ0FFWixJQUFJQyxHQUFnQlAsRUFBRSxpQkFBaUJRLEtBQUssMkJBQ3hDQyxJQUVKRixHQUFjRyxLQUFLLFdBQ1hDLEtBQUtDLE9BQ1ksWUFBYkQsS0FBS0UsTUFBbUMsU0FBYkYsS0FBS0UsS0FDNUJGLEtBQUtHLFVBQ0xMLEVBQVdFLEtBQUtDLE1BQVFELEtBQUtJLE9BR2pDTixFQUFXRSxLQUFLQyxNQUFRRCxLQUFLSSxTQUt6Q1YsUUFBUUMsSUFBSSxnQkFBa0JVLEtBQUtDLFVBQVVSLElBRTdDVCxFQUFFa0IsTUFDRUMsSUFBSyxnQ0FDTEMsT0FBUSxPQUNSQyxLQUFNWixFQUNOYSxRQUFTLFNBQVNDLEdBUWQsR0FOQWxCLFFBQVFDLElBQUksNkJBQStCVSxLQUFLQyxVQUFVTSxJQUUxRHZCLEVBQUUsc0JBQXNCd0IsS0FBSyxJQUM3QnhCLEVBQUUsK0NBQStDeUIsWUFBWSxjQUM3RHpCLEVBQUUsZ0JBQWdCd0IsS0FBSyxJQUVuQkUsT0FBT0MsS0FBS0osRUFBT0ssUUFBUUMsT0FBUyxFQUNwQyxJQUFLLEdBQUlDLEtBQWFQLEdBQU9LLE9BQ3pCdkIsUUFBUUMsSUFBSSxZQUFjd0IsRUFBWSxLQUFPUCxFQUFPSyxPQUFPRSxJQUUzRDlCLEVBQUUsc0JBQXdCOEIsRUFBWSxNQUFNTixLQUFLRCxFQUFPSyxPQUFPRSxJQUFZQyxPQUFPQyxZQUNsRmhDLEVBQUUsV0FBYThCLEVBQVksTUFBTUcsU0FBUyxjQUMxQ2pDLEVBQUUsV0FBYThCLEVBQVksTUFBTUksV0FBVyxhQUdoRDdCLFNBQVFDLElBQUksc0NBRVpOLEVBQUUsZ0JBQWdCd0IsS0FBSywwQ0FDdkJ4QixFQUFFLGdCQUFnQnlCLFlBQVksZ0JBQWdCUSxTQUFTLGlCQUV2RGpDLEVBQUUsZ0JBQWdCbUMsT0FBT0QsV0FBVyxXQUFZLFdBQzVDbEMsRUFBRSxTQUFTb0MsSUFBSSxJQUNmcEMsRUFBRSxZQUFZb0MsSUFBSSxJQUNsQnBDLEVBQUUsZ0JBQWdCcUMsTUFBTSxLQUFNQyxhQUkxQ0MsTUFBTyxXQUNIdkMsRUFBRSxnQkFBZ0J5QixZQUFZLGlCQUM5QnpCLEVBQUUsZ0JBQWdCaUMsU0FBUyxnQkFDM0JqQyxFQUFFLGdCQUFnQndCLEtBQUssd0RBQ3ZCeEIsRUFBRSxnQkFBZ0JnQztBQzlEaEMsUUFBU1Esa0JBR1AsR0FBSUMsS0FFQUMsWUFBZSxNQUNmQyxZQUFlLE1BQ2ZDLFVBRVFDLFlBQWUsTUFHZkMsTUFBUyxPQU9qQkMsRUFBTSxHQUFJQyxRQUFPQyxLQUFLQyxJQUFJQyxTQUFTQyxlQUFlLGdCQUNsREMsT0FBUUMsV0FDUkMsYUFBYSxFQUNiQyxtQkFBbUIsRUFDbkJBLG1CQUNFQyxTQUFVVCxPQUFPQyxLQUFLUyxnQkFBZ0JDLGFBRXhDQyxnQkFBZ0IsRUFDaEJDLHVCQUNJSixTQUFVVCxPQUFPQyxLQUFLUyxnQkFBZ0JJLGFBRTFDQyxhQUFhLEVBQ2JDLG9CQUNFUCxTQUFVVCxPQUFPQyxLQUFLUyxnQkFBZ0JPLGFBR3hDQyxPQUFRekIsRUFDUjBCLEtBQU0sSUFHVkMsT0FBUXJCLENBR0ssSUFBSUMsUUFBT0MsS0FBS29CLFFBQzNCdEIsSUFBS0EsRUFDTFUsU0FBVUgsV0FDVmdCLE1BQU8sbUJBQ1BDLE1BQ0VwRCxJQUFLLDRDQUNMcUQsV0FBWSxHQUFJeEIsUUFBT0MsS0FBS3dCLEtBQUssSUFBSyxPQUkxQ0wsT0FBTU0sTUFBTSxHQUFJMUUsRUFBRSxjQUFjMkUsVUF2RGxDLEdBQUlQLE9BQ0FkLFlBQWNzQixJQUFLLFVBQVdDLElBQUs7QUNKekM3RSxFQUFFLFNBQVM4RSxHQUtQOUUsRUFBRSxtQkFBbUIrQixNQUVIZ0QsYUFBWSxXQUN0Qi9FLEVBQUUsYUFBYWtDLFdBQVcsV0FDNUIsSUFHTmxDLEdBQUVnRixHQUFHQyxRQUNEL0MsV0FBWSxTQUFVZ0QsRUFBZUMsR0FRakMsTUFOQXhFLE1BQUtzQixTQUFTLFlBQWNpRCxHQUFlRSxJQUR4QiwrRUFDMEMsV0FDekRwRixFQUFFVyxNQUFNYyxZQUFZLFlBQWN5RCxHQUM5QmxGLEVBQUVxRixXQUFXRixJQUNiQSxNQUdEeEUsUUFJZjJFLGNBQWdCLFdBQ1pqRixRQUFRQyxJQUFJLHdCQWtDWixLQUFLLEdBakNEaUYsS0FFUUMsU0FBVSxpQkFDVkMsU0FBUyxJQUNUQyxNQUFPLFNBR1BGLFNBQVUsa0JBQ1ZDLFNBQVMsSUFDVEMsTUFBTyxTQUdQRixTQUFVLHNCQUNWQyxTQUFTLElBQ1RDLE1BQU8sU0FHUEYsU0FBVSxrQkFDVkMsU0FBUyxJQUNUQyxNQUFPLFNBR1BGLFNBQVUsd0JBQ1ZDLFNBQVMsSUFDVEMsTUFBTyxTQUdQRixTQUFVLHFCQUNWQyxTQUFTLElBQ1RDLE1BQU8sU0FJVkMsRUFBRSxFQUFHQSxFQUFFSixFQUFlMUQsT0FBTyxFQUFFOEQsSUFDcEMzRixFQUFFdUYsRUFBZUksR0FBYSxVQUFHSCxVQUM3QkMsU0FBVUYsRUFBZUksR0FBYSxZQUtsRGIsRUFBT1EsY0FBZ0JBLGVBRXpCTTtDQ3JFRCxTQUFTZCxFQUFPOUUsR0FFaEIsR0FDSTZGLElBQWEsS0FBSyxNQUVsQkMsRUFBTyxTQUFTQyxHQUNuQixNQUFPLElBQUlELEdBQUtFLEtBQUtELEdBR3RCRCxHQUFLRyxXQUNKQyxVQUFXLFNBQVNDLEdBRW5CLE1BREFDLE1BQU96RixLQUNBLFdBQ053RixFQUFTQSxFQUFPRSxNQUVoQixLQUFLLEdBREQ5RSxHQUNLb0UsRUFBRSxFQUFHQSxHQUFLRyxFQUFLekUsS0FBS1EsT0FBTyxFQUFHOEQsSUFBSyxDQUMzQyxHQUFJRyxFQUFLekUsS0FBS3NFLEdBQUdXLFVBQVVILEVBRTFCLE1BREE1RSxHQUFTdUUsRUFBS3pFLEtBQUtzRSxHQUFHUyxLQUFLTCxXQUczQnhFLEdBQVMsR0FHWCxNQUFPQSxPQUdUZ0YsV0FBWSxTQUFTQyxHQUNwQkosS0FBT3pGLElBRVAsS0FBSyxHQUREOEYsR0FBZXpHLEVBQUUsZUFBZTZCLE9BQzNCOEQsRUFBRyxFQUFFQSxHQUFHYyxFQUFhLEVBQUVkLElBQUssQ0FDcEMsR0FBSWUsR0FBbUIxRyxFQUFFQSxFQUFFLGVBQWUyRixJQUFJdEUsS0FBSyxPQUNuRE4sT0FBUTRGLEtBQUtILEdBQWNOLFVBQVVRLEdBQ2xCLEtBQWYzRixNQUFNc0YsU0FDTHRGLE1BQU02RixPQUFPLFNBQVMsR0FDekI3RixNQUFRQSxNQUFNOEYsT0FBTyxFQUFFOUYsTUFBTWMsUUFDN0I3QixFQUFFQSxFQUFFLGVBQWUyRixJQUFJbUIsS0FBSyxjQUFjL0YsUUFFMUNmLEVBQUVBLEVBQUUsZUFBZTJGLElBQUluRSxLQUFLbUYsS0FBS0gsR0FBY04sVUFBVVEsSUFBbUJ4RSxXQUFXLGFBUTVGNEQsRUFBS0UsS0FBTyxTQUFTRCxHQUNUcEYsS0FDTm9GLFdBQWFBLEdBQWNGLEVBQVUsSUFHM0NDLEVBQUtFLEtBQUtDLFVBQVlILEVBQUtHLFVBQzNCbkIsRUFBT2dCLEtBQU9oQixFQUFPNkIsS0FBT2IsRUFRNUIsU0FBdUIzRSxFQUFLNEYsR0FDZi9HLEVBQUVnSCxRQUFRN0YsRUFBSyxXQUN4QmQsUUFBUUMsSUFBSyxxQkFFYjJHLEtBQUssU0FBUzVGLEdBQ2RoQixRQUFRQyxJQUFLLDBCQUVieUcsRUFBYTFGLEtBRWI2RixLQUFLLFNBQVNDLEVBQU9DLEVBQVlDLEdBQ2pDaEgsUUFBUUMsSUFBSyxpQkFDYkQsUUFBUUMsSUFBSTZHLEtBRVpHLE9BQU8sZUF0RUYsMEJBbURTLFNBQVNqRyxHQUMxQnlFLEVBQUt6RSxLQUFPQSxDQUNaLElBQUlrRyxHQUFXdkgsRUFBRSxvQkFBb0J3QixPQUFPNkUsTUFDNUNNLE1BQUtZLEdBQVVoQixXQUFXZ0IsTUFxQjFCM0IsT0FBUTRCO0FDM0VWeEgsRUFBRSxTQUFTOEUsR0F1QlYsUUFBUzJDLEtBRUx6SCxFQUFFLGVBQWVDLEdBQUcsbUJBQW9CLFdBQ3hDRCxFQUFFLHlCQUF5QmlDLFNBQVMsbUNBRXRDakMsRUFBRSxlQUFlQyxHQUFHLG1CQUFvQixXQUN0Q0QsRUFBRSx5QkFBeUJ5QixZQUFZLG1DQUd2Q3pCLEVBQUUsYUFBYUMsR0FBSSxRQUFTLFNBQVNFLEdBQ2pDQSxFQUFFQyxnQkFDRixJQUFJZSxHQUFNUixLQUFLK0csS0FBS3JCLE9BQU9zQixjQUN2QkMsRUFBV2pILEtBQUtrSCxTQUFTeEIsT0FBT3NCLGFBRXBDM0gsR0FBRVcsTUFBTW1ILFNBQVMsYUFBYXJHLFlBQVksVUFDMUN6QixFQUFFVyxNQUFNc0IsU0FBUyxjQUVOOEYsS0FBYkMsR0FBdUMsT0FBYkEsSUFDN0JBLEVBQWFBLEVBQVdDLFNBQVEsSUFNakNqSSxFQUFFLGVBQWVrSSxTQUFTLFFBQ3BCbEksRUFBRSxtQkFBbUJtQyxPQUVyQm5DLEVBQUUsbUJBQW1Ca0MsV0FBVyxjQUFlLFdBRTlDLEdBQUlrRSxHQUFPekYsSUFDWFgsR0FBRSxhQUFhbUksT0FBT0MsU0FBU0MsVUFBVSxHQUFJLE1BRTdDckksRUFBRSxpQkFBaUJzSSxLQUFLbkgsRUFBTSxtQkFBb0IsU0FBU0ksRUFBT2dILEdBRWxELFlBQVhBLEdBRVR2SSxFQUFFb0csR0FBTW9DLFNBQ0Z4SSxFQUFFLGlCQUFpQitCLE9BQ25CL0IsRUFBRSxtQkFBbUIrQixPQUNyQi9CLEVBQUUsaUJBQWlCbUMsT0FDbkJuQyxFQUFFLGlCQUFpQmtDLFdBQVcsWUFFOUJ1RyxJQUNBQyxJQUNBQyxHQUF3QixHQUNwQmYsRUFBU2hCLE9BQU8sc0JBQXNCLEVBQ3pDZ0Msd0JBQ1VoQixFQUFTaEIsT0FBTyxpQkFBaUIsR0FDM0NwRSxpQkFDQXpDLDJCQUNVNkgsRUFBU2hCLE9BQU8sZUFBZSxHQUN6Q3RCLGdCQUNBdUQsSUFDS0MsSUFDSmQsRUFBYSxHQUFJZSxhQUFZQyxZQUFZQyxvQkFBcUJDLFlBQWEsVUFBV0MsU0FBVSxVQUNoR0MsRUFBWSxHQUFJTCxhQUFZTSxPQUFPQyxlQUFnQixlQUM5Q0MsU0FBUyxvQkFBcUJDLEVBQUcsTUFBT0MsS0FBTUMsT0FBT0MsV0FFckRDLE1BQU01QixLQUdGSixFQUFTaEIsT0FBTyxlQUFlLEdBQ3pDdEIsZ0JBQ0t3RCxJQUNKZCxFQUFhLEdBQUllLGFBQVlDLFlBQVlDLG9CQUFxQkMsWUFBYSxVQUFXQyxTQUFVLFVBQ2hHVSxFQUFZLEdBQUlkLGFBQVlNLE9BQU9DLGVBQWdCLGVBQ3BEQyxTQUFTLG9CQUFxQkMsRUFBRyxNQUFPQyxLQUFNQyxPQUFPQyxXQUVyREMsTUFBTTVCLEtBRUlKLEVBQVNoQixPQUFPLGlCQUFpQixHQUMzQ2tELHNCQUVvQixVQUFYdkIsSUFDVnZJLEVBQUUsbUJBQW1CK0IsT0FDckIxQixRQUFRQyxJQUFJLHVDQVN2QixRQUFTbUksS0FDUnpJLEVBQUUsWUFBWUMsR0FBRyxRQUFTLFNBQVNFLEdBQ2xDQSxFQUFFQyxnQkFDRixJQUFJMkosR0FBTS9KLEVBQUVXLEtBd0JaLElBdEJBaUYsT0FBT29FLGlCQUFpQixvQkFBcUIsV0FDeENELEVBQU1FLFdBQVdDLFNBQVMsZUFDekJ0RSxPQUFPdUUsV0FBVyw0QkFBNEJDLFNBQVd4RSxPQUFPeUUsV0FBVyxJQUM5RXJLLEVBQUUsZ0JBQWdCb0ksU0FDakJ6RCxPQUFRLFFBQ1AsSUFBSyxXQUNOM0IsT0FBT0MsS0FBS3FILE1BQU1DLFFBQVFuRyxNQUFPLFVBQ2pDQSxNQUFNb0csVUFBVWxILFlBQ2hCYyxNQUFNTSxNQUFNLEdBQUkxRSxFQUFFLGNBQWMyRSxZQUdqQzNFLEVBQUUsZ0JBQWdCb0ksU0FDakJ6RCxPQUFRLFFBQ1AsSUFBSyxXQUNOM0IsT0FBT0MsS0FBS3FILE1BQU1DLFFBQVFuRyxNQUFPLFVBQ2pDQSxNQUFNb0csVUFBVWxILFlBQ2hCYyxNQUFNTSxNQUFNLEdBQUkxRSxFQUFFLGNBQWMyRSxlQUlqQyxHQUVDb0YsRUFBTUUsV0FBV0MsU0FBUyxhQVM3QixNQVJBSCxHQUFNRSxXQUFXeEksWUFBWSxhQUFhUSxTQUFTLG1CQUNuRGpDLEdBQUUsZ0JBQWdCb0ksU0FDakJ6RCxPQUFRLFNBQ1AsSUFBSyxXQUNOM0IsT0FBT0MsS0FBS3FILE1BQU1DLFFBQVFuRyxNQUFPLFVBQ2pDQSxNQUFNb0csVUFBVWxILFlBQ2hCYyxNQUFNTSxNQUFNLEdBQUkxRSxFQUFFLGNBQWMyRSxXQUd2Qm9GLEdBQU1FLFdBQVdDLFNBQVMsaUJBQ3BDSCxFQUFNRSxXQUFXeEksWUFBWSxlQUFlUSxTQUFTLGFBQ2pEMkQsT0FBT3VFLFdBQVcsNEJBQTRCQyxTQUFXeEUsT0FBT3lFLFdBQVcsSUFDOUVySyxFQUFFLGdCQUFnQm9JLFNBQ2pCekQsT0FBUSxRQUNQLElBQUssV0FDTjNCLE9BQU9DLEtBQUtxSCxNQUFNQyxRQUFRbkcsTUFBTyxVQUNqQ0EsTUFBTW9HLFVBQVVsSCxZQUNoQmMsTUFBTU0sTUFBTSxHQUFJMUUsRUFBRSxjQUFjMkUsWUFHakMzRSxFQUFFLGdCQUFnQm9JLFNBQ2pCekQsT0FBUSxRQUNQLElBQUssV0FDTjNCLE9BQU9DLEtBQUtxSCxNQUFNQyxRQUFRbkcsTUFBTyxVQUNqQ0EsTUFBTW9HLFVBQVVsSCxZQUNoQmMsTUFBTU0sTUFBTSxHQUFJMUUsRUFBRSxjQUFjMkUsZUFPckMsUUFBUytELEtBRVIsR0FBSStCLEdBQVEsQ0FDWnpLLEdBQUU0RixRQUFRM0YsR0FBRyxTQUFVLFdBQ3RCLEdBQUl5SyxHQUFlMUssRUFBRTRGLFFBQVFqQixTQUN6QmdHLEVBQWtCM0ssRUFBRTRGLFFBQVF5QyxXQUVoQ29DLEdBQVVDLEVBQWEsRUFFbkJDLEVBQWdCLElBQUlBLEVBQWdCLElBS2xDRCxFQUFhRCxHQUFTRSxFQUFpQixFQUN4QzNLLEVBQUUsZ0JBQWdCNEssR0FBRyxhQUN4QjVLLEVBQUUsZ0JBQWdCa0MsV0FBVyxZQUFhLFdBQ3pDbEMsRUFBRSxnQkFBZ0IrQixPQUNsQi9CLEVBQUUsYUFBYW1DLE9BQU9ELFdBQVcsY0FNOUJsQyxFQUFFLGdCQUFnQjRLLEdBQUcsYUFDeEI1SyxFQUFFLGFBQWFrQyxXQUFXLFlBQVksV0FDckNsQyxFQUFFLGFBQWErQixPQUNmL0IsRUFBRSxnQkFBZ0JtQyxPQUNsQm5DLEVBQUUsZ0JBQWdCa0MsV0FBVyxnQkFLbENsQyxFQUFFLGdCQUFnQkMsR0FBRyxRQUFTLFdBQzdCRCxFQUFFLGFBQWFtSSxPQUFPQyxTQUFTQyxVQUFVLEdBQUksTUFBTyxXQUVyRHJJLEVBQUUsYUFBYUMsR0FBRyxRQUFTLFNBQVNFLEdBQ25DRSxRQUFRQyxJQUFJSCxHQUNaQSxFQUFFQyxnQkFDRixJQUFJeUssR0FBVzFLLEVBQUUySyxjQUFjQyxLQUMzQkMsRUFBWWhMLEVBQUU2SyxHQUFVSSxTQUFTQyxHQUNyQ2xMLEdBQUUsYUFBYW1JLE9BQU9DLFNBQVNDLFVBQVUyQyxHQUFZLE1BQU8sV0FLOUQsUUFBU3JDLEdBQXdCd0MsR0FDaEMsR0FBSUEsR0FBU0EsSUFBVSxFQUNuQnBGLEVBQWEvRixFQUFFLHVCQUF1QndCLE9BQU82RSxNQUU3QzhFLElBQVN4RSxLQUFLWixHQUFZUSxXQUFXUixHQUV6Qy9GLEVBQUUsdUJBQXVCQyxHQUFHLFFBQVMsV0FDakIsT0FBZjhGLEdBQ0hBLEVBQWEsS0FDYi9GLEVBQUUsdUJBQXVCd0IsS0FBS3VFLEdBQzlCWSxLQUFLWixHQUFZUSxXQUFXUixJQUNILE9BQWZBLElBQ1ZBLEVBQWEsS0FDYi9GLEVBQUUsdUJBQXVCd0IsS0FBS3VFLEdBQzlCWSxLQUFLWixHQUFZUSxXQUFXUixJQUU3Qi9GLEVBQUVXLE1BQU11QixXQUFXLGNBSXJCLFFBQVMyRyxLQUVSN0ksRUFBRSxhQUFhQyxHQUFHLFFBQVEsU0FBU0UsR0FDbENBLEVBQUVDLGNBQ0YsSUFBSWdMLEdBQVVwTCxFQUFFVyxNQUFNVSxLQUFLLFFBQVFnRixPQUMvQmxGLEVBQU15RSxPQUFPeUYsU0FBUzNELElBQ3RCdkcsR0FBSXlGLE9BQU8sZUFBaUIsRUFDL0J6RixFQUFNQSxFQUFJbUssUUFBUSxhQUFhLHFCQUUvQm5LLEdBQVksb0JBSVBuQixFQUFFLG1CQUFtQmtDLFdBQVcsY0FBZSxXQUM5Q2xDLEVBQUUsaUJBQWlCK0IsT0FDbkIvQixFQUFFLGlCQUFpQnNJLEtBQUtuSCxFQUFNLG1CQUFvQixXQUNqRG5CLEVBQUUseUJBQXlCeUIsWUFBWSxVQUN2Q3pCLEVBQUUsbURBQW1EaUMsU0FBUyxVQUU5RGpDLEVBQUUsaUJBQWlCbUMsT0FDbkJuQyxFQUFFLGlCQUFpQmtDLFdBQVcsWUFDOUJ1RyxJQUNBQyxJQUNBQyxJQUNBQyxzQkFBc0IsV0FDckI1SSxFQUFFLGdCQUFnQlUsS0FBSyxTQUFTaUYsR0FDL0IsR0FBSTNGLEVBQUVXLE1BQU1hLE9BQU9tRyxjQUFjdEIsU0FBVytFLEVBRTNDLFdBREFwTCxHQUFFVyxNQUFNNEosUUFBUSxtQkFuUTdCLEdBQUl2QyxHQUFZb0IsRUFBV1MsQ0FDM0IvRSxHQUFPeUcsU0FZUCxJQUFJekMsR0FWSixXQUNJLEdBQUkwQyxJQUFVLFVBQVcsUUFBUyxTQUFVLE9BQVEsYUFDcEQsS0FBSTdGLElBQUs2RixHQUNMLEdBQUlDLFVBQVVDLFVBQVUvRCxjQUFjZixPQUFPNEUsRUFBTzdGLEtBQUssT0FBNEJvQyxLQUFyQm5DLE9BQU8rRixZQUNuRSxPQUFPLENBR2YsUUFBTyxJQW9RWCxJQWhRQTdHLEVBQU95RyxPQUFPekMsYUFBZUEsR0FJVixJQUFmQSxHQUNIOUksRUFBRSxRQUFRaUMsU0FBUyxhQTJQZjZHLEVBQ0UsR0FBSWQsR0FBYSxHQUFJZSxhQUFZQyxZQUFZQyxvQkFBcUJDLFlBQWEsVUFBV0MsU0FBVSxVQUNoR0MsRUFBWSxHQUFJTCxhQUFZTSxPQUFPQyxlQUFnQixlQUNsREMsU0FBUyxvQkFBcUJDLEVBQUcsTUFBT0MsS0FBTUMsT0FBT0MsV0FFckRDLE1BQU01QixFQUlsQmEsS0FDQXBCLElBQ0FnQixJQUNBQyxJQUNBQyxJQUdBN0QsRUFBT3lHLE9BQU85RCxZQUFjQSxFQUM1QjNDLEVBQU95RyxPQUFPOUMsc0JBQXdCQSxFQUN0QzNELEVBQU95RyxPQUFPN0MsMEJBQTRCQSxFQUMxQzVELEVBQU95RyxPQUFPNUMsd0JBQTBCQSxHQUV2Qy9DO0FDcFNELFFBQVNnRCx1QkFBc0I3QixHQUM5QixHQUFJQSxHQUFlQSxHQUFnQixhQUMvQjZFLEVBQWMsQ0FFbEI1TCxHQUFFLGtDQUFrQytCLE9BQ3BDL0IsRUFBRSxrQ0FBa0NtQyxPQUNwQ25DLEVBQUUsb0JBQW9CaUMsU0FBUyxhQUUvQmpDLEVBQUUsZUFBZTZMLGVBQ2R2RSxPQUFRLFNBQVV3RSxHQUNqQnpMLFFBQVFDLElBQUksMENBRWZ5TCwwQkFBMEIsU0FDdkJDLGFBQWMsYUFDZEMsUUFBUyxLQUdUQyxtQkFBbUIsb0JBQW9CLGlDQUN2Q0MscUJBQXFCLFNBRXhCbk0sRUFBRSxrQ0FBa0NvTSxRQUFRLEtBQ3pDcE0sRUFBRSxnQ0FBZ0N3QixLQUFLLGlCQUN2Q3hCLEVBQUUsbUJBQW1CcU0sSUFBSSxtQkFBbUIsU0FDNUNyTSxFQUFFLGVBQWVxQyxNQUFNLEtBQU1DLFFBQVEsS0FDckN0QyxFQUFFLG9CQUFvQnlCLFlBQVksYUFFbENzRixNQUdERSxLQUFNLFdBQ0w1RyxRQUFRQyxJQUFJLHlEQUdiNEcsS0FBTSxXQUNMN0csUUFBUUMsSUFBS3NMLEVBQWMsMkVBQzNCNUwsRUFBRSxlQUFlcUMsTUFBTSxLQUFNQyxRQUFRLE9BRXhDZ0ssU0FBVSxTQUFVUixFQUFVUyxHQUV2QkEsRUFBTUMsVUFDVHhNLEVBQUV1TSxFQUFNRSxLQUFLM0UsU0FBUyx1QkFBdUIvRixPQUM3Qy9CLEVBQUV1TSxFQUFNRSxLQUFLM0UsU0FBUyx1QkFBdUI1RixXQUFXLFlBQVlDLE9BQ3ZFbkMsRUFBRSxtQkFBbUIwTSxNQUFPWixFQUFTYSxnQkFBZ0JiLEVBQVNjLE9BQU8vSyxPQUFRLElBQU0sT0FFbkYrSixJQUNBNUwsRUFBRXVNLEVBQU1FLEtBQUtJLFNBQVNyRSxZQU16QixRQUFTc0Isc0JBRVIsR0FBSThCLEdBQWMsQ0FDbEI1TCxHQUFFLG9DQUFvQ2lDLFNBQVMsYUFFL0NqQyxFQUFFLFlBQVk2TCxlQUNYdkUsT0FBUSxTQUFVd0UsR0FDaEJ6TCxRQUFRQyxJQUFJLHVDQUVaeUwsMEJBQTBCLGlCQUMxQkMsYUFBYyxxQkFDZEMsUUFBUyxLQUdUQyxtQkFBbUIsb0JBQW9CLHVDQUN2Q0MscUJBQXFCLGlCQUNyQm5NLEVBQUUsb0NBQW9DeUIsWUFBWSxlQUduRHdGLEtBQU0sV0FDTDVHLFFBQVFDLElBQUksc0RBR2I0RyxLQUFNLFdBQ0w3RyxRQUFRQyxJQUFLc0wsRUFBYywwRUFFOUJVLFNBQVUsU0FBVVIsRUFBVVMsR0FFdEJBLEVBQU1DLFdBQ2JaLElBQ0E1TCxFQUFFdU0sRUFBTUUsS0FBS0ksU0FBU3JFLFlBTTFCLFFBQVN1RCwyQkFBMEJlLEVBQUdDLEdBQ3JDL00sRUFBRThNLEdBQUlFLFFBQVFELEdBR2YsUUFBU2Isb0JBQW1CZSxFQUFZQyxHQUV2QyxHQUFJQyxHQUFpQm5OLEVBQUVrTixHQUNuQkUsRUFBV3BOLEVBQUVpTixHQUNiSSxJQUVKRCxHQUFTbkQsV0FBV3pCLFNBRXBCMkUsRUFBZXpNLEtBQUssV0FDbkIsR0FBSTRNLEdBQWEzTSxLQUNiNE0sRUFBT3ZOLEVBQUVXLE1BQU1VLEtBQUssaUJBRXBCa00sSUFDSEEsRUFBS0MsTUFBTSxLQUFLQyxRQUFRLFNBQVNDLEdBQ2hDQSxFQUFVQSxFQUFRckgsT0FDRyxNQUFqQmdILEVBQU9LLEtBQ1ZMLEVBQU9LLE9BRVJMLEVBQU9LLEdBQVNDLEtBQUtMLE9BS3hCRixFQUFTbkwsU0FBUyxrQkFDbEJqQyxFQUFFLFNBQVM0TixTQUFTUixHQUVwQnBOLEVBQUUsUUFDRHdCLEtBQU0sTUFDTnFNLE1BQU8sdUJBQ1BDLE1BQU8sV0FDTjlOLEVBQUVXLE1BQU1zQixTQUFTLFlBQVk0SyxTQUFTL0UsV0FBV21DLFdBQVd4SSxZQUFZLGVBRXZFbU0sU0FBU1IsRUFBU25ELFdBQVc4RCxHQUFHLElBQUlqSCxLQUFLLFlBQVksT0FFeEQ5RyxFQUFFLHVFQUF1RTROLFNBQVNSLEdBRWxGcE4sRUFBRVUsS0FBSzJNLEVBQVEsU0FBU0ssR0FDdkIxTixFQUFFLFNBQVM0TixTQUFTUixHQUVwQnBOLEVBQUUsUUFDRHdCLEtBQU1rTSxFQUNORyxNQUFPLGNBQ1BDLE1BQU8sV0FDTjlOLEVBQUVXLE1BQU1zQixTQUFTLFlBQVk0SyxTQUFTL0UsV0FBV21DLFdBQVd4SSxZQUFZLGVBRXZFbU0sU0FBU1IsRUFBU25ELFdBQVcrRCxRQUFRbEgsS0FBSyxZQUFZNEcsS0FLM0QsUUFBU3ZCLHNCQUFxQjhCLEdBQzFCak8sRUFBRSxtQkFBbUJDLEdBQUksUUFBUyxlQUFnQixXQUNqRCxHQUFJaU8sR0FBY2xPLEVBQUVXLE1BQU1VLEtBQUssT0FJM0I2TSxLQUFnQmxPLEVBQUVBLEVBQUUsZ0JBQWdCLElBQUlxQixLQUFLLFFBQ2hEckIsRUFBRWlPLEdBQVFqQixTQUNWbUIsT0FBUSxXQUNQLE9BQU8sS0FJWG5PLEVBQUVpTyxHQUFRakIsU0FDUG1CLE9BQVEsV0FHUCxNQUZBQyxTQUFTcE8sRUFBRVcsTUFBTVUsS0FBSyxpQkFDdEJnTixNQUFRRCxRQUFReEgsT0FBT3NILEdBQ25CRyxPQUFRLE9BVWxCck8sRUFBRWlPLEVBQVMsZUFBZWhPLEdBQUksUUFBUyxTQUFTRSxHQUMvQ0EsRUFBRUMsaUJBQ0VKLEVBQUVXLE1BQU11SixTQUFTLHNCQUNwQmxLLEVBQUVXLE1BQU1jLFlBQVksdUJBRXBCekIsRUFBRWlPLEVBQVMsZUFBZXhNLFlBQVksc0JBQ3RDekIsRUFBRVcsTUFBTXNCLFNBQVMsdUJBRWxCakMsRUFBRWlPLEdBQVFqQixRQUFRIiwiZmlsZSI6InNjcmlwdHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBpbml0Q29udGFjdEZvcm1MaXN0ZW5lcigpIHtcbiAgICBcbiAgICAvL2NvbnNvbGUubG9nKFwiaW5zaWRlIG9mIGEgZnVuY3Rpb24gSW5pdEZvcm1MaXN0ZW5lclwiKTtcbiAgICBcbiAgICAkKFwiI2NvbnRhY3QtZm9ybSAuYnRuLXNpdGVcIikub24oIFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJjbGljayBldmVudDogLmNvbnRhY3Qtc3VibWl0IGJ1dHRvblwiKTtcbiAgICAgICAgJCggXCIjY29udGFjdC1mb3JtXCIgKS5zdWJtaXQoKTtcbiAgICB9KTtcblxuICAgICQoXCIjY29udGFjdC1mb3JtXCIpLnN1Ym1pdChmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBjb25zb2xlLmxvZyhcIkZvcm0gc3VibWl0dGVkIGxpc3RlbmVyIGNhbGxlZFwiKTtcblxuICAgICAgICB2YXIgaW5wdXRFbGVtZW50cyA9ICQoXCIjY29udGFjdC1mb3JtXCIpLmZpbmQoJ2lucHV0LCB0ZXh0YXJlYSwgc2VsZWN0Jyk7XG4gICAgICAgIHZhciBmb3JtVmFsdWVzID0ge307XG5cbiAgICAgICAgaW5wdXRFbGVtZW50cy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMubmFtZSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnR5cGUgPT0gXCJjaGVja2JveFwiIHx8IHRoaXMudHlwZSA9PSBcInJhZGlvXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybVZhbHVlc1t0aGlzLm5hbWVdID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybVZhbHVlc1t0aGlzLm5hbWVdID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coXCJmb3JtVmFsdWVzIDogXCIgKyBKU09OLnN0cmluZ2lmeShmb3JtVmFsdWVzKSk7XG5cbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogXCJhc3NldHMvcGhwL2hhbmRsZWFqYXhmb3JtLnBocFwiLFxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGRhdGE6IGZvcm1WYWx1ZXMsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXN1bHQpIHtcblxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQUpBWCBwb3N0IHJlc3VsdCByZXN1bHQgOiBcIiArIEpTT04uc3RyaW5naWZ5KHJlc3VsdCkpO1xuXG4gICAgICAgICAgICAgICAgJCgnZGl2W2RhdGEtZXJyb3ItaWRdJykudGV4dChcIlwiKTtcbiAgICAgICAgICAgICAgICAkKCcjY29udGFjdC1mb3JtIGlucHV0LCAjY29udGFjdC1mb3JtIHRleHRhcmVhJykucmVtb3ZlQ2xhc3MoJ2Zvcm0tZXJyb3InKTtcbiAgICAgICAgICAgICAgICAkKCcjc2VuZC1yZXN1bHQnKS50ZXh0KFwiXCIpO1xuXG4gICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHJlc3VsdC5lcnJvcnMpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5wdXROYW1lIGluIHJlc3VsdC5lcnJvcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3IgaW4gXCIgKyBpbnB1dE5hbWUgKyBcIjogXCIgKyByZXN1bHQuZXJyb3JzW2lucHV0TmFtZV0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCdkaXZbZGF0YS1lcnJvci1pZD1cIicgKyBpbnB1dE5hbWUgKyAnXCJdJykudGV4dChyZXN1bHQuZXJyb3JzW2lucHV0TmFtZV0pLmhpZGUoKS5zbGlkZURvd24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJypbbmFtZT1cIicgKyBpbnB1dE5hbWUgKyAnXCJdJykuYWRkQ2xhc3MoJ2Zvcm0tZXJyb3InKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJypbbmFtZT1cIicgKyBpbnB1dE5hbWUgKyAnXCJdJykuYW5pbWF0ZUNzcygnc2hha2UnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBbGwgdmFsaWRhdGlvbiBwYXNzZWQgc3VjY2VzZnVsbHkhXCIpO1xuXG4gICAgICAgICAgICAgICAgICAgICQoXCIjc2VuZC1yZXN1bHRcIikudGV4dChcIlRoYW5rIHlvdS4gWW91ciBtZXNzYWdlIGhhcyBiZWVuIHNlbnQuXCIpO1xuICAgICAgICAgICAgICAgICAgICAkKFwiI3NlbmQtcmVzdWx0XCIpLnJlbW92ZUNsYXNzKCdhbGVydC1kYW5nZXInKS5hZGRDbGFzcygnYWxlcnQtc3VjY2VzcycpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgJChcIiNzZW5kLXJlc3VsdFwiKS5zaG93KCkuYW5pbWF0ZUNzcygnYm91bmNlSW4nLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnaW5wdXQnKS52YWwoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCd0ZXh0YXJlYScpLnZhbChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjc2VuZC1yZXN1bHRcIikuZGVsYXkoNTAwMCkuc2xpZGVVcCgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQoXCIjc2VuZC1yZXN1bHRcIikucmVtb3ZlQ2xhc3MoJ2FsZXJ0LXN1Y2Nlc3MnKTtcbiAgICAgICAgICAgICAgICAkKFwiI3NlbmQtcmVzdWx0XCIpLmFkZENsYXNzKCdhbGVydC1kYW5nZXInKTtcbiAgICAgICAgICAgICAgICAkKFwiI3NlbmQtcmVzdWx0XCIpLnRleHQoXCJTb3JyeS4uLiBZb3VyIG1lc3NhZ2UgY291bGQgbm90IGhhdmUgYmVlbiBkZWxpdmVyZWQuXCIpO1xuICAgICAgICAgICAgICAgICQoXCIjc2VuZC1yZXN1bHRcIikuc2xpZGVEb3duKCk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9KTsgIC8vIHRoZSBlbmQgb2YgYWpheCBjYWxsIHRvIHBvc3QgZm9ybVZhbHVlc1xuICAgIH0pOyAvLyB0aGUgZW5kIG9mIGZvcm0gc3VibWl0IGZ1bmN0aW9uXG4gICAgXG4gICAgLy9nbG9iYWwuaW5pdENvbnRhY3RGb3JtTGlzdGVuZXIgPSBpbml0Q29udGFjdEZvcm1MaXN0ZW5lcigpO1xuXG59OyIsIi8vIC0tLS0tLS0tLS0gR09PR0xFIE1BUCAtLS0tLS0tLS0tXG5cblxuICB2YXIgbXlNYXA7XG4gIHZhciBteVBvc2l0aW9uID0ge2xhdDogNTAuMDQ4ODIyLCBsbmc6IDE1LjIwMDI0Mn07XG5cbiAgZnVuY3Rpb24gaW5pdENvbnRhY3RNYXAoKSB7XG4gICAgXG4gICAgLy8gU3BlY2lmeSBmZWF0dXJlcyBhbmQgZWxlbWVudHMgdG8gZGVmaW5lIHN0eWxlcy5cbiAgICB2YXIgc3R5bGVBcnJheSA9IFtcbiAgICB7XG4gICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJhbGxcIixcbiAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImFsbFwiLFxuICAgICAgICBcInN0eWxlcnNcIjogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFwic2F0dXJhdGlvblwiOiAtMTAwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFwiZ2FtbWFcIjogMC41XG4gICAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICB9XG4gIF07XG5cbiAgICAvLyBDcmVhdGUgYSBtYXAgb2JqZWN0IGFuZCBzcGVjaWZ5IHRoZSBET00gZWxlbWVudCBmb3IgZGlzcGxheS5cbiAgICB2YXIgbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRhY3QtbWFwXCIpLCB7XG4gICAgICAgIGNlbnRlcjogbXlQb3NpdGlvbixcbiAgICAgICAgc2Nyb2xsd2hlZWw6IGZhbHNlLFxuICAgICAgICBzdHJlZXRWaWV3Q29udHJvbDogdHJ1ZSxcbiAgICAgICAgc3RyZWV0Vmlld0NvbnRyb2w6IHtcbiAgICAgICAgICBwb3NpdGlvbjogZ29vZ2xlLm1hcHMuQ29udHJvbFBvc2l0aW9uLkxFRlRfQk9UVE9NXG4gICAgICAgIH0sXG4gICAgICAgIG1hcFR5cGVDb250cm9sOiB0cnVlLFxuICAgICAgICBtYXBUeXBlQ29udHJvbE9wdGlvbnM6IHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBnb29nbGUubWFwcy5Db250cm9sUG9zaXRpb24uQk9UVE9NX0xFRlRcbiAgICAgICAgfSxcbiAgICAgICAgem9vbUNvbnRyb2w6IHRydWUsXG4gICAgICAgIHpvb21Db250cm9sT3B0aW9uczoge1xuICAgICAgICAgIHBvc2l0aW9uOiBnb29nbGUubWFwcy5Db250cm9sUG9zaXRpb24uTEVGVF9DRU5URVJcbiAgICAgICAgfSxcbiAgICAgICAgLy8gQXBwbHkgdGhlIG1hcCBzdHlsZSBhcnJheSB0byB0aGUgbWFwLlxuICAgICAgICBzdHlsZXM6IHN0eWxlQXJyYXksXG4gICAgICAgIHpvb206IDE0XG4gICAgfSk7XG5cbiAgICBteU1hcCA9IG1hcDtcbiAgICAvLyBDcmVhdGUgYSBtYXJrZXIgYW5kIHNldCBpdHMgcG9zaXRpb24uXG4gICAgXG4gICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xuICAgICAgbWFwOiBtYXAsXG4gICAgICBwb3NpdGlvbjogbXlQb3NpdGlvbixcbiAgICAgIHRpdGxlOiAnS2FtZW5pY3R2w60gRXJiZW4nLFxuICAgICAgaWNvbjoge1xuICAgICAgICB1cmw6IFwiYXNzZXRzL2ltYWdlcy9JRV9sb2dvX3JvdW5kZWRfcG9pbnRlci5wbmdcIixcbiAgICAgICAgc2NhbGVkU2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoMTUwLCAxNTApXG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgbXlNYXAucGFuQnkoMCwoLSQoXCJuYXYubmF2YmFyXCIpLmhlaWdodCgpKSk7XG5cbiAgfTtcbiIsIiQoZnVuY3Rpb24oZ2xvYmFsKXtcbiAgICBcbiAgICAvLyB2YXIgc2NlbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFyYWxsYXgtc2NlbmUnKTtcbiAgICAvLyB2YXIgcGFyYWxsYXggPSBuZXcgUGFyYWxsYXgoc2NlbmUpO1xuXG4gICAgJCgnLmxvYWRlci13cmFwcGVyJykuaGlkZSgpO1xuICAgIFxuICAgIHZhciBidG5JbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAkKFwiLmJ0bi1kb3duXCIpLmFuaW1hdGVDc3MoXCJib3VuY2VcIik7XG4gICAgICAgIH0sMzAwMCk7XG5cbiAgICAvLyAtLS0tLS0tLS0tIEpRVUVSWSBBTklNQVRFIEVYVEVOU0lPTiAtLS0tLS0tLS0tXG4gICAgJC5mbi5leHRlbmQoe1xuICAgICAgICBhbmltYXRlQ3NzOiBmdW5jdGlvbiAoYW5pbWF0aW9uTmFtZSwgY2FsbEJhY2tGdW5jKSB7XG4gICAgICAgICAgICB2YXIgYW5pbWF0aW9uRW5kID0gJ3dlYmtpdEFuaW1hdGlvbkVuZCBtb3pBbmltYXRpb25FbmQgTVNBbmltYXRpb25FbmQgb2FuaW1hdGlvbmVuZCBhbmltYXRpb25lbmQnO1xuICAgICAgICAgICAgdGhpcy5hZGRDbGFzcygnYW5pbWF0ZWQgJyArIGFuaW1hdGlvbk5hbWUpLm9uZShhbmltYXRpb25FbmQsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkICcgKyBhbmltYXRpb25OYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAoJC5pc0Z1bmN0aW9uKGNhbGxCYWNrRnVuYykpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbEJhY2tGdW5jKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgaW5pdENhcm91c2VscyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcImNhcm91c2VscyBpbml0aWFsaXplZFwiKTtcbiAgICAgICAgdmFyIGNhcm91c2Vsc1NldHVwID0gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY2Fyb3VzZWw6IFwiI21haW4tY2Fyb3VzZWxcIixcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJ2YWw6NzAwMCxcbiAgICAgICAgICAgICAgICAgICAgcGF1c2U6IFwibm9uZVwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNhcm91c2VsOiBcIiNhYm91dC1jYXJvdXNlbFwiLFxuICAgICAgICAgICAgICAgICAgICBpbnRlcnZhbDo1MDAwLFxuICAgICAgICAgICAgICAgICAgICBwYXVzZTogXCJub25lXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY2Fyb3VzZWw6IFwiI2Nhcm91c2VsVG9tYnN0b25lc1wiLFxuICAgICAgICAgICAgICAgICAgICBpbnRlcnZhbDozMDAwLFxuICAgICAgICAgICAgICAgICAgICBwYXVzZTogXCJub25lXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY2Fyb3VzZWw6IFwiI2Nhcm91c2VsR2FyZGVuXCIsXG4gICAgICAgICAgICAgICAgICAgIGludGVydmFsOjMwMDAsXG4gICAgICAgICAgICAgICAgICAgIHBhdXNlOiBcIm5vbmVcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjYXJvdXNlbDogXCIjY2Fyb3VzZWxSZXN0b3JhdGlvbnNcIixcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJ2YWw6MzAwMCxcbiAgICAgICAgICAgICAgICAgICAgcGF1c2U6IFwibm9uZVwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNhcm91c2VsOiBcIiNDYXJvdXNlbE1vbnVtZW50c1wiLFxuICAgICAgICAgICAgICAgICAgICBpbnRlcnZhbDozMDAwLFxuICAgICAgICAgICAgICAgICAgICBwYXVzZTogXCJub25lXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgICAgLy8gLS0tLS0tLS0tLSBDQVJPVVNFTFMgU0VUVVAgLS0tLS0tLS0tLVxuICAgICAgICBmb3IgKHZhciBpPTA7IGk8Y2Fyb3VzZWxzU2V0dXAubGVuZ3RoLTE7aSsrKSB7XG4gICAgICAgICAgICAkKGNhcm91c2Vsc1NldHVwW2ldWydjYXJvdXNlbCddKS5jYXJvdXNlbCh7XG4gICAgICAgICAgICAgICAgaW50ZXJ2YWw6IGNhcm91c2Vsc1NldHVwW2ldWydpbnRlcnZhbCddXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBnbG9iYWwuaW5pdENhcm91c2VscyA9IGluaXRDYXJvdXNlbHM7XG5cbn0od2luZG93KSk7XG5cbiIsIihmdW5jdGlvbihnbG9iYWwsJCl7XG5cblx0dmFyIFVSTCA9Jy4vYXNzZXRzL2RhdGEvbGFuZy5qc29uJztcblx0dmFyIHNpdGVMYW5ncyA9IFtcImN6XCIsXCJlblwiXTtcblxuXHR2YXIgTGFuZyA9IGZ1bmN0aW9uKGFjdGl2ZUxhbmcpe1xuXHRcdHJldHVybiBuZXcgTGFuZy5pbml0KGFjdGl2ZUxhbmcpO1xuXHR9XG5cblx0TGFuZy5wcm90b3R5cGUgPSB7XG5cdFx0Z2V0S2V5VmFsOiBmdW5jdGlvbihrZXlWYWwpe1xuXHRcdFx0c2VsZiA9IHRoaXM7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oKXtcblx0XHRcdFx0a2V5VmFsID0ga2V5VmFsLnRyaW0oKTtcblx0XHRcdFx0dmFyIHJlc3VsdDtcblx0XHRcdFx0Zm9yICh2YXIgaT0wOyBpIDw9IExhbmcuZGF0YS5sZW5ndGgtMTsgaSsrKSB7XG5cdFx0XHRcdFx0aWYgKExhbmcuZGF0YVtpXS5kYXRhdGFnPT09a2V5VmFsKSB7XG5cdFx0XHRcdFx0XHRyZXN1bHQgPSBMYW5nLmRhdGFbaV1bc2VsZi5hY3RpdmVMYW5nXTtcblx0XHRcdFx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJlc3VsdCA9IFwiXCI7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0XHR9KCk7IFxuXHRcdH0sXG5cdFx0c3dpdGNoTGFuZzogZnVuY3Rpb24oc3dpdGNoVG9MYW5nKXtcblx0XHRcdHNlbGYgPSB0aGlzO1xuXHRcdFx0dmFyIG51bU9mTGFuZ0VscyA9ICQoXCJbZGF0YS1sYW5nXVwiKS5sZW5ndGg7XG5cdFx0XHRmb3IgKHZhciBpID0wO2k8PW51bU9mTGFuZ0Vscy0xO2krKykge1xuXHRcdFx0XHR2YXIgcmV0cmlldmVkRGF0YVRhZyA9ICQoJChcIltkYXRhLWxhbmddXCIpW2ldKS5kYXRhKCdsYW5nJyk7XG5cdFx0XHRcdHZhbHVlID0gTE5HJChzd2l0Y2hUb0xhbmcpLmdldEtleVZhbChyZXRyaWV2ZWREYXRhVGFnKTtcblx0XHRcdFx0aWYgKHZhbHVlLnRyaW0oKSE9PVwiXCIpIHtcblx0XHRcdFx0XHRpZiAodmFsdWUuc2VhcmNoKFwiPHBoPlwiKT4tMSkge1xuXHRcdFx0XHRcdFx0dmFsdWUgPSB2YWx1ZS5zdWJzdHIoNCx2YWx1ZS5sZW5ndGgpO1xuXHRcdFx0XHRcdFx0JCgkKFwiW2RhdGEtbGFuZ11cIilbaV0pLmF0dHIoXCJwbGFjZWhvbGRlclwiLHZhbHVlKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0JCgkKFwiW2RhdGEtbGFuZ11cIilbaV0pLnRleHQoTE5HJChzd2l0Y2hUb0xhbmcpLmdldEtleVZhbChyZXRyaWV2ZWREYXRhVGFnKSkuYW5pbWF0ZUNzcygncHVsc2UnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0fTtcblxuXHRMYW5nLmluaXQgPSBmdW5jdGlvbihhY3RpdmVMYW5nKXtcblx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFx0c2VsZi5hY3RpdmVMYW5nID0gYWN0aXZlTGFuZyB8fCBzaXRlTGFuZ3NbMF07XG5cdH1cblxuXHRMYW5nLmluaXQucHJvdG90eXBlID0gTGFuZy5wcm90b3R5cGU7XG5cdGdsb2JhbC5MYW5nID0gZ2xvYmFsLkxORyQgPSBMYW5nO1xuXG5cdGdldFNlcnZlckRhdGEoVVJMLGZ1bmN0aW9uKGRhdGEpe1xuXHRcdExhbmcuZGF0YSA9IGRhdGE7XG5cdFx0dmFyIGluaXRMYW5nID0gJChcIi5sYW5nLXN3aXRjaGVyIGFcIikudGV4dCgpLnRyaW0oKTtcblx0XHRMTkckKGluaXRMYW5nKS5zd2l0Y2hMYW5nKGluaXRMYW5nKTtcblx0fSk7XG5cblx0ZnVuY3Rpb24gZ2V0U2VydmVyRGF0YSh1cmwsIGNhbGxiYWNrRnVuYykge1xuXHR2YXIgcmVzdWx0ID0gJC5nZXRKU09OKHVybCwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coIFwiLS0tIHN1Y2Nlc3MgLS0tXCIgKTtcblx0XHRcdFx0fSlcblx0XHRcdFx0LmRvbmUoZnVuY3Rpb24oZGF0YSkge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCBcIi0tLSBzZWNvbmQgc3VjY2VzcyAtLS1cIiApO1xuXHRcdFx0XHRcdC8vY29uc29sZS5sb2coZGF0YSk7XG5cdFx0XHRcdFx0Y2FsbGJhY2tGdW5jKGRhdGEpO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuZmFpbChmdW5jdGlvbihqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyggXCItLS0gZXJyb3IgLS0tXCIgKTtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhqcVhIUik7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5hbHdheXMoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0Ly9jb25zb2xlLmxvZyggXCJjb21wbGV0ZVwiICk7XG5cdFx0XHRcdH0pO1xuXHR9O1xuXG59KHdpbmRvdywgalF1ZXJ5KSk7IiwiLy8gLS0tLS0tLS0tLSBOQVZJR0FUSU9OIC0tLS0tLS0tLS1cblxuJChmdW5jdGlvbihnbG9iYWwpe1xuXHR2YXIgY29udHJvbGxlciwgcGFyYWxsYXgxLCBwYXJhbGxheDI7XG5cdGdsb2JhbC5teVNpdGUgPXt9O1xuXG5cdGZ1bmN0aW9uIGlzX21vYmlsZSgpIHtcblx0ICAgIHZhciBhZ2VudHMgPSBbJ2FuZHJvaWQnLCAnd2Vib3MnLCAnaXBob25lJywgJ2lwYWQnLCAnYmxhY2tiZXJyeSddO1xuXHQgICAgZm9yKGkgaW4gYWdlbnRzKSB7XG5cdCAgICAgICAgaWYoKG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5zZWFyY2goYWdlbnRzW2ldKT4tMSkgJiYgKHdpbmRvdy5vcmllbnRhdGlvbiE9PXVuZGVmaW5lZCkpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHR9O1xuXG5cdHZhciBpc01vYmlsZUZsYWcgPSBpc19tb2JpbGUoKTtcblx0Z2xvYmFsLm15U2l0ZS5pc01vYmlsZUZsYWcgPSBpc01vYmlsZUZsYWc7XG5cblx0Ly9jb25zb2xlLmxvZyhcImlzTW9iaWxlRmxhZzogXCIraXNNb2JpbGVGbGFnKTtcblxuXHRpZiAoaXNNb2JpbGVGbGFnPT09dHJ1ZSkge1xuXHRcdCQoXCJib2R5XCIpLmFkZENsYXNzKFwiaXNNb2JpbGVcIik7XG5cdH1cblxuXHRmdW5jdGlvbiBuYXZNZW51SW5pdCgpIHtcblx0ICAgIFxuXHQgICAgJCgnI21haW5OYXZiYXInKS5vbignc2hvdy5icy5jb2xsYXBzZScsIGZ1bmN0aW9uICgpIHtcbiAgXHRcdFx0JChcIi5oYW1idXJnZXJfX21lbnUtaWNvblwiKS5hZGRDbGFzcyhcImhhbWJ1cmdlcl9fbWVudS1pY29uLS1jbG9zZS14XCIpO1xuXHRcdH0pXG4gXHRcdCQoJyNtYWluTmF2YmFyJykub24oJ2hpZGUuYnMuY29sbGFwc2UnLCBmdW5jdGlvbiAoKSB7XG4gIFx0XHRcdCQoXCIuaGFtYnVyZ2VyX19tZW51LWljb25cIikucmVtb3ZlQ2xhc3MoXCJoYW1idXJnZXJfX21lbnUtaWNvbi0tY2xvc2UteFwiKTtcblx0XHR9KVxuXG5cdCAgICAkKCcubmF2LWxpbmsnKS5vbiggJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXHQgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblx0ICAgICAgICB2YXIgdXJsID0gdGhpcy5ocmVmLnRyaW0oKS50b0xvd2VyQ2FzZSgpOyAgIFxuXHQgICAgICAgIHZhciBtZW51TmFtZSA9IHRoaXMucGF0aG5hbWUudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRcblx0ICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKFwiLm5hdi1saW5rXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuXHQgICAgICAgICQodGhpcykuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG5cblx0XHRcdGlmIChjb250cm9sbGVyIT09dW5kZWZpbmVkICYmIGNvbnRyb2xsZXIhPT1udWxsKSB7XG5cdFx0XHRcdGNvbnRyb2xsZXIgPSBjb250cm9sbGVyLmRlc3Ryb3kodHJ1ZSk7XG5cdFx0XHR9XG5cdCAgICAgICAgLy9jb25zb2xlLmxvZyhcInVybCA6ICBcIiArIHVybCk7XG5cdCAgICAgICAgLy9jb25zb2xlLmxvZyhtZW51TmFtZSk7IFxuXG5cdFx0XHQvL2Nsb3NlIHRoZSBtb2JpbGUgbWVudSBpZiBpdCBpcyBvcGVuZWRcblx0XHRcdCQoJyNtYWluTmF2YmFyJykuY29sbGFwc2UoJ2hpZGUnKTtcblx0ICAgICAgICAkKCcubG9hZGVyLXdyYXBwZXInKS5zaG93KCk7XG5cblx0ICAgICAgICAkKCcjYWpheC1jb250YWluZXInKS5hbmltYXRlQ3NzKCdmYWRlT3V0RG93bicsIGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgXHRcblx0ICAgICAgICBcdHZhciBzZWxmID0gdGhpcztcblx0ICAgICAgICBcdCQoXCJib2R5LGh0bWxcIikuc3RvcCgpLmFuaW1hdGUoe3Njcm9sbFRvcDowfSwgJzUwJyk7XG5cblx0ICAgICAgICBcdCQoJyNhamF4LWNvbnRlbnQnKS5sb2FkKHVybCArICcgI2FqYXgtY29udGFpbmVyJywgZnVuY3Rpb24ocmVzdWx0LHN0YXR1cyl7XG5cdCAgICAgICAgXHRcdFxuXHQgICAgICAgIFx0XHRpZiAoc3RhdHVzID09PSBcInN1Y2Nlc3NcIikge1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0JChzZWxmKS5yZW1vdmUoKTtcblx0ICAgICAgICBcdFx0XHQkKCcjYWpheC1jb250ZW50JykuaGlkZSgpO1xuXHRcdCAgICAgICAgXHRcdCQoJy5sb2FkZXItd3JhcHBlcicpLmhpZGUoKTtcblx0XHQgICAgICAgIFx0XHQkKCcjYWpheC1jb250ZW50Jykuc2hvdygpO1xuXHRcdCAgICAgICAgXHRcdCQoJyNhamF4LWNvbnRlbnQnKS5hbmltYXRlQ3NzKCdmYWRlSW5VcCcpO1xuXHRcdCAgICAgICAgXHRcdFxuXHRcdCAgICAgICAgXHRcdHBsYWNlQ29udGFjdExpc3RlbmVycygpO1xuXHRcdCAgICAgICAgXHRcdHBsYWNlQnV0dG9uTW92ZVVwTGlzdGVuZXIoKTtcblx0XHQgICAgICAgIFx0XHRwbGFjZUxhbmdTd2l0Y2hMaXN0ZW5lcih0cnVlKTtcblx0XHQgICAgICAgIFx0XHRpZiAobWVudU5hbWUuc2VhcmNoKFwicmVhbGlzYXRpb25zLmh0bWxcIik+LTEpIHtcblx0XHQgICAgICAgIFx0XHRcdGluaXRDb21taXNpb25zR2FsbGVyeSgpO1xuXHRcdCAgICAgICAgXHRcdH0gZWxzZSBpZiAobWVudU5hbWUuc2VhcmNoKFwiY29udGFjdC5odG1sXCIpPi0xKSB7XG5cdFx0ICAgICAgICBcdFx0XHRpbml0Q29udGFjdE1hcCgpO1xuXHRcdCAgICAgICAgXHRcdFx0aW5pdENvbnRhY3RGb3JtTGlzdGVuZXIoKTtcblx0XHQgICAgICAgIFx0XHR9IGVsc2UgaWYgKG1lbnVOYW1lLnNlYXJjaChcImluZGV4Lmh0bWxcIik+LTEpIHtcblx0XHQgICAgICAgIFx0XHRcdGluaXRDYXJvdXNlbHMoKTtcblx0XHQgICAgICAgIFx0XHRcdGxpbmtUb0dhbGxlcnkoKTtcblx0XHQgICAgICAgIFx0XHRcdGlmICghaXNNb2JpbGVGbGFnKSB7XG5cdFx0XHRcdFx0ICAgICAgICBcdGNvbnRyb2xsZXIgPSBuZXcgU2Nyb2xsTWFnaWMuQ29udHJvbGxlcih7Z2xvYmFsU2NlbmVPcHRpb25zOiB7dHJpZ2dlckhvb2s6IFwib25FbnRlclwiLCBkdXJhdGlvbjogXCIxMDAlXCJ9fSk7XG5cdFx0XHRcdFx0ICAgICAgICBcdHBhcmFsbGF4MSA9IG5ldyBTY3JvbGxNYWdpYy5TY2VuZSh7dHJpZ2dlckVsZW1lbnQ6IFwiI3BhcmFsbGF4MVwifSlcblx0XHRcdFx0XHQgICAgICAgICAgICBcdC5zZXRUd2VlbihcIiNwYXJhbGxheDEgPiBkaXZcIiwge3k6IFwiNTAlXCIsIGVhc2U6IExpbmVhci5lYXNlTm9uZX0pXG5cdFx0XHRcdFx0ICAgICAgICAgICAgXHQvLy5hZGRJbmRpY2F0b3JzKClcblx0XHRcdFx0XHQgICAgICAgICAgICBcdC5hZGRUbyhjb250cm9sbGVyKTtcblx0XHRcdFx0XHQgICAgICAgIH1cblxuXHRcdCAgICAgICAgXHRcdH0gZWxzZSBpZiAobWVudU5hbWUuc2VhcmNoKFwiYWJvdXQuaHRtbFwiKT4tMSkge1xuXHRcdCAgICAgICAgXHRcdFx0aW5pdENhcm91c2VscygpO1xuXHRcdCAgICAgICAgXHRcdFx0aWYgKCFpc01vYmlsZUZsYWcpIHtcblx0XHRcdCAgICAgICAgXHRcdFx0Y29udHJvbGxlciA9IG5ldyBTY3JvbGxNYWdpYy5Db250cm9sbGVyKHtnbG9iYWxTY2VuZU9wdGlvbnM6IHt0cmlnZ2VySG9vazogXCJvbkVudGVyXCIsIGR1cmF0aW9uOiBcIjEwMCVcIn19KTtcblx0XHRcdCAgICAgICAgXHRcdFx0cGFyYWxsYXgyID0gbmV3IFNjcm9sbE1hZ2ljLlNjZW5lKHt0cmlnZ2VyRWxlbWVudDogXCIjcGFyYWxsYXgyXCJ9KVxuXHRcdFx0XHRcdFx0XHQgICAgXHQuc2V0VHdlZW4oXCIjcGFyYWxsYXgyID4gZGl2XCIsIHt5OiBcIjUwJVwiLCBlYXNlOiBMaW5lYXIuZWFzZU5vbmV9KVxuXHRcdFx0XHRcdFx0XHQgICAgXHQvLy5hZGRJbmRpY2F0b3JzKClcblx0XHRcdFx0XHRcdFx0ICAgIFx0LmFkZFRvKGNvbnRyb2xsZXIpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0ICAgICAgICBcdFx0fSBlbHNlIGlmIChtZW51TmFtZS5zZWFyY2goXCJwcmljaW5nLmh0bWxcIik+LTEpIHtcblx0XHQgICAgICAgIFx0XHRcdGluaXRQcmljaW5nR2FsbGVyeSgpO1xuXHRcdCAgICAgICAgXHRcdH1cblx0ICAgICAgICBcdFx0fSBlbHNlIGlmIChzdGF0dXMgPT09IFwiZXJyb3JcIikge1xuXHQgICAgICAgIFx0XHRcdCQoJy5sb2FkZXItd3JhcHBlcicpLmhpZGUoKTtcblx0ICAgICAgICBcdFx0XHRjb25zb2xlLmxvZyhcIkVycm9yIGxvYWRpbmcgZnJvbSBzZXJ2ZXIuLi5cIik7XG5cdCAgICAgICAgXHRcdH1cblx0ICAgICAgICBcdH0pOyAvLyBlbmQgb2YgYWpheCBsb2FkIGZ1bmN0aW9uXG5cdCAgICAgICAgfSk7ICAvLyBlbmQgb2YgYW5pbWF0ZUNzcyBmdW5jdGlvblxuXG5cdCAgICB9KTsgLy8gZW5kIG9mIGNsaWNrIGxpc3RlbmVyXG5cdCAgIFxuXHR9XG5cblx0ZnVuY3Rpb24gcGxhY2VDb250YWN0TGlzdGVuZXJzKCkge1xuXHRcdCQoXCIuYnRuLW1hcFwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpe1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0dmFyICR0aGlzPSQodGhpcyk7XG5cblx0XHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib3JpZW50YXRpb25jaGFuZ2VcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICgkdGhpcy5jaGlsZHJlbigpLmhhc0NsYXNzKFwiZmEtZXhwYW5kXCIpKSB7XG5cdFx0XHRcdFx0aWYgKHdpbmRvdy5tYXRjaE1lZGlhKFwiKG9yaWVudGF0aW9uOiBsYW5kc2NhcGUpXCIpLm1hdGNoZXMgJiYgd2luZG93LmlubmVyV2lkdGg8NzY3KSB7XG5cdFx0XHRcdFx0XHQkKFwiI2NvbnRhY3QtbWFwXCIpLmFuaW1hdGUoe1xuXHRcdFx0XHRcdFx0XHRoZWlnaHQ6IFwiNzV2aFwiXG5cdFx0XHRcdFx0XHR9LDUwMCwgZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdFx0Z29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcihteU1hcCwgXCJyZXNpemVcIik7XG5cdFx0XHRcdFx0XHRcdG15TWFwLnNldENlbnRlcihteVBvc2l0aW9uKTtcblx0XHRcdFx0XHRcdFx0bXlNYXAucGFuQnkoMCwoLSQoXCJuYXYubmF2YmFyXCIpLmhlaWdodCgpKSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0JChcIiNjb250YWN0LW1hcFwiKS5hbmltYXRlKHtcblx0XHRcdFx0XHRcdFx0aGVpZ2h0OiBcIjUwdmhcIlxuXHRcdFx0XHRcdFx0fSw1MDAsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0XHRcdGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIobXlNYXAsIFwicmVzaXplXCIpO1xuXHRcdFx0XHRcdFx0XHRteU1hcC5zZXRDZW50ZXIobXlQb3NpdGlvbik7XG5cdFx0XHRcdFx0XHRcdG15TWFwLnBhbkJ5KDAsKC0kKFwibmF2Lm5hdmJhclwiKS5oZWlnaHQoKSkpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9LCBmYWxzZSk7XG5cblx0XHRcdGlmICgkdGhpcy5jaGlsZHJlbigpLmhhc0NsYXNzKFwiZmEtZXhwYW5kXCIpKSB7XG5cdFx0XHRcdCR0aGlzLmNoaWxkcmVuKCkucmVtb3ZlQ2xhc3MoXCJmYS1leHBhbmRcIikuYWRkQ2xhc3MoXCJmYS1jb21wcmVzc1wiKTtcblx0XHRcdFx0JChcIiNjb250YWN0LW1hcFwiKS5hbmltYXRlKHtcblx0XHRcdFx0XHRoZWlnaHQ6IFwiMTAwdmhcIlxuXHRcdFx0XHR9LDUwMCwgZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKG15TWFwLCBcInJlc2l6ZVwiKTtcblx0XHRcdFx0XHRteU1hcC5zZXRDZW50ZXIobXlQb3NpdGlvbik7XG5cdFx0XHRcdFx0bXlNYXAucGFuQnkoMCwoLSQoXCJuYXYubmF2YmFyXCIpLmhlaWdodCgpKSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9IGVsc2UgaWYgKCR0aGlzLmNoaWxkcmVuKCkuaGFzQ2xhc3MoXCJmYS1jb21wcmVzc1wiKSkge1xuXHRcdFx0XHQkdGhpcy5jaGlsZHJlbigpLnJlbW92ZUNsYXNzKFwiZmEtY29tcHJlc3NcIikuYWRkQ2xhc3MoXCJmYS1leHBhbmRcIik7XG5cdFx0XHRcdGlmICh3aW5kb3cubWF0Y2hNZWRpYShcIihvcmllbnRhdGlvbjogbGFuZHNjYXBlKVwiKS5tYXRjaGVzICYmIHdpbmRvdy5pbm5lcldpZHRoPDc2Nykge1xuXHRcdFx0XHRcdCQoXCIjY29udGFjdC1tYXBcIikuYW5pbWF0ZSh7XG5cdFx0XHRcdFx0XHRoZWlnaHQ6IFwiNzV2aFwiXG5cdFx0XHRcdFx0fSw1MDAsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0XHRnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKG15TWFwLCBcInJlc2l6ZVwiKTtcblx0XHRcdFx0XHRcdG15TWFwLnNldENlbnRlcihteVBvc2l0aW9uKTtcblx0XHRcdFx0XHRcdG15TWFwLnBhbkJ5KDAsKC0kKFwibmF2Lm5hdmJhclwiKS5oZWlnaHQoKSkpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCQoXCIjY29udGFjdC1tYXBcIikuYW5pbWF0ZSh7XG5cdFx0XHRcdFx0XHRoZWlnaHQ6IFwiNTB2aFwiXG5cdFx0XHRcdFx0fSw1MDAsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0XHRnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKG15TWFwLCBcInJlc2l6ZVwiKTtcblx0XHRcdFx0XHRcdG15TWFwLnNldENlbnRlcihteVBvc2l0aW9uKTtcblx0XHRcdFx0XHRcdG15TWFwLnBhbkJ5KDAsKC0kKFwibmF2Lm5hdmJhclwiKS5oZWlnaHQoKSkpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSlcblx0fVxuXG5cdGZ1bmN0aW9uIHBsYWNlQnV0dG9uTW92ZVVwTGlzdGVuZXIoKSB7XG5cdFx0XG5cdFx0dmFyIG9mZlNldFk9MDtcblx0XHQkKHdpbmRvdykub24oXCJzY3JvbGxcIiwgZnVuY3Rpb24oKXtcblx0XHRcdHZhciBhY3R1YWxIZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XG5cdFx0XHR2YXIgYWN0dWFsU2Nyb2xsUG9zID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xuXG5cdFx0XHRvZmZTZXRZID0gYWN0dWFsSGVpZ2h0LzU7XG5cdFx0XHRcblx0XHRcdGlmIChhY3R1YWxTY3JvbGxQb3M8MCkge2FjdHVhbFNjcm9sbFBvcz0wfTtcblxuXHRcdFx0Ly9jb25zb2xlLmxvZyhhY3R1YWxIZWlnaHQsYWN0dWFsU2Nyb2xsUG9zKTtcblx0XHRcdC8vY29uc29sZS5sb2coYWN0dWFsSGVpZ2h0LW9mZlNldFksYWN0dWFsU2Nyb2xsUG9zKTtcblxuXHRcdFx0aWYgKCgoYWN0dWFsSGVpZ2h0LW9mZlNldFkpL2FjdHVhbFNjcm9sbFBvcyk+MSkge1xuXHRcdFx0XHRpZiAoJCgnLmJ0bi1tb3ZlLXVwJykuaXMoXCI6dmlzaWJsZVwiKSkge1xuXHRcdFx0XHRcdCQoXCIuYnRuLW1vdmUtdXBcIikuYW5pbWF0ZUNzcygnYm91bmNlT3V0JywgZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdCQoXCIuYnRuLW1vdmUtdXBcIikuaGlkZSgpO1xuXHRcdFx0XHRcdFx0JChcIi5idG4tZG93blwiKS5zaG93KCkuYW5pbWF0ZUNzcygnYm91bmNlSW4nKTtcblx0XHRcdFx0XHRcdC8vJChcIi5idG4tZG93blwiKS5hbmltYXRlQ3NzKCdib3VuY2VJbicpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKCEkKCcuYnRuLW1vdmUtdXAnKS5pcyhcIjp2aXNpYmxlXCIpKSB7XG4gXHRcdFx0XHRcdCQoXCIuYnRuLWRvd25cIikuYW5pbWF0ZUNzcygnYm91bmNlT3V0JyxmdW5jdGlvbigpe1xuIFx0XHRcdFx0XHRcdCQoXCIuYnRuLWRvd25cIikuaGlkZSgpO1xuIFx0XHRcdFx0XHRcdCQoXCIuYnRuLW1vdmUtdXBcIikuc2hvdygpO1xuIFx0XHRcdFx0XHRcdCQoXCIuYnRuLW1vdmUtdXBcIikuYW5pbWF0ZUNzcygnYm91bmNlSW4nKTtcbiBcdFx0XHRcdFx0fSk7XG4gXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0JChcIi5idG4tbW92ZS11cFwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XG5cdFx0XHQkKFwiYm9keSxodG1sXCIpLnN0b3AoKS5hbmltYXRlKHtzY3JvbGxUb3A6MH0sICc3MDAnLCBcInN3aW5nXCIpO1xuXHRcdH0pO1xuXHRcdCQoXCIuYnRuLWRvd25cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbihlKXtcblx0XHRcdGNvbnNvbGUubG9nKGUpO1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0dmFyIGp1bXBIYXNoID0gZS5jdXJyZW50VGFyZ2V0Lmhhc2g7XG5cdFx0XHR2YXIganVtcFBvaW50ID0gJChqdW1wSGFzaCkub2Zmc2V0KCkudG9wO1xuXHRcdFx0JChcImJvZHksaHRtbFwiKS5zdG9wKCkuYW5pbWF0ZSh7c2Nyb2xsVG9wOmp1bXBQb2ludH0sICc3MDAnLCBcInN3aW5nXCIpO1xuXHRcdH0pO1xuXHRcdFxuXHR9XG5cblx0ZnVuY3Rpb24gcGxhY2VMYW5nU3dpdGNoTGlzdGVuZXIodXBkYXRlKSB7XG5cdFx0dmFyIHVwZGF0ZSA9IHVwZGF0ZSB8fCBmYWxzZTtcblx0XHR2YXIgYWN0aXZlTGFuZyA9ICQoXCIubGFuZy1zd2l0Y2hlcj5zcGFuXCIpLnRleHQoKS50cmltKCk7XG5cblx0XHRpZiAodXBkYXRlKSB7TE5HJChhY3RpdmVMYW5nKS5zd2l0Y2hMYW5nKGFjdGl2ZUxhbmcpO31cblxuXHRcdCQoXCIubGFuZy1zd2l0Y2hlcj5zcGFuXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcblx0XHRcdGlmIChhY3RpdmVMYW5nID09PSBcImN6XCIpIHtcblx0XHRcdFx0YWN0aXZlTGFuZyA9IFwiZW5cIjtcblx0XHRcdFx0JChcIi5sYW5nLXN3aXRjaGVyPnNwYW5cIikudGV4dChhY3RpdmVMYW5nKTtcblx0XHRcdFx0TE5HJChhY3RpdmVMYW5nKS5zd2l0Y2hMYW5nKGFjdGl2ZUxhbmcpO1xuXHRcdFx0fSBlbHNlIGlmIChhY3RpdmVMYW5nID09PSBcImVuXCIpIHtcblx0XHRcdFx0YWN0aXZlTGFuZyA9IFwiY3pcIjtcblx0XHRcdFx0JChcIi5sYW5nLXN3aXRjaGVyPnNwYW5cIikudGV4dChhY3RpdmVMYW5nKTtcblx0XHRcdFx0TE5HJChhY3RpdmVMYW5nKS5zd2l0Y2hMYW5nKGFjdGl2ZUxhbmcpO1xuXHRcdFx0fVxuXHRcdFx0JCh0aGlzKS5hbmltYXRlQ3NzKFwiYm91bmNlSW5cIik7XG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBsaW5rVG9HYWxsZXJ5KCl7XG5cblx0XHQkKFwiLmJ0bi1zaXRlXCIpLm9uKCdjbGljaycsZnVuY3Rpb24oZSl7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0O1xuXHRcdFx0dmFyIGdhbExpbmsgPSAkKHRoaXMpLmRhdGEoJ2xpbmsnKS50cmltKCk7XG5cdFx0XHR2YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG5cdFx0XHRpZiAodXJsLnNlYXJjaChcImluZGV4Lmh0bWxcIikgPj0gMCApIHtcblx0XHRcdFx0dXJsID0gdXJsLnJlcGxhY2UoXCJpbmRleC5odG1sXCIsXCJyZWFsaXNhdGlvbnMuaHRtbFwiKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHVybCA9IHVybCArIFwicmVhbGlzYXRpb25zLmh0bWxcIjtcblx0XHRcdH1cblx0XHRcdC8vY29uc29sZS5sb2coXCJ1cmwgOiBcIisgdXJsKTtcblxuXHQgICAgICAgICQoJyNhamF4LWNvbnRhaW5lcicpLmFuaW1hdGVDc3MoJ2ZhZGVPdXREb3duJywgZnVuY3Rpb24oKXtcblx0ICAgICAgICBcdCQoJyNhamF4LWNvbnRlbnQnKS5oaWRlKCk7XG5cdCAgICAgICAgXHQkKCcjYWpheC1jb250ZW50JykubG9hZCh1cmwgKyAnICNhamF4LWNvbnRhaW5lcicsIGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgXHRcdCQoXCIubmF2YmFyLW5hdj4ubmF2LWxpbmtcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG5cdCAgICAgICAgXHRcdCQoXCIubmF2YmFyLW5hdj4ubmF2LWxpbmtbaHJlZj0ncmVhbGlzYXRpb25zLmh0bWwnXVwiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcblx0ICAgICAgICBcdFx0XG5cdCAgICAgICAgXHRcdCQoJyNhamF4LWNvbnRlbnQnKS5zaG93KCk7XG5cdCAgICAgICAgXHRcdCQoJyNhamF4LWNvbnRlbnQnKS5hbmltYXRlQ3NzKCdmYWRlSW5VcCcpO1xuXHQgICAgICAgIFx0XHRwbGFjZUNvbnRhY3RMaXN0ZW5lcnMoKTtcblx0ICAgICAgICBcdFx0cGxhY2VCdXR0b25Nb3ZlVXBMaXN0ZW5lcigpO1xuXHQgICAgICAgIFx0XHRwbGFjZUxhbmdTd2l0Y2hMaXN0ZW5lcigpO1xuXHQgICAgICAgIFx0XHRpbml0Q29tbWlzaW9uc0dhbGxlcnkoZnVuY3Rpb24oKXtcblx0XHQgICAgICAgIFx0XHQkKFwiLmZpbHRlci1pdGVtXCIpLmVhY2goZnVuY3Rpb24oaSl7XG5cdFx0ICAgICAgICBcdFx0XHRpZiAoJCh0aGlzKS50ZXh0KCkudG9Mb3dlckNhc2UoKS50cmltKCkgPT09IGdhbExpbmspIHtcblx0XHQgICAgICAgIFx0XHRcdFx0JCh0aGlzKS50cmlnZ2VyKCdjbGljaycpO1xuXHRcdCAgICAgICAgXHRcdFx0XHRyZXR1cm47XG5cdFx0ICAgICAgICBcdFx0XHR9XG5cdFx0ICAgICAgICBcdFx0fSk7XG5cblx0ICAgICAgICBcdFx0fSk7XG5cdCAgICAgICAgXHR9KTtcblx0ICAgICAgICB9KTtcblx0XHR9KTtcblx0fVxuXG5cdGlmICghaXNNb2JpbGVGbGFnKSB7XG4gICAgICAgIHZhciBjb250cm9sbGVyID0gbmV3IFNjcm9sbE1hZ2ljLkNvbnRyb2xsZXIoe2dsb2JhbFNjZW5lT3B0aW9uczoge3RyaWdnZXJIb29rOiBcIm9uRW50ZXJcIiwgZHVyYXRpb246IFwiMTAwJVwifX0pO1xuICAgICAgICB2YXIgcGFyYWxsYXgxID0gbmV3IFNjcm9sbE1hZ2ljLlNjZW5lKHt0cmlnZ2VyRWxlbWVudDogXCIjcGFyYWxsYXgxXCJ9KVxuICAgICAgICAgICAgLnNldFR3ZWVuKFwiI3BhcmFsbGF4MSA+IGRpdlwiLCB7eTogXCI1MCVcIiwgZWFzZTogTGluZWFyLmVhc2VOb25lfSlcbiAgICAgICAgICAgIC8vLmFkZEluZGljYXRvcnMoKVxuICAgICAgICAgICAgLmFkZFRvKGNvbnRyb2xsZXIpO1xuICAgIH1cblxuXG5cdGxpbmtUb0dhbGxlcnkoKTtcblx0bmF2TWVudUluaXQoKTtcblx0cGxhY2VDb250YWN0TGlzdGVuZXJzKCk7XG5cdHBsYWNlQnV0dG9uTW92ZVVwTGlzdGVuZXIoKTtcblx0cGxhY2VMYW5nU3dpdGNoTGlzdGVuZXIoKTtcblx0Ly9pbml0UGFyYWxsYXgoKTtcblxuXHRnbG9iYWwubXlTaXRlLm5hdk1lbnVJbml0ID0gbmF2TWVudUluaXQ7XG5cdGdsb2JhbC5teVNpdGUucGxhY2VDb250YWN0TGlzdGVuZXJzID0gcGxhY2VDb250YWN0TGlzdGVuZXJzO1xuXHRnbG9iYWwubXlTaXRlLnBsYWNlQnV0dG9uTW92ZVVwTGlzdGVuZXIgPSBwbGFjZUJ1dHRvbk1vdmVVcExpc3RlbmVyO1xuXHRnbG9iYWwubXlTaXRlLnBsYWNlTGFuZ1N3aXRjaExpc3RlbmVyID0gcGxhY2VMYW5nU3dpdGNoTGlzdGVuZXI7XG5cbn0od2luZG93KSk7IiwiLy8gLS0tLS0tLS0tLSBQT1JURk9MSU8gRklMVEVSIC0tLS0tLS0tLS1cblxuXHRmdW5jdGlvbiBpbml0Q29tbWlzaW9uc0dhbGxlcnkoY2FsbGJhY2tGdW5jKXtcblx0XHR2YXIgY2FsbGJhY2tGdW5jID0gY2FsbGJhY2tGdW5jIHx8IGZ1bmN0aW9uKCl7fTtcblx0XHR2YXIgYnJva2VuQ291bnQgPSAwO1xuXG5cdFx0JChcIi5ncmlkLWl0ZW0+LmltZy1yZXN1bHQtd3JhcHBlclwiKS5oaWRlKCk7XG5cdFx0JChcIi5ncmlkLWl0ZW0+LmltZy1sb2FkZXItd3JhcHBlclwiKS5zaG93KCk7XG5cdFx0JChcIi5ncmlkPi5ncmlkLWl0ZW1cIikuYWRkQ2xhc3MoXCJob3Zlci1vZmZcIik7XG5cblx0XHQkKCcjcG9ydGZvbGlvcycpLmltYWdlc0xvYWRlZCgpXG5cdFx0ICAuYWx3YXlzKCBmdW5jdGlvbiggaW5zdGFuY2UgKSB7XG5cdFx0ICAgIGNvbnNvbGUubG9nKFwiYWxsIGltYWdlcyBvZiAnQ29tbWlzaW9ucyBtZW51JyBsb2FkZWRcIik7XG5cdFx0ICAgXG5cdFx0XHRpbnN0YW50aWF0ZUlzb3RvcGVHYWxsZXJ5KFwiLmdyaWRcIix7XG5cdFx0ICBcdFx0aXRlbVNlbGVjdG9yOiAnLmdyaWQtaXRlbScsXG5cdFx0ICBcdFx0c3RhZ2dlcjogMzBcblx0XHRcdH0pO1xuXHRcdCAgICBcblx0XHQgICAgYnVpbGRJbWdDYXRlZ29yaWVzKFwiI2ZpbHRlci1wb3J0Zm9saW9cIixcIiNwb3J0Zm9saW8tZ2FsbGVyeSAuZ3JpZC1pdGVtXCIpO1xuXHRcdCAgICBwbGFjZUZpbHRlckxpc3RlbmVycyhcIi5ncmlkXCIpO1xuXG5cdFx0XHQkKFwiLmdyaWQtaXRlbT4uaW1nLXJlc3VsdC13cmFwcGVyXCIpLmZhZGVPdXQoMTAwMCk7XG5cdFx0ICAgICQoXCIuaW1nLWxvYWRlcj4uaW1nLWxvYWRlci10ZXh0XCIpLnRleHQoXCJpbWFnZXMgbG9hZGVkXCIpO1xuXHRcdCAgICAkKFwiLmltZy1sb2FkZXItYmFyXCIpLmNzcyhcImJhY2tncm91bmQtY29sb3JcIixcImdyZWVuXCIpO1xuXHRcdCAgICAkKFwiLmltZy1sb2FkZXJcIikuZGVsYXkoMzAwMCkuc2xpZGVVcCgxMDAwKTtcblx0XHQgICAgJChcIi5ncmlkPi5ncmlkLWl0ZW1cIikucmVtb3ZlQ2xhc3MoXCJob3Zlci1vZmZcIik7XG5cblx0XHQgICAgY2FsbGJhY2tGdW5jKCk7XG5cblx0XHQgIH0pXG5cdFx0ICAuZG9uZSggZnVuY3Rpb24oKSB7XG5cdFx0ICAgIGNvbnNvbGUubG9nKFwiYWxsIGltYWdlcyBvZiAnQ29tbWlzaW9ucyBtZW51JyBzdWNjZXNzZnVsbHkgbG9hZGVkXCIpO1xuXG5cdFx0ICB9KVxuXHRcdCAgLmZhaWwoIGZ1bmN0aW9uKCkge1xuXHRcdCAgICBjb25zb2xlLmxvZyggYnJva2VuQ291bnQgKyBcIiBvZiAnQ29tbWlzaW9ucyBtZW51JyBpbWFnZXMgaGF2ZSBicm9rZW4gbGlua3MuIENoZWNrIHlvdXIgaW1hZ2UgcGF0aHMuXCIpO1xuXHRcdCAgICAkKFwiLmltZy1sb2FkZXJcIikuZGVsYXkoMzAwMCkuc2xpZGVVcCgxMDAwKTtcblx0XHQgIH0pXG5cdFx0LnByb2dyZXNzKCBmdW5jdGlvbiggaW5zdGFuY2UsIGltYWdlICkge1xuXG5cdFx0ICAgIGlmIChpbWFnZS5pc0xvYWRlZCkge1xuXHRcdCAgICBcdCQoaW1hZ2UuaW1nKS5zaWJsaW5ncyhcIi5pbWctbG9hZGVyLXdyYXBwZXJcIikuaGlkZSgpO1xuXHRcdCAgICBcdCQoaW1hZ2UuaW1nKS5zaWJsaW5ncyhcIi5pbWctcmVzdWx0LXdyYXBwZXJcIikuYW5pbWF0ZUNzcyhcImJvdW5jZUluXCIpLnNob3coKTtcblx0XHRcdFx0JChcIi5pbWctbG9hZGVyLWJhclwiKS53aWR0aCgoaW5zdGFuY2UucHJvZ3Jlc3NlZENvdW50L2luc3RhbmNlLmltYWdlcy5sZW5ndGgpKjEwMCArIFwiJVwiKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGJyb2tlbkNvdW50Kys7XG5cdFx0XHRcdCQoaW1hZ2UuaW1nKS5wYXJlbnQoKS5yZW1vdmUoKTtcblx0XHRcdH1cblxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gaW5pdFByaWNpbmdHYWxsZXJ5KCl7XG5cblx0XHR2YXIgYnJva2VuQ291bnQgPSAwO1xuXHRcdCQoXCIuZ3JpZC1wcmljaW5nPi5ncmlkLWl0ZW0tcHJpY2luZ1wiKS5hZGRDbGFzcyhcImhvdmVyLW9mZlwiKTtcblxuXHRcdCQoXCIjcHJpY2luZ1wiKS5pbWFnZXNMb2FkZWQoKVxuXHRcdCBcdC5hbHdheXMoIGZ1bmN0aW9uKCBpbnN0YW5jZSApIHtcblx0XHQgICAgXHRjb25zb2xlLmxvZyhcImFsbCBpbWFnZXMgb2YgJ1ByaWNpbmcgbWVudScgbG9hZGVkXCIpO1xuXG5cdFx0ICAgXHRcdGluc3RhbnRpYXRlSXNvdG9wZUdhbGxlcnkoXCIuZ3JpZC1wcmljaW5nXCIse1xuXHRcdCAgXHRcdFx0aXRlbVNlbGVjdG9yOiAnLmdyaWQtaXRlbS1wcmljaW5nJyxcblx0XHQgIFx0XHRcdHN0YWdnZXI6IDMwXG5cdFx0XHRcdH0pO1xuXG5cdFx0ICAgIFx0YnVpbGRJbWdDYXRlZ29yaWVzKFwiI2ZpbHRlci1wcmljZWxpc3RcIixcIiNwcmljaW5nLWdhbGxlcnkgLmdyaWQtaXRlbS1wcmljaW5nXCIpO1xuXHRcdCAgICBcdHBsYWNlRmlsdGVyTGlzdGVuZXJzKFwiLmdyaWQtcHJpY2luZ1wiKTtcblx0XHQgICAgXHQkKFwiLmdyaWQtcHJpY2luZz4uZ3JpZC1pdGVtLXByaWNpbmdcIikucmVtb3ZlQ2xhc3MoXCJob3Zlci1vZmZcIik7XG5cblx0XHQgIFx0fSlcblx0XHQgIFx0LmRvbmUoIGZ1bmN0aW9uKCkge1xuXHRcdCAgICBcdGNvbnNvbGUubG9nKFwiQWxsIGltYWdlcyBvZiAnUHJpY2luZyBtZW51JyBzdWNjZXNzZnVsbHkgbG9hZGVkXCIpO1xuXG5cdFx0ICBcdH0pXG5cdFx0ICBcdC5mYWlsKCBmdW5jdGlvbigpIHtcblx0XHQgICAgXHRjb25zb2xlLmxvZyggYnJva2VuQ291bnQgKyBcIiBvZiAnUHJpY2luZyBtZW51JyBpbWFnZXMgaGF2ZSBicm9rZW4gbGlua3MuIENoZWNrIHlvdXIgaW1hZ2UgcGF0aHMuXCIpO1xuXHRcdCAgXHR9KVxuXHRcdFx0LnByb2dyZXNzKCBmdW5jdGlvbiggaW5zdGFuY2UsIGltYWdlICkge1xuXG5cdFx0ICAgIFx0aWYgKCFpbWFnZS5pc0xvYWRlZCkge1xuXHRcdFx0XHRcdGJyb2tlbkNvdW50Kys7XG5cdFx0XHRcdFx0JChpbWFnZS5pbWcpLnBhcmVudCgpLnJlbW92ZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0fVxuXG5cblx0ZnVuY3Rpb24gaW5zdGFudGlhdGVJc290b3BlR2FsbGVyeShlbCxvcHRpb25zKXtcblx0XHQkKGVsKS5pc290b3BlKG9wdGlvbnMpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYnVpbGRJbWdDYXRlZ29yaWVzKGxpc3RFbGVtZW50LGltZ0NvbnRhaW5lcnMpIHtcblxuXHRcdHZhciAkaW1nQ29udGFpbmVycyA9ICQoaW1nQ29udGFpbmVycyk7XG5cdFx0dmFyICRidXR0b25zID0gJChsaXN0RWxlbWVudCk7XG5cdFx0dmFyIHRhZ2dlZCA9IHt9O1xuXG5cdFx0JGJ1dHRvbnMuY2hpbGRyZW4oKS5yZW1vdmUoKTtcblxuXHRcdCRpbWdDb250YWluZXJzLmVhY2goZnVuY3Rpb24oKXtcblx0XHRcdHZhciBpbWdDb250YWluZXI9dGhpcztcblx0XHRcdHZhciB0YWdzID0gJCh0aGlzKS5kYXRhKCdwb3J0Zm9saW8tdGFncycpO1xuXG5cdFx0XHRpZiAodGFncykge1xuXHRcdFx0XHR0YWdzLnNwbGl0KFwiLFwiKS5mb3JFYWNoKGZ1bmN0aW9uKHRhZ05hbWUpe1xuXHRcdFx0XHRcdHRhZ05hbWUgPSB0YWdOYW1lLnRyaW0oKTtcblx0XHRcdFx0XHRpZiAodGFnZ2VkW3RhZ05hbWVdPT1udWxsKSB7XG5cdFx0XHRcdFx0XHR0YWdnZWRbdGFnTmFtZV09W107XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRhZ2dlZFt0YWdOYW1lXS5wdXNoKGltZ0NvbnRhaW5lcik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0pXG5cdFx0XG5cdFx0JGJ1dHRvbnMuYWRkQ2xhc3MoXCJmaWx0ZXItd3JhcHBlclwiKTtcblx0XHQkKFwiPGxpLz5cIikuYXBwZW5kVG8oJGJ1dHRvbnMpO1xuXG5cdFx0JChcIjxhLz5cIiwge1xuXHRcdFx0dGV4dDogXCJWxaFlXCIsXG5cdFx0XHRjbGFzczogXCJmaWx0ZXItaXRlbSBzZWxlY3RlZFwiLFxuXHRcdFx0Y2xpY2s6IGZ1bmN0aW9uKCl7XG5cdFx0XHRcdCQodGhpcykuYWRkQ2xhc3MoXCJzZWxlY3RlZFwiKS5wYXJlbnQoKS5zaWJsaW5ncygpLmNoaWxkcmVuKCkucmVtb3ZlQ2xhc3MoXCJzZWxlY3RlZFwiKTtcblx0XHRcdH1cblx0XHR9KS5hcHBlbmRUbygkYnV0dG9ucy5jaGlsZHJlbigpLmVxKDApKS5hdHRyKCdkYXRhLWxhbmcnLCdWxaFlJyk7XG5cblx0XHQkKFwiPGxpPjxhIGNsYXNzPSdmaWx0ZXItaXRlbSBmaWx0ZXItcG9ydGZvbGlvLWRpdmlkZXInPiZuYnNwOzwvYT48L2xpPlwiKS5hcHBlbmRUbygkYnV0dG9ucyk7XG5cblx0XHQkLmVhY2godGFnZ2VkLCBmdW5jdGlvbih0YWdOYW1lKSB7XG5cdFx0XHQkKFwiPGxpLz5cIikuYXBwZW5kVG8oJGJ1dHRvbnMpO1xuXG5cdFx0XHQkKFwiPGEvPlwiLCB7XG5cdFx0XHRcdHRleHQ6IHRhZ05hbWUsXG5cdFx0XHRcdGNsYXNzOiBcImZpbHRlci1pdGVtXCIsXG5cdFx0XHRcdGNsaWNrOiBmdW5jdGlvbigpe1xuXHRcdFx0XHRcdCQodGhpcykuYWRkQ2xhc3MoXCJzZWxlY3RlZFwiKS5wYXJlbnQoKS5zaWJsaW5ncygpLmNoaWxkcmVuKCkucmVtb3ZlQ2xhc3MoXCJzZWxlY3RlZFwiKTtcblx0XHRcdFx0fVxuXHRcdFx0fSkuYXBwZW5kVG8oJGJ1dHRvbnMuY2hpbGRyZW4oKS5sYXN0KCkpLmF0dHIoJ2RhdGEtbGFuZycsdGFnTmFtZSk7XG5cdFx0fSlcblxuXHR9O1xuXG5cdGZ1bmN0aW9uIHBsYWNlRmlsdGVyTGlzdGVuZXJzKGdyaWRFbCkgeyAgIC8vIFwiLmdyaWRcIlxuXHQgICAgJCgnLmZpbHRlci13cmFwcGVyJykub24oICdjbGljaycsICcuZmlsdGVyLWl0ZW0nLCBmdW5jdGlvbigpIHsgXG5cdCAgICBcdHZhciBmaWx0ZXJWYWx1ZSA9ICQodGhpcykuZGF0YSgnbGFuZycpO1xuXHQgICAgXHQgLy8gY29uc29sZS5sb2coXCItLS0tLS0tLVwiKTtcblx0ICAgIFx0IC8vIGNvbnNvbGUubG9nKGZpbHRlclZhbHVlKTtcblxuXHQgICAgXHRpZiAoZmlsdGVyVmFsdWUgPT09ICQoJChcIi5maWx0ZXItaXRlbVwiKVswXSkuZGF0YSgnbGFuZycpKSB7XG5cdCAgICBcdFx0JChncmlkRWwpLmlzb3RvcGUoe1xuXHRcdFx0XHQgIFx0ZmlsdGVyOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0ICBcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHQgIFx0ICBcdH1cblx0XHRcdFx0fSk7XG5cdCAgICBcdH0gZWxzZSB7XG5cdFx0XHRcdCQoZ3JpZEVsKS5pc290b3BlKHtcblx0XHRcdFx0ICBcdGZpbHRlcjogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCAgXHRcdHRhZ1RleHQ9ICQodGhpcykuZGF0YSgncG9ydGZvbGlvVGFncycpO1xuXHRcdFx0XHQgIFx0XHRmb3VuZCA9IHRhZ1RleHQuc2VhcmNoKGZpbHRlclZhbHVlKTtcblx0XHRcdFx0XHQgIFx0aWYgKGZvdW5kPiAtMSkge1xuXHRcdFx0XHRcdCAgXHRcdHJldHVybiB0cnVlXG5cdFx0XHRcdFx0ICBcdH0gICBlbHNlIHtcblx0XHRcdFx0XHQgIFx0XHRyZXR1cm4gZmFsc2VcdCBcdFx0ICBcdFxuXHRcdFx0XHRcdCAgXHR9XG5cdFx0XHQgIFx0ICBcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdCAgICB9KTtcblxuXHRcdCQoZ3JpZEVsICsgJyAuZ3JpZC1pdGVtJykub24oICdjbGljaycsIGZ1bmN0aW9uKGUpIHsgXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRpZiAoJCh0aGlzKS5oYXNDbGFzcygnZ3JpZC1pdGVtLXNlbGVjdGVkJykpIHtcblx0XHRcdFx0JCh0aGlzKS5yZW1vdmVDbGFzcygnZ3JpZC1pdGVtLXNlbGVjdGVkJyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkKGdyaWRFbCArICcgLmdyaWQtaXRlbScpLnJlbW92ZUNsYXNzKCdncmlkLWl0ZW0tc2VsZWN0ZWQnKTtcblx0XHRcdFx0JCh0aGlzKS5hZGRDbGFzcygnZ3JpZC1pdGVtLXNlbGVjdGVkJyk7XG5cdFx0XHR9XG5cdFx0XHQkKGdyaWRFbCkuaXNvdG9wZSgnbGF5b3V0Jyk7XG5cdFx0XHQvLyBjb25zb2xlLmxvZygnZ3JpZCBpdGVtIGNsaWNrZWQnKTtcblx0XHRcdC8vIGNvbnNvbGUubG9nKCQodGhpcykpO1xuXHRcdH0pO1xuXHR9XG4iXX0=
