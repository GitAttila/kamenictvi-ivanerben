var ContactFormModule=function(){return{initContactFormListener:function(){$("#contact-form .btn-site").on("click",function(){$("#contact-form").submit()}),$("#contact-form").submit(function(e){e.preventDefault(),console.log("Form submitted listener called");var t=$("#contact-form").find("input, textarea, select"),s={};t.each(function(){this.name&&("checkbox"==this.type||"radio"==this.type?this.checked&&(s[this.name]=this.value):s[this.name]=this.value)}),console.log("formValues : "+JSON.stringify(s)),$.ajax({url:"assets/php/handleajaxform.php",method:"POST",data:s,success:function(e){if(console.log("AJAX post result result : "+JSON.stringify(e)),$("div[data-error-id]").text(""),$("#contact-form input, #contact-form textarea").removeClass("form-error"),$("#send-result").text(""),Object.keys(e.errors).length>0)for(var t in e.errors)console.log("error in "+t+": "+e.errors[t]),$('div[data-error-id="'+t+'"]').text(e.errors[t]).hide().slideDown(),$('*[name="'+t+'"]').addClass("form-error"),$('*[name="'+t+'"]').animateCss("shake");else console.log("All validation passed succesfully!"),$("#send-result").text("Thank you. Your message has been sent."),$("#send-result").removeClass("alert-danger").addClass("alert-success"),$("#send-result").show().animateCss("bounceIn",function(){$("input").val(""),$("textarea").val(""),$("#send-result").delay(5e3).slideUp()})},error:function(){$("#send-result").removeClass("alert-success"),$("#send-result").addClass("alert-danger"),$("#send-result").text("Sorry... Your message could not have been delivered."),$("#send-result").slideDown()}})})}}}();
var MapModule=function(){var e,n={lat:50.048822,lng:15.200242};return{initContactMap:function(){var a=[{featureType:"all",elementType:"all",stylers:[{saturation:-100},{gamma:.5}]}],t=new google.maps.Map(document.getElementById("contact-map"),{center:n,scrollwheel:!1,streetViewControl:!0,streetViewControl:{position:google.maps.ControlPosition.LEFT_BOTTOM},mapTypeControl:!0,mapTypeControlOptions:{position:google.maps.ControlPosition.BOTTOM_LEFT},zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},styles:a,zoom:8});e=t;new google.maps.Marker({map:t,position:n,title:"Kamenictví Erben",icon:{url:"assets/images/IE_logo_rounded_pointer.png",scaledSize:new google.maps.Size(150,150)}});e.panBy(0,-$("nav.navbar").height())},placeContactListeners:function(){$(".btn-map").on("click",function(a){a.preventDefault();var t=$(this);if(window.addEventListener("orientationchange",function(){t.children().hasClass("fa-expand")&&(window.matchMedia("(orientation: landscape)").matches&&window.innerWidth<767?$("#contact-map").animate({height:"75vh"},500,function(){google.maps.event.trigger(e,"resize"),e.setCenter(n),e.panBy(0,-$("nav.navbar").height())}):$("#contact-map").animate({height:"50vh"},500,function(){google.maps.event.trigger(e,"resize"),e.setCenter(n),e.panBy(0,-$("nav.navbar").height())}))},!1),t.children().hasClass("fa-expand"))return t.children().removeClass("fa-expand").addClass("fa-compress"),void $("#contact-map").animate({height:"100vh"},500,function(){google.maps.event.trigger(e,"resize"),e.setCenter(n),e.panBy(0,-$("nav.navbar").height())});t.children().hasClass("fa-compress")&&(t.children().removeClass("fa-compress").addClass("fa-expand"),window.matchMedia("(orientation: landscape)").matches&&window.innerWidth<767?$("#contact-map").animate({height:"75vh"},500,function(){google.maps.event.trigger(e,"resize"),e.setCenter(n),e.panBy(0,-$("nav.navbar").height())}):$("#contact-map").animate({height:"50vh"},500,function(){google.maps.event.trigger(e,"resize"),e.setCenter(n),e.panBy(0,-$("nav.navbar").height())}))})}}}();
$(function(n){$(".loader-wrapper").hide();setInterval(function(){$(".btn-down").animateCss("bounce")},3e3);$.fn.extend({animateCss:function(n,e){return this.addClass("animated "+n).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("animated "+n),$.isFunction(e)&&e()}),this}}),initCarousels=function(){console.log("carousels initialized");for(var n=[{carousel:"#main-carousel",interval:7e3,pause:"none"},{carousel:"#about-carousel",interval:5e3,pause:"none"},{carousel:"#carouselTombstones",interval:3e3,pause:"none"},{carousel:"#carouselGarden",interval:3e3,pause:"none"},{carousel:"#carouselRestorations",interval:3e3,pause:"none"},{carousel:"#CarouselMonuments",interval:3e3,pause:"none"}],e=0;e<n.length-1;e++)$(n[e].carousel).carousel({interval:n[e].interval})},n.initCarousels=initCarousels}(window));
!function(a,t){var n=["cz","en"],e=function(a){return new e.init(a)};e.prototype={getKeyVal:function(a){return self=this,function(){a=a.trim();for(var t,n=0;n<=e.data.length-1;n++){if(e.data[n].datatag===a)return t=e.data[n][self.activeLang];t=""}return t}()},switchLang:function(a){self=this;for(var n=t("[data-lang]").length,e=0;e<=n-1;e++){var i=t(t("[data-lang]")[e]).data("lang");value=LNG$(a).getKeyVal(i),void 0===value?console.log("Language tag '"+i+"' is not defined in language database for: "+a):""!==value.trim()&&(value.search("<ph>")>-1?(value=value.substr(4,value.length),t(t("[data-lang]")[e]).attr("placeholder",value)):t(t("[data-lang]")[e]).text(LNG$(a).getKeyVal(i)).animateCss("pulse"),t(t("[data-lang]")[e]).css("visibility","visible"))}}},e.init=function(a){this.activeLang=a||n[0]},e.init.prototype=e.prototype,a.Lang=a.LNG$=e,function(a,n){t.getJSON(a,function(){}).done(function(a){console.log("lang data loaded..."),n(a)}).fail(function(a,t,n){console.log("--- error ---"),console.log(a)}).always(function(){})}("./assets/data/lang.json",function(a){e.data=a;var n=t(".lang-switcher>span").text().trim();LNG$(n).switchLang(n)})}(window,jQuery);
$(function(n){function a(){function a(n,a,e){"function"!=typeof e&&(e=function(){}),$(a).append($("<script />",{src:n,async:!0,defer:!0})),e()}function i(n){"function"!=typeof n&&(n=function(){}),$("#ajax-container").show(),$(".loader-wrapper").hide(),$("#ajax-content").fadeIn(500,function(){n()})}var u={};$cachedItems=$("#mainNavbar [data-menuitem]"),$($cachedItems).each(function(n,a){u[$(a).data("menuitem")]=""}),n.mySite.cachedPage=u;var m={main:function(){initCarousels(),o(),d||c("#parallax1","#parallax1 > div")},about:function(){initCarousels(),d||c("#parallax2","#parallax2 > div")},realisations:function(){initCommisionsGallery(function(){LNG$(s).switchLang(s)})},pricing:function(){initPricingGallery(function(){LNG$(s).switchLang(s)})},contact:function(n){n=n||!1,n?a("https://maps.googleapis.com/maps/api/js?key="+l+"&callback=MapModule.initContactMap","body",function(){MapModule.placeContactListeners(),ContactFormModule.initContactFormListener()}):(MapModule.initContactMap(),MapModule.placeContactListeners(),ContactFormModule.initContactFormListener())}};e(),t(!0),$("#mainNavbar").on("show.bs.collapse",function(){$(".hamburger__menu-icon").addClass("hamburger__menu-icon--close-x")}),$("#mainNavbar").on("hide.bs.collapse",function(){$(".hamburger__menu-icon").removeClass("hamburger__menu-icon--close-x")}),$(".nav-link").on("click",function(n){n.preventDefault();var a=this.href.trim().toLowerCase(),e=$(this).data("menuitem").trim().toLowerCase();s=$(".lang-switcher>span").text().trim(),$(this).siblings(".nav-link").removeClass("active"),$(this).addClass("active"),console.log(r),void 0!==r&&null!==r&&(r=r.destroy(!0)),$("#mainNavbar").collapse("hide"),$("#ajax-container").fadeOut(500,function(){$("#ajax-content").hide(),$(".loader-wrapper").fadeIn(500),$("body,html").stop().animate({scrollTop:0},"50"),$(this).remove(),""===mySite.cachedPage[e]?$("#ajax-content").load(a+" #ajax-container",function(n,a){"success"===a?(console.log("Loaded '"+e+"' from SERVER..."),i(function(){LNG$(s).switchLang(s),u[e]=$(n).find("#ajax-container"),mapInitFlag="contact"===e,m[e](mapInitFlag)})):"error"===a&&($(".loader-wrapper").hide(),console.log("Error loading from server..."))}):(console.log("Loaded '"+e+"' from CACHE..."),$(mySite.cachedPage[e]).appendTo("#ajax-content"),i(function(){LNG$(s).switchLang(s),m[e]()}))})})}function e(){var n=0;$(window).on("scroll",function(){var a=$(window).height(),e=$(window).scrollTop();n=a/5,e<0&&(e=0),(a-n)/e>1?$(".btn-move-up").is(":visible")&&$(".btn-move-up").animateCss("bounceOut",function(){$(".btn-move-up").hide(),$(".btn-down").show().animateCss("bounceIn")}):$(".btn-move-up").is(":visible")||$(".btn-down").animateCss("bounceOut",function(){$(".btn-down").hide(),$(".btn-move-up").show(),$(".btn-move-up").animateCss("bounceIn")})}),$(".btn-move-up").on("click",function(){$("body,html").stop().animate({scrollTop:0},"700","swing")}),$(".btn-down").on("click",function(n){n.preventDefault();var a=n.currentTarget.hash,e=$(a).offset().top;$("body,html").stop().animate({scrollTop:e},"700","swing")})}function t(n){function a(n,a){"object"!=typeof n&&(n=n||[]),"string"!=typeof a&&(a=a||"");var e=!1;return-1===n.indexOf(i)?console.log("error: language: '"+a+"' within 'index.html' file is not compatible with languages defined."):e=!0,e}var n=n||!1,e=[],t={cz:!0,en:!0,de:!1};$.each(t,function(n,a){a&&e.push(n)});var i=$(".lang-switcher>span").text().trim();n&&LNG$(i).switchLang(i),$(".lang-switcher>span").on("click",function(){var n=e.indexOf(i)+1;a(e,i)&&(n=n===e.length?0:n,i=e[n],$(".lang-switcher>span").text(i),LNG$(i).switchLang(i),$(this).animateCss("bounceIn"))})}function o(){$(".btn-site").on("click",function(n){n.preventDefault;var a=$(this).data("link").trim(),i=window.location.href;i.search("index.html")>=0?i=i.replace("index.html","realisations.html"):i+="realisations.html",$("#ajax-container").fadeOut(500,function(){$("#ajax-content").hide(),$(".loader-wrapper").show(),$(".navbar-nav>.nav-link").removeClass("active"),$(".navbar-nav>.nav-link[href='realisations.html']").addClass("active"),""===mySite.cachedPage.realisations?$("#ajax-content").load(i+" #ajax-container",function(){$(".loader-wrapper").hide(),$("#ajax-content").fadeIn(500),e(),t(),initCommisionsGallery(function(){LNG$(s).switchLang(s),$(".filter-item").each(function(n){if(void 0!==$(this).data("lang")&&$(this).data("lang").toLowerCase().trim()===a)return void $(this).trigger("click")})})}):(console.log("Loaded 'realisations' with quick link from CACHE..."),$(mySite.cachedPage.realisations).appendTo("#ajax-content"),$(".loader-wrapper").hide(),$("#ajax-content").fadeIn(500),e(),t(),initCommisionsGallery(function(){LNG$(s).switchLang(s),$(".filter-item").each(function(n){if(void 0!==$(this).data("lang")&&$(this).data("lang").toLowerCase().trim()===a)return void $(this).trigger("click")})}))})})}function c(n,a){if(n=n||"",a=a||"",!d){var e=new ScrollMagic.Controller({globalSceneOptions:{triggerHook:"onEnter",duration:"100%"}});new ScrollMagic.Scene({triggerElement:n}).setTween(a,{y:"50%",ease:Linear.easeNone}).addTo(e)}}var r,s="",l="AIzaSyA0qVKpndfcoIgP5nwuJxmH5q0v5TSvEc4";n.mySite={};var d=function(){var n=["android","webos","iphone","ipad","blackberry"];for(i in n)if(navigator.userAgent.toLowerCase().search(n[i])>-1&&void 0!==window.orientation)return!0;return!1}();n.mySite.isMobileFlag=d,!0===d&&$("body").addClass("isMobile"),$(window).load(function(){o(),a(),e(),t(),c("#parallax1","#parallax1 > div")}),n.mySite.navMenuInit=a,n.mySite.placeButtonMoveUpListener=e,n.mySite.placeLangSwitchListener=t,n.mySite.initParallax=c}(window));
function initCommisionsGallery(e){e="function"==typeof e?e:function(){};var i=0;$(".grid-item>.img-result-wrapper").hide(),$(".grid-item>.img-loader-wrapper").show(),$(".grid>.grid-item").addClass("hover-off"),$("#portfolios").imagesLoaded().always(function(i){console.log("all images of 'Commisions menu' loaded"),instantiateIsotopeGallery(".grid",{itemSelector:".grid-item",stagger:30}),buildImgCategories("#filter-portfolio","#portfolio-gallery .grid-item"),placeFilterListeners(".grid"),$(".grid-item>.img-result-wrapper").fadeOut(1e3),$(".img-loader>.img-loader-text").text("images loaded"),$(".img-loader-bar").css("background-color","green"),$(".img-loader").delay(3e3).slideUp(1e3),$(".grid>.grid-item").removeClass("hover-off"),e()}).done(function(){console.log("all images of 'Commisions menu' successfully loaded")}).fail(function(){console.log(i+" of 'Commisions menu' images have broken links. Check your image paths."),$(".img-loader").delay(3e3).slideUp(1e3)}).progress(function(e,t){t.isLoaded?($(t.img).siblings(".img-loader-wrapper").hide(),$(t.img).siblings(".img-result-wrapper").animateCss("bounceIn").show(),$(".img-loader-bar").width(e.progressedCount/e.images.length*100+"%")):(i++,$(t.img).parent().remove())})}function initPricingGallery(e){e="function"==typeof e?e:function(){};var i=0;$(".grid-pricing>.grid-item-pricing").addClass("hover-off"),$("#pricing").imagesLoaded().always(function(i){console.log("all images of 'Pricing menu' loaded"),instantiateIsotopeGallery(".grid-pricing",{itemSelector:".grid-item-pricing",stagger:30}),buildImgCategories("#filter-pricelist","#pricing-gallery .grid-item-pricing"),placeFilterListeners(".grid-pricing"),$(".grid-pricing>.grid-item-pricing").removeClass("hover-off"),e()}).done(function(){console.log("All images of 'Pricing menu' successfully loaded")}).fail(function(){console.log(i+" of 'Pricing menu' images have broken links. Check your image paths.")}).progress(function(e,t){t.isLoaded||(i++,$(t.img).parent().remove())})}function instantiateIsotopeGallery(e,i){$(e).isotope(i)}function buildImgCategories(e,i){var t=$(i),o=$(e),r={};o.children().remove(),t.each(function(){var e=this,i=$(this).data("portfolio-tags");i&&i.split(",").forEach(function(i){i=i.trim(),null==r[i]&&(r[i]=[]),r[i].push(e)})}),o.addClass("filter-wrapper"),$("<li/>").appendTo(o),$("<a/>",{text:"Vše",class:"filter-item selected",click:function(){$(this).addClass("selected").parent().siblings().children().removeClass("selected")}}).appendTo(o.children().eq(0)).attr("data-lang","Vše"),$("<li><a class='filter-item filter-portfolio-divider'>&nbsp;</a></li>").appendTo(o),$.each(r,function(e){$("<li/>").appendTo(o),$("<a/>",{text:e,class:"filter-item",click:function(){$(this).addClass("selected").parent().siblings().children().removeClass("selected")}}).appendTo(o.children().last()).attr("data-lang",e)})}function placeFilterListeners(e){$(".filter-wrapper").on("click",".filter-item",function(){var i=$(this).data("lang");i===$($(".filter-item")[0]).data("lang")?$(e).isotope({filter:function(){return!0}}):$(e).isotope({filter:function(){return tagText=$(this).data("portfolioTags"),found=tagText.search(i),found>-1}})}),$(e+" .grid-item").on("click",function(i){i.preventDefault(),$(this).hasClass("grid-item-selected")?$(this).removeClass("grid-item-selected"):($(e+" .grid-item").removeClass("grid-item-selected"),$(this).addClass("grid-item-selected")),$(e).isotope("layout")})}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRhY3QtZm9ybS5qcyIsImNvbnRhY3RfbWFwLmpzIiwiaW5pdC5qcyIsImxhbmd1YWdlLWNvbnRyb2xsZXIuanMiLCJuYXZpZ2F0aW9uLmpzIiwicG9ydGZvbGlvX2ZpbHRlci5qcyJdLCJuYW1lcyI6WyJDb250YWN0Rm9ybU1vZHVsZSIsImluaXRDb250YWN0Rm9ybUxpc3RlbmVyIiwiJCIsIm9uIiwic3VibWl0IiwiZSIsInByZXZlbnREZWZhdWx0IiwiY29uc29sZSIsImxvZyIsImlucHV0RWxlbWVudHMiLCJmaW5kIiwiZm9ybVZhbHVlcyIsImVhY2giLCJ0aGlzIiwibmFtZSIsInR5cGUiLCJjaGVja2VkIiwidmFsdWUiLCJKU09OIiwic3RyaW5naWZ5IiwiYWpheCIsInVybCIsIm1ldGhvZCIsImRhdGEiLCJzdWNjZXNzIiwicmVzdWx0IiwidGV4dCIsInJlbW92ZUNsYXNzIiwiT2JqZWN0Iiwia2V5cyIsImVycm9ycyIsImxlbmd0aCIsImlucHV0TmFtZSIsImhpZGUiLCJzbGlkZURvd24iLCJhZGRDbGFzcyIsImFuaW1hdGVDc3MiLCJzaG93IiwidmFsIiwiZGVsYXkiLCJzbGlkZVVwIiwiZXJyb3IiLCJNYXBNb2R1bGUiLCJteU1hcCIsIm15UG9zaXRpb24iLCJsYXQiLCJsbmciLCJpbml0Q29udGFjdE1hcCIsInN0eWxlQXJyYXkiLCJmZWF0dXJlVHlwZSIsImVsZW1lbnRUeXBlIiwic3R5bGVycyIsInNhdHVyYXRpb24iLCJnYW1tYSIsIm1hcCIsImdvb2dsZSIsIm1hcHMiLCJNYXAiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY2VudGVyIiwic2Nyb2xsd2hlZWwiLCJzdHJlZXRWaWV3Q29udHJvbCIsInBvc2l0aW9uIiwiQ29udHJvbFBvc2l0aW9uIiwiTEVGVF9CT1RUT00iLCJtYXBUeXBlQ29udHJvbCIsIm1hcFR5cGVDb250cm9sT3B0aW9ucyIsIkJPVFRPTV9MRUZUIiwiem9vbUNvbnRyb2wiLCJ6b29tQ29udHJvbE9wdGlvbnMiLCJMRUZUX0NFTlRFUiIsInN0eWxlcyIsInpvb20iLCJNYXJrZXIiLCJ0aXRsZSIsImljb24iLCJzY2FsZWRTaXplIiwiU2l6ZSIsInBhbkJ5IiwiaGVpZ2h0IiwicGxhY2VDb250YWN0TGlzdGVuZXJzIiwiJHRoaXMiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiY2hpbGRyZW4iLCJoYXNDbGFzcyIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwiaW5uZXJXaWR0aCIsImFuaW1hdGUiLCJldmVudCIsInRyaWdnZXIiLCJzZXRDZW50ZXIiLCJnbG9iYWwiLCJzZXRJbnRlcnZhbCIsImZuIiwiZXh0ZW5kIiwiYW5pbWF0aW9uTmFtZSIsImNhbGxCYWNrRnVuYyIsIm9uZSIsImlzRnVuY3Rpb24iLCJpbml0Q2Fyb3VzZWxzIiwiY2Fyb3VzZWxzU2V0dXAiLCJjYXJvdXNlbCIsImludGVydmFsIiwicGF1c2UiLCJpIiwic2l0ZUxhbmdzIiwiTGFuZyIsImFjdGl2ZUxhbmciLCJpbml0IiwicHJvdG90eXBlIiwiZ2V0S2V5VmFsIiwia2V5VmFsIiwic2VsZiIsInRyaW0iLCJkYXRhdGFnIiwic3dpdGNoTGFuZyIsInN3aXRjaFRvTGFuZyIsIm51bU9mTGFuZ0VscyIsInJldHJpZXZlZERhdGFUYWciLCJMTkckIiwidW5kZWZpbmVkIiwic2VhcmNoIiwic3Vic3RyIiwiYXR0ciIsImNzcyIsImNhbGxiYWNrRnVuYyIsImdldEpTT04iLCJkb25lIiwiZmFpbCIsImpxWEhSIiwidGV4dFN0YXR1cyIsImVycm9yVGhyb3duIiwiYWx3YXlzIiwiaW5pdExhbmciLCJqUXVlcnkiLCJuYXZNZW51SW5pdCIsImFkZFNjcmlwdCIsInNyYyIsImVsIiwiY2FsbGJhY2tGIiwiYXBwZW5kIiwiYXN5bmMiLCJkZWZlciIsInVwZGF0ZVBhZ2UiLCJmYWRlSW4iLCJjYWNoZWRQYWdlIiwiJGNhY2hlZEl0ZW1zIiwiaW5kZXgiLCJteVNpdGUiLCJwYWdlQ2FsbGJhY2tGdW5jIiwibWFpbiIsImxpbmtUb0dhbGxlcnkiLCJpc01vYmlsZUZsYWciLCJpbml0UGFyYWxsYXgiLCJhYm91dCIsInJlYWxpc2F0aW9ucyIsImluaXRDb21taXNpb25zR2FsbGVyeSIsInByaWNpbmciLCJpbml0UHJpY2luZ0dhbGxlcnkiLCJjb250YWN0IiwicnVuTWFwSW5pdFNjcmlwdCIsIkFQSWtleSIsInBsYWNlQnV0dG9uTW92ZVVwTGlzdGVuZXIiLCJwbGFjZUxhbmdTd2l0Y2hMaXN0ZW5lciIsImhyZWYiLCJ0b0xvd2VyQ2FzZSIsIm1lbnVOYW1lIiwic2libGluZ3MiLCJjb250cm9sbGVyIiwiZGVzdHJveSIsImNvbGxhcHNlIiwiZmFkZU91dCIsInN0b3AiLCJzY3JvbGxUb3AiLCJyZW1vdmUiLCJsb2FkIiwic3RhdHVzIiwibWFwSW5pdEZsYWciLCJhcHBlbmRUbyIsIm9mZlNldFkiLCJhY3R1YWxIZWlnaHQiLCJhY3R1YWxTY3JvbGxQb3MiLCJpcyIsImp1bXBIYXNoIiwiY3VycmVudFRhcmdldCIsImhhc2giLCJqdW1wUG9pbnQiLCJvZmZzZXQiLCJ0b3AiLCJ1cGRhdGUiLCJpc0xhbmdEZWZpbmVkIiwiYWN0aXZlTGFuZ3MiLCJsYW5nVG9DaGVjayIsImlzRGVmaW5lZCIsImluZGV4T2YiLCJhY3RpdmVMYW5ndWFnZXMiLCJsYW5ndWFnZXMiLCJjeiIsImVuIiwiZGUiLCJwdXNoIiwibmV4dCIsImdhbExpbmsiLCJsb2NhdGlvbiIsInJlcGxhY2UiLCJ0cmlnZ2VyRWxlbWVudCIsInR3ZWVuRWxlbWVudCIsIlNjcm9sbE1hZ2ljIiwiQ29udHJvbGxlciIsImdsb2JhbFNjZW5lT3B0aW9ucyIsInRyaWdnZXJIb29rIiwiZHVyYXRpb24iLCJTY2VuZSIsInNldFR3ZWVuIiwieSIsImVhc2UiLCJMaW5lYXIiLCJlYXNlTm9uZSIsImFkZFRvIiwiYWdlbnRzIiwibmF2aWdhdG9yIiwidXNlckFnZW50Iiwib3JpZW50YXRpb24iLCJicm9rZW5Db3VudCIsImltYWdlc0xvYWRlZCIsImluc3RhbmNlIiwiaW5zdGFudGlhdGVJc290b3BlR2FsbGVyeSIsIml0ZW1TZWxlY3RvciIsInN0YWdnZXIiLCJidWlsZEltZ0NhdGVnb3JpZXMiLCJwbGFjZUZpbHRlckxpc3RlbmVycyIsInByb2dyZXNzIiwiaW1hZ2UiLCJpc0xvYWRlZCIsImltZyIsIndpZHRoIiwicHJvZ3Jlc3NlZENvdW50IiwiaW1hZ2VzIiwicGFyZW50Iiwib3B0aW9ucyIsImlzb3RvcGUiLCJsaXN0RWxlbWVudCIsImltZ0NvbnRhaW5lcnMiLCIkaW1nQ29udGFpbmVycyIsIiRidXR0b25zIiwidGFnZ2VkIiwiaW1nQ29udGFpbmVyIiwidGFncyIsInNwbGl0IiwiZm9yRWFjaCIsInRhZ05hbWUiLCJjbGFzcyIsImNsaWNrIiwiZXEiLCJsYXN0IiwiZ3JpZEVsIiwiZmlsdGVyVmFsdWUiLCJmaWx0ZXIiLCJ0YWdUZXh0IiwiZm91bmQiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUlBLG1CQUFvQixXQTRFcEIsT0FDSUMsd0JBM0UwQixXQUUxQkMsRUFBRSwyQkFBMkJDLEdBQUksUUFBUyxXQUV0Q0QsRUFBRyxpQkFBa0JFLFdBR3pCRixFQUFFLGlCQUFpQkUsT0FBTyxTQUFTQyxHQUMvQkEsRUFBRUMsaUJBRUZDLFFBQVFDLElBQUksaUNBRVosSUFBSUMsR0FBZ0JQLEVBQUUsaUJBQWlCUSxLQUFLLDJCQUN4Q0MsSUFFSkYsR0FBY0csS0FBSyxXQUNYQyxLQUFLQyxPQUNZLFlBQWJELEtBQUtFLE1BQW1DLFNBQWJGLEtBQUtFLEtBQzVCRixLQUFLRyxVQUNMTCxFQUFXRSxLQUFLQyxNQUFRRCxLQUFLSSxPQUdqQ04sRUFBV0UsS0FBS0MsTUFBUUQsS0FBS0ksU0FLekNWLFFBQVFDLElBQUksZ0JBQWtCVSxLQUFLQyxVQUFVUixJQUU3Q1QsRUFBRWtCLE1BQ0VDLElBQUssZ0NBQ0xDLE9BQVEsT0FDUkMsS0FBTVosRUFDTmEsUUFBUyxTQUFTQyxHQVFkLEdBTkFsQixRQUFRQyxJQUFJLDZCQUErQlUsS0FBS0MsVUFBVU0sSUFFMUR2QixFQUFFLHNCQUFzQndCLEtBQUssSUFD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QixLQUFNbU8sRUFDTkMsTUFBTyxjQUNQQyxNQUFPLFdBQ043UCxFQUFFVyxNQUFNc0IsU0FBUyxZQUFZOE0sU0FBU3ZFLFdBQVdyRixXQUFXMUQsWUFBWSxlQUV2RTBKLFNBQVNrRSxFQUFTbEssV0FBVzRLLFFBQVFuSSxLQUFLLFlBQVkrSCxLQUszRCxRQUFTcEIsc0JBQXFCeUIsR0FDMUJoUSxFQUFFLG1CQUFtQkMsR0FBSSxRQUFTLGVBQWdCLFdBQ2pELEdBQUlnUSxHQUFjalEsRUFBRVcsTUFBTVUsS0FBSyxPQUkzQjRPLEtBQWdCalEsRUFBRUEsRUFBRSxnQkFBZ0IsSUFBSXFCLEtBQUssUUFDaERyQixFQUFFZ1EsR0FBUWYsU0FDVmlCLE9BQVEsV0FDUCxPQUFPLEtBSVZsUSxFQUFFZ1EsR0FBUWYsU0FDUGlCLE9BQVEsV0FHUCxNQUZBQyxTQUFTblEsRUFBRVcsTUFBTVUsS0FBSyxpQkFDdEIrTyxNQUFRRCxRQUFRekksT0FBT3VJLEdBQ25CRyxPQUFRLE9BVW5CcFEsRUFBRWdRLEVBQVMsZUFBZS9QLEdBQUksUUFBUyxTQUFTRSxHQUMvQ0EsRUFBRUMsaUJBQ0VKLEVBQUVXLE1BQU15RSxTQUFTLHNCQUNwQnBGLEVBQUVXLE1BQU1jLFlBQVksdUJBRXBCekIsRUFBRWdRLEVBQVMsZUFBZXZPLFlBQVksc0JBQ3RDekIsRUFBRVcsTUFBTXNCLFNBQVMsdUJBRWxCakMsRUFBRWdRLEdBQVFmLFFBQVEiLCJmaWxlIjoic2NyaXB0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBDb250YWN0Rm9ybU1vZHVsZSA9IChmdW5jdGlvbigpIHtcblxuICAgIHZhciBpbml0Q29udGFjdEZvcm1MaXN0ZW5lciA9IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgJChcIiNjb250YWN0LWZvcm0gLmJ0bi1zaXRlXCIpLm9uKCBcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcImNsaWNrIGV2ZW50OiAuY29udGFjdC1zdWJtaXQgYnV0dG9uXCIpO1xuICAgICAgICAgICAgJCggXCIjY29udGFjdC1mb3JtXCIgKS5zdWJtaXQoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJChcIiNjb250YWN0LWZvcm1cIikuc3VibWl0KGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJGb3JtIHN1Ym1pdHRlZCBsaXN0ZW5lciBjYWxsZWRcIik7XG5cbiAgICAgICAgICAgIHZhciBpbnB1dEVsZW1lbnRzID0gJChcIiNjb250YWN0LWZvcm1cIikuZmluZCgnaW5wdXQsIHRleHRhcmVhLCBzZWxlY3QnKTtcbiAgICAgICAgICAgIHZhciBmb3JtVmFsdWVzID0ge307XG5cbiAgICAgICAgICAgIGlucHV0RWxlbWVudHMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnR5cGUgPT0gXCJjaGVja2JveFwiIHx8IHRoaXMudHlwZSA9PSBcInJhZGlvXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtVmFsdWVzW3RoaXMubmFtZV0gPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtVmFsdWVzW3RoaXMubmFtZV0gPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZm9ybVZhbHVlcyA6IFwiICsgSlNPTi5zdHJpbmdpZnkoZm9ybVZhbHVlcykpO1xuXG4gICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIHVybDogXCJhc3NldHMvcGhwL2hhbmRsZWFqYXhmb3JtLnBocFwiLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgZGF0YTogZm9ybVZhbHVlcyxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXN1bHQpIHtcblxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFKQVggcG9zdCByZXN1bHQgcmVzdWx0IDogXCIgKyBKU09OLnN0cmluZ2lmeShyZXN1bHQpKTtcblxuICAgICAgICAgICAgICAgICAgICAkKCdkaXZbZGF0YS1lcnJvci1pZF0nKS50ZXh0KFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAkKCcjY29udGFjdC1mb3JtIGlucHV0LCAjY29udGFjdC1mb3JtIHRleHRhcmVhJykucmVtb3ZlQ2xhc3MoJ2Zvcm0tZXJyb3InKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnI3NlbmQtcmVzdWx0JykudGV4dChcIlwiKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMocmVzdWx0LmVycm9ycykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5wdXROYW1lIGluIHJlc3VsdC5lcnJvcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yIGluIFwiICsgaW5wdXROYW1lICsgXCI6IFwiICsgcmVzdWx0LmVycm9yc1tpbnB1dE5hbWVdKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJ2RpdltkYXRhLWVycm9yLWlkPVwiJyArIGlucHV0TmFtZSArICdcIl0nKS50ZXh0KHJlc3VsdC5lcnJvcnNbaW5wdXROYW1lXSkuaGlkZSgpLnNsaWRlRG93bigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJypbbmFtZT1cIicgKyBpbnB1dE5hbWUgKyAnXCJdJykuYWRkQ2xhc3MoJ2Zvcm0tZXJyb3InKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcqW25hbWU9XCInICsgaW5wdXROYW1lICsgJ1wiXScpLmFuaW1hdGVDc3MoJ3NoYWtlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQWxsIHZhbGlkYXRpb24gcGFzc2VkIHN1Y2Nlc2Z1bGx5IVwiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNzZW5kLXJlc3VsdFwiKS50ZXh0KFwiVGhhbmsgeW91LiBZb3VyIG1lc3NhZ2UgaGFzIGJlZW4gc2VudC5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiI3NlbmQtcmVzdWx0XCIpLnJlbW92ZUNsYXNzKCdhbGVydC1kYW5nZXInKS5hZGRDbGFzcygnYWxlcnQtc3VjY2VzcycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiI3NlbmQtcmVzdWx0XCIpLnNob3coKS5hbmltYXRlQ3NzKCdib3VuY2VJbicsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnaW5wdXQnKS52YWwoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgndGV4dGFyZWEnKS52YWwoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNzZW5kLXJlc3VsdFwiKS5kZWxheSg1MDAwKS5zbGlkZVVwKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAkKFwiI3NlbmQtcmVzdWx0XCIpLnJlbW92ZUNsYXNzKCdhbGVydC1zdWNjZXNzJyk7XG4gICAgICAgICAgICAgICAgICAgICQoXCIjc2VuZC1yZXN1bHRcIikuYWRkQ2xhc3MoJ2FsZXJ0LWRhbmdlcicpO1xuICAgICAgICAgICAgICAgICAgICAkKFwiI3NlbmQtcmVzdWx0XCIpLnRleHQoXCJTb3JyeS4uLiBZb3VyIG1lc3NhZ2UgY291bGQgbm90IGhhdmUgYmVlbiBkZWxpdmVyZWQuXCIpO1xuICAgICAgICAgICAgICAgICAgICAkKFwiI3NlbmQtcmVzdWx0XCIpLnNsaWRlRG93bigpO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTsgIC8vIHRoZSBlbmQgb2YgYWpheCBjYWxsIHRvIHBvc3QgZm9ybVZhbHVlc1xuICAgICAgICB9KTsgLy8gdGhlIGVuZCBvZiBmb3JtIHN1Ym1pdCBmdW5jdGlvblxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGluaXRDb250YWN0Rm9ybUxpc3RlbmVyOiBpbml0Q29udGFjdEZvcm1MaXN0ZW5lclxuICAgIH07XG5cbn0pKCk7XG4iLCIvLyAtLS0tLS0tLS0tIEdPT0dMRSBNQVAgLS0tLS0tLS0tLVxudmFyIE1hcE1vZHVsZSA9IChmdW5jdGlvbigpIHtcblxuICB2YXIgbXlNYXA7XG4gIHZhciBteVBvc2l0aW9uID0ge2xhdDogNTAuMDQ4ODIyLCBsbmc6IDE1LjIwMDI0Mn07XG5cbiAgdmFyIGluaXRDb250YWN0TWFwID0gZnVuY3Rpb24oKXtcblxuICAgICAgLy8gU3BlY2lmeSBmZWF0dXJlcyBhbmQgZWxlbWVudHMgdG8gZGVmaW5lIHN0eWxlcy5cbiAgICAgIHZhciBzdHlsZUFycmF5ID0gW1xuICAgICAgICB7XG4gICAgICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcImFsbFwiLFxuICAgICAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJhbGxcIixcbiAgICAgICAgICBcInN0eWxlcnNcIjogW1xuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBcInNhdHVyYXRpb25cIjogLTEwMFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBcImdhbW1hXCI6IDAuNVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgXVxuICAgICAgICB9XG4gICAgICBdO1xuXG4gICAgICAvLyBDcmVhdGUgYSBtYXAgb2JqZWN0IGFuZCBzcGVjaWZ5IHRoZSBET00gZWxlbWVudCBmb3IgZGlzcGxheS5cbiAgICAgIHZhciBtYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udGFjdC1tYXBcIiksIHtcbiAgICAgICAgICBjZW50ZXI6IG15UG9zaXRpb24sXG4gICAgICAgICAgc2Nyb2xsd2hlZWw6IGZhbHNlLFxuICAgICAgICAgIHN0cmVldFZpZXdDb250cm9sOiB0cnVlLFxuICAgICAgICAgIHN0cmVldFZpZXdDb250cm9sOiB7XG4gICAgICAgICAgICBwb3NpdGlvbjogZ29vZ2xlLm1hcHMuQ29udHJvbFBvc2l0aW9uLkxFRlRfQk9UVE9NXG4gICAgICAgICAgfSxcbiAgICAgICAgICBtYXBUeXBlQ29udHJvbDogdHJ1ZSxcbiAgICAgICAgICBtYXBUeXBlQ29udHJvbE9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgcG9zaXRpb246IGdvb2dsZS5tYXBzLkNvbnRyb2xQb3NpdGlvbi5CT1RUT01fTEVGVFxuICAgICAgICAgIH0sXG4gICAgICAgICAgem9vbUNvbnRyb2w6IHRydWUsXG4gICAgICAgICAgem9vbUNvbnRyb2xPcHRpb25zOiB7XG4gICAgICAgICAgICBwb3NpdGlvbjogZ29vZ2xlLm1hcHMuQ29udHJvbFBvc2l0aW9uLkxFRlRfQ0VOVEVSXG4gICAgICAgICAgfSxcbiAgICAgICAgICAvLyBBcHBseSB0aGUgbWFwIHN0eWxlIGFycmF5IHRvIHRoZSBtYXAuXG4gICAgICAgICAgc3R5bGVzOiBzdHlsZUFycmF5LFxuICAgICAgICAgIHpvb206IDhcbiAgICAgIH0pO1xuXG4gICAgICBteU1hcCA9IG1hcDtcbiAgICAgIC8vIENyZWF0ZSBhIG1hcmtlciBhbmQgc2V0IGl0cyBwb3NpdGlvbi5cblxuICAgICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xuICAgICAgICBtYXA6IG1hcCxcbiAgICAgICAgcG9zaXRpb246IG15UG9zaXRpb24sXG4gICAgICAgIHRpdGxlOiAnS2FtZW5pY3R2w60gRXJiZW4nLFxuICAgICAgICBpY29uOiB7XG4gICAgICAgICAgdXJsOiBcImFzc2V0cy9pbWFnZXMvSUVfbG9nb19yb3VuZGVkX3BvaW50ZXIucG5nXCIsXG4gICAgICAgICAgc2NhbGVkU2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoMTUwLCAxNTApXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBteU1hcC5wYW5CeSgwLCgtJChcIm5hdi5uYXZiYXJcIikuaGVpZ2h0KCkpKTtcblxuICAgIH1cblxuICAgIHZhciBwbGFjZUNvbnRhY3RMaXN0ZW5lcnMgPSBmdW5jdGlvbigpe1xuICBcdFx0JChcIi5idG4tbWFwXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSl7XG4gIFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcbiAgXHRcdFx0dmFyICR0aGlzPSQodGhpcyk7XG5cbiAgXHRcdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvcmllbnRhdGlvbmNoYW5nZVwiLCBmdW5jdGlvbigpIHtcbiAgXHRcdFx0XHRpZiAoJHRoaXMuY2hpbGRyZW4oKS5oYXNDbGFzcyhcImZhLWV4cGFuZFwiKSkge1xuICBcdFx0XHRcdFx0aWYgKHdpbmRvdy5tYXRjaE1lZGlhKFwiKG9yaWVudGF0aW9uOiBsYW5kc2NhcGUpXCIpLm1hdGNoZXMgJiYgd2luZG93LmlubmVyV2lkdGg8NzY3KSB7XG4gIFx0XHRcdFx0XHRcdCQoXCIjY29udGFjdC1tYXBcIikuYW5pbWF0ZSh7XG4gIFx0XHRcdFx0XHRcdFx0aGVpZ2h0OiBcIjc1dmhcIlxuICBcdFx0XHRcdFx0XHR9LDUwMCwgZnVuY3Rpb24oKXtcbiAgXHRcdFx0XHRcdFx0XHRnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKG15TWFwLCBcInJlc2l6ZVwiKTtcbiAgXHRcdFx0XHRcdFx0XHRteU1hcC5zZXRDZW50ZXIobXlQb3NpdGlvbik7XG4gIFx0XHRcdFx0XHRcdFx0bXlNYXAucGFuQnkoMCwoLSQoXCJuYXYubmF2YmFyXCIpLmhlaWdodCgpKSk7XG4gIFx0XHRcdFx0XHRcdH0pO1xuICBcdFx0XHRcdFx0fSBlbHNlIHtcbiAgXHRcdFx0XHRcdFx0JChcIiNjb250YWN0LW1hcFwiKS5hbmltYXRlKHtcbiAgXHRcdFx0XHRcdFx0XHRoZWlnaHQ6IFwiNTB2aFwiXG4gIFx0XHRcdFx0XHRcdH0sNTAwLCBmdW5jdGlvbigpe1xuICBcdFx0XHRcdFx0XHRcdGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIobXlNYXAsIFwicmVzaXplXCIpO1xuICBcdFx0XHRcdFx0XHRcdG15TWFwLnNldENlbnRlcihteVBvc2l0aW9uKTtcbiAgXHRcdFx0XHRcdFx0XHRteU1hcC5wYW5CeSgwLCgtJChcIm5hdi5uYXZiYXJcIikuaGVpZ2h0KCkpKTtcbiAgXHRcdFx0XHRcdFx0fSk7XG4gIFx0XHRcdFx0XHR9XG4gIFx0XHRcdFx0fVxuICBcdFx0XHR9LCBmYWxzZSk7XG5cbiAgXHRcdFx0aWYgKCR0aGlzLmNoaWxkcmVuKCkuaGFzQ2xhc3MoXCJmYS1leHBhbmRcIikpIHtcbiAgXHRcdFx0XHQkdGhpcy5jaGlsZHJlbigpLnJlbW92ZUNsYXNzKFwiZmEtZXhwYW5kXCIpLmFkZENsYXNzKFwiZmEtY29tcHJlc3NcIik7XG4gIFx0XHRcdFx0JChcIiNjb250YWN0LW1hcFwiKS5hbmltYXRlKHtcbiAgXHRcdFx0XHRcdGhlaWdodDogXCIxMDB2aFwiXG4gIFx0XHRcdFx0fSw1MDAsIGZ1bmN0aW9uKCl7XG4gIFx0XHRcdFx0XHRnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKG15TWFwLCBcInJlc2l6ZVwiKTtcbiAgXHRcdFx0XHRcdG15TWFwLnNldENlbnRlcihteVBvc2l0aW9uKTtcbiAgXHRcdFx0XHRcdG15TWFwLnBhbkJ5KDAsKC0kKFwibmF2Lm5hdmJhclwiKS5oZWlnaHQoKSkpO1xuICBcdFx0XHRcdH0pO1xuICBcdFx0XHRcdHJldHVybjtcbiAgXHRcdFx0fSBlbHNlIGlmICgkdGhpcy5jaGlsZHJlbigpLmhhc0NsYXNzKFwiZmEtY29tcHJlc3NcIikpIHtcbiAgXHRcdFx0XHQkdGhpcy5jaGlsZHJlbigpLnJlbW92ZUNsYXNzKFwiZmEtY29tcHJlc3NcIikuYWRkQ2xhc3MoXCJmYS1leHBhbmRcIik7XG4gIFx0XHRcdFx0aWYgKHdpbmRvdy5tYXRjaE1lZGlhKFwiKG9yaWVudGF0aW9uOiBsYW5kc2NhcGUpXCIpLm1hdGNoZXMgJiYgd2luZG93LmlubmVyV2lkdGg8NzY3KSB7XG4gIFx0XHRcdFx0XHQkKFwiI2NvbnRhY3QtbWFwXCIpLmFuaW1hdGUoe1xuICBcdFx0XHRcdFx0XHRoZWlnaHQ6IFwiNzV2aFwiXG4gIFx0XHRcdFx0XHR9LDUwMCwgZnVuY3Rpb24oKXtcbiAgXHRcdFx0XHRcdFx0Z29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcihteU1hcCwgXCJyZXNpemVcIik7XG4gIFx0XHRcdFx0XHRcdG15TWFwLnNldENlbnRlcihteVBvc2l0aW9uKTtcbiAgXHRcdFx0XHRcdFx0bXlNYXAucGFuQnkoMCwoLSQoXCJuYXYubmF2YmFyXCIpLmhlaWdodCgpKSk7XG4gIFx0XHRcdFx0XHR9KTtcbiAgXHRcdFx0XHR9IGVsc2Uge1xuICBcdFx0XHRcdFx0JChcIiNjb250YWN0LW1hcFwiKS5hbmltYXRlKHtcbiAgXHRcdFx0XHRcdFx0aGVpZ2h0OiBcIjUwdmhcIlxuICBcdFx0XHRcdFx0fSw1MDAsIGZ1bmN0aW9uKCl7XG4gIFx0XHRcdFx0XHRcdGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIobXlNYXAsIFwicmVzaXplXCIpO1xuICBcdFx0XHRcdFx0XHRteU1hcC5zZXRDZW50ZXIobXlQb3NpdGlvbik7XG4gIFx0XHRcdFx0XHRcdG15TWFwLnBhbkJ5KDAsKC0kKFwibmF2Lm5hdmJhclwiKS5oZWlnaHQoKSkpO1xuICBcdFx0XHRcdFx0fSk7XG4gIFx0XHRcdFx0fVxuICBcdFx0XHR9XG4gIFx0XHR9KVxuICBcdH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGluaXRDb250YWN0TWFwOmluaXRDb250YWN0TWFwLFxuICAgICAgICBwbGFjZUNvbnRhY3RMaXN0ZW5lcnM6cGxhY2VDb250YWN0TGlzdGVuZXJzXG4gICAgfVxuXG59KSgpO1xuIiwiJChmdW5jdGlvbihnbG9iYWwpe1xuICAgIFxuICAgIC8vIHZhciBzY2VuZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXJhbGxheC1zY2VuZScpO1xuICAgIC8vIHZhciBwYXJhbGxheCA9IG5ldyBQYXJhbGxheChzY2VuZSk7XG5cbiAgICAkKCcubG9hZGVyLXdyYXBwZXInKS5oaWRlKCk7XG4gICAgXG4gICAgdmFyIGJ0bkludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICQoXCIuYnRuLWRvd25cIikuYW5pbWF0ZUNzcyhcImJvdW5jZVwiKTtcbiAgICAgICAgfSwzMDAwKTtcblxuICAgIC8vIC0tLS0tLS0tLS0gSlFVRVJZIEFOSU1BVEUgRVhURU5TSU9OIC0tLS0tLS0tLS1cbiAgICAkLmZuLmV4dGVuZCh7XG4gICAgICAgIGFuaW1hdGVDc3M6IGZ1bmN0aW9uIChhbmltYXRpb25OYW1lLCBjYWxsQmFja0Z1bmMpIHtcbiAgICAgICAgICAgIHZhciBhbmltYXRpb25FbmQgPSAnd2Via2l0QW5pbWF0aW9uRW5kIG1vekFuaW1hdGlvbkVuZCBNU0FuaW1hdGlvbkVuZCBvYW5pbWF0aW9uZW5kIGFuaW1hdGlvbmVuZCc7XG4gICAgICAgICAgICB0aGlzLmFkZENsYXNzKCdhbmltYXRlZCAnICsgYW5pbWF0aW9uTmFtZSkub25lKGFuaW1hdGlvbkVuZCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnYW5pbWF0ZWQgJyArIGFuaW1hdGlvbk5hbWUpO1xuICAgICAgICAgICAgICAgIGlmICgkLmlzRnVuY3Rpb24oY2FsbEJhY2tGdW5jKSkge1xuICAgICAgICAgICAgICAgICAgICBjYWxsQmFja0Z1bmMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBpbml0Q2Fyb3VzZWxzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY2Fyb3VzZWxzIGluaXRpYWxpemVkXCIpO1xuICAgICAgICB2YXIgY2Fyb3VzZWxzU2V0dXAgPSBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjYXJvdXNlbDogXCIjbWFpbi1jYXJvdXNlbFwiLFxuICAgICAgICAgICAgICAgICAgICBpbnRlcnZhbDo3MDAwLFxuICAgICAgICAgICAgICAgICAgICBwYXVzZTogXCJub25lXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY2Fyb3VzZWw6IFwiI2Fib3V0LWNhcm91c2VsXCIsXG4gICAgICAgICAgICAgICAgICAgIGludGVydmFsOjUwMDAsXG4gICAgICAgICAgICAgICAgICAgIHBhdXNlOiBcIm5vbmVcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjYXJvdXNlbDogXCIjY2Fyb3VzZWxUb21ic3RvbmVzXCIsXG4gICAgICAgICAgICAgICAgICAgIGludGVydmFsOjMwMDAsXG4gICAgICAgICAgICAgICAgICAgIHBhdXNlOiBcIm5vbmVcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjYXJvdXNlbDogXCIjY2Fyb3VzZWxHYXJkZW5cIixcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJ2YWw6MzAwMCxcbiAgICAgICAgICAgICAgICAgICAgcGF1c2U6IFwibm9uZVwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNhcm91c2VsOiBcIiNjYXJvdXNlbFJlc3RvcmF0aW9uc1wiLFxuICAgICAgICAgICAgICAgICAgICBpbnRlcnZhbDozMDAwLFxuICAgICAgICAgICAgICAgICAgICBwYXVzZTogXCJub25lXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY2Fyb3VzZWw6IFwiI0Nhcm91c2VsTW9udW1lbnRzXCIsXG4gICAgICAgICAgICAgICAgICAgIGludGVydmFsOjMwMDAsXG4gICAgICAgICAgICAgICAgICAgIHBhdXNlOiBcIm5vbmVcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgICAvLyAtLS0tLS0tLS0tIENBUk9VU0VMUyBTRVRVUCAtLS0tLS0tLS0tXG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxjYXJvdXNlbHNTZXR1cC5sZW5ndGgtMTtpKyspIHtcbiAgICAgICAgICAgICQoY2Fyb3VzZWxzU2V0dXBbaV1bJ2Nhcm91c2VsJ10pLmNhcm91c2VsKHtcbiAgICAgICAgICAgICAgICBpbnRlcnZhbDogY2Fyb3VzZWxzU2V0dXBbaV1bJ2ludGVydmFsJ11cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGdsb2JhbC5pbml0Q2Fyb3VzZWxzID0gaW5pdENhcm91c2VscztcblxufSh3aW5kb3cpKTtcblxuIiwiKGZ1bmN0aW9uKGdsb2JhbCwkKXtcblxuXHR2YXIgVVJMID0nLi9hc3NldHMvZGF0YS9sYW5nLmpzb24nO1xuXHR2YXIgc2l0ZUxhbmdzID0gW1wiY3pcIixcImVuXCJdO1xuXG5cdHZhciBMYW5nID0gZnVuY3Rpb24oYWN0aXZlTGFuZyl7XG5cdFx0cmV0dXJuIG5ldyBMYW5nLmluaXQoYWN0aXZlTGFuZyk7XG5cdH1cblxuXHRMYW5nLnByb3RvdHlwZSA9IHtcblx0XHRnZXRLZXlWYWw6IGZ1bmN0aW9uKGtleVZhbCl7XG5cdFx0XHRzZWxmID0gdGhpcztcblx0XHRcdHJldHVybiBmdW5jdGlvbigpe1xuXHRcdFx0XHRrZXlWYWwgPSBrZXlWYWwudHJpbSgpO1xuXHRcdFx0XHR2YXIgcmVzdWx0O1xuXHRcdFx0XHRmb3IgKHZhciBpPTA7IGkgPD0gTGFuZy5kYXRhLmxlbmd0aC0xOyBpKyspIHtcblx0XHRcdFx0XHRpZiAoTGFuZy5kYXRhW2ldLmRhdGF0YWc9PT1rZXlWYWwpIHtcblx0XHRcdFx0XHRcdHJlc3VsdCA9IExhbmcuZGF0YVtpXVtzZWxmLmFjdGl2ZUxhbmddO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmVzdWx0ID0gXCJcIjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHRcdH0oKTtcblx0XHR9LFxuXHRcdHN3aXRjaExhbmc6IGZ1bmN0aW9uKHN3aXRjaFRvTGFuZyl7XG5cdFx0XHRzZWxmID0gdGhpcztcblx0XHRcdHZhciBudW1PZkxhbmdFbHMgPSAkKFwiW2RhdGEtbGFuZ11cIikubGVuZ3RoO1xuXHRcdFx0Zm9yICh2YXIgaSA9MDtpPD1udW1PZkxhbmdFbHMtMTtpKyspIHtcblx0XHRcdFx0dmFyIHJldHJpZXZlZERhdGFUYWcgPSAkKCQoXCJbZGF0YS1sYW5nXVwiKVtpXSkuZGF0YSgnbGFuZycpO1xuXHRcdFx0XHR2YWx1ZSA9IExORyQoc3dpdGNoVG9MYW5nKS5nZXRLZXlWYWwocmV0cmlldmVkRGF0YVRhZyk7XG5cdFx0XHRcdGlmICh2YWx1ZT09PXVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiTGFuZ3VhZ2UgdGFnICdcIiArIHJldHJpZXZlZERhdGFUYWcgICsgXCInIGlzIG5vdCBkZWZpbmVkIGluIGxhbmd1YWdlIGRhdGFiYXNlIGZvcjogXCIrc3dpdGNoVG9MYW5nKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpZiAodmFsdWUudHJpbSgpIT09XCJcIikge1xuXHRcdFx0XHRcdFx0aWYgKHZhbHVlLnNlYXJjaChcIjxwaD5cIik+LTEpIHtcblx0XHRcdFx0XHRcdFx0dmFsdWUgPSB2YWx1ZS5zdWJzdHIoNCx2YWx1ZS5sZW5ndGgpO1xuXHRcdFx0XHRcdFx0XHQkKCQoXCJbZGF0YS1sYW5nXVwiKVtpXSkuYXR0cihcInBsYWNlaG9sZGVyXCIsdmFsdWUpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0JCgkKFwiW2RhdGEtbGFuZ11cIilbaV0pLnRleHQoTE5HJChzd2l0Y2hUb0xhbmcpLmdldEtleVZhbChyZXRyaWV2ZWREYXRhVGFnKSkuYW5pbWF0ZUNzcygncHVsc2UnKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdCQoJChcIltkYXRhLWxhbmddXCIpW2ldKS5jc3MoXCJ2aXNpYmlsaXR5XCIsXCJ2aXNpYmxlXCIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHR9O1xuXG5cdExhbmcuaW5pdCA9IGZ1bmN0aW9uKGFjdGl2ZUxhbmcpe1xuXHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRzZWxmLmFjdGl2ZUxhbmcgPSBhY3RpdmVMYW5nIHx8IHNpdGVMYW5nc1swXTtcblx0fVxuXG5cdExhbmcuaW5pdC5wcm90b3R5cGUgPSBMYW5nLnByb3RvdHlwZTtcblx0Z2xvYmFsLkxhbmcgPSBnbG9iYWwuTE5HJCA9IExhbmc7XG5cblx0Z2V0U2VydmVyRGF0YShVUkwsZnVuY3Rpb24oZGF0YSl7XG5cdFx0TGFuZy5kYXRhID0gZGF0YTtcblx0XHR2YXIgaW5pdExhbmcgPSAkKFwiLmxhbmctc3dpdGNoZXI+c3BhblwiKS50ZXh0KCkudHJpbSgpO1xuXHRcdExORyQoaW5pdExhbmcpLnN3aXRjaExhbmcoaW5pdExhbmcpO1xuXHR9KTtcblxuXHRmdW5jdGlvbiBnZXRTZXJ2ZXJEYXRhKHVybCwgY2FsbGJhY2tGdW5jKSB7XG5cdHZhciByZXN1bHQgPSAkLmdldEpTT04odXJsLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKCBcIi0tLSBzdWNjZXNzIC0tLVwiICk7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyggXCJsYW5nIGRhdGEgbG9hZGVkLi4uXCIgKTtcblx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKGRhdGEpO1xuXHRcdFx0XHRcdGNhbGxiYWNrRnVuYyhkYXRhKTtcblx0XHRcdFx0fSlcblx0XHRcdFx0LmZhaWwoZnVuY3Rpb24oanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coIFwiLS0tIGVycm9yIC0tLVwiICk7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coanFYSFIpO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuYWx3YXlzKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdC8vY29uc29sZS5sb2coIFwiY29tcGxldGVcIiApO1xuXHRcdFx0XHR9KTtcblx0fTtcblxufSh3aW5kb3csIGpRdWVyeSkpO1xuIiwiLy8gLS0tLS0tLS0tLSBOQVZJR0FUSU9OIC0tLS0tLS0tLS1cblxuJChmdW5jdGlvbihnbG9iYWwpe1xuXHR2YXIgY29udHJvbGxlciwgcGFyYWxsYXgxLCBwYXJhbGxheDI7XG5cdHZhciBpbml0TGFuZz1cIlwiO1xuXHQvLyBrYW1lbmljdHZpLWVyYmVuLmN6IGdvb2dsZSBtYXBzIGtleSA9XCJBSXphU3lEc1NVODRXb2l4dnZDWjZFVjQ4QnQxNzc3TjJOTEtIbXNcIlxuXHQvLyBzdGVpbm1ldHotZXJiZW4uZGUgZ29vZ2xlIG1hcHMga2V5ID1cIkFJemFTeUEwcVZLcG5kZmNvSWdQNW53dUp4bUg1cTB2NVRTdkVjNFwiXG5cdHZhciBBUElrZXkgPSBcIkFJemFTeUEwcVZLcG5kZmNvSWdQNW53dUp4bUg1cTB2NVRTdkVjNFwiO1xuXHRnbG9iYWwubXlTaXRlID17fTtcblxuXHRmdW5jdGlvbiBpc19tb2JpbGUoKSB7XG5cdCAgICB2YXIgYWdlbnRzID0gWydhbmRyb2lkJywgJ3dlYm9zJywgJ2lwaG9uZScsICdpcGFkJywgJ2JsYWNrYmVycnknXTtcblx0ICAgIGZvcihpIGluIGFnZW50cykge1xuXHQgICAgICAgIGlmKChuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuc2VhcmNoKGFnZW50c1tpXSk+LTEpICYmICh3aW5kb3cub3JpZW50YXRpb24hPT11bmRlZmluZWQpKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiBmYWxzZTtcblx0fTtcblxuXHR2YXIgaXNNb2JpbGVGbGFnID0gaXNfbW9iaWxlKCk7XG5cdGdsb2JhbC5teVNpdGUuaXNNb2JpbGVGbGFnID0gaXNNb2JpbGVGbGFnO1xuXG5cdGlmIChpc01vYmlsZUZsYWc9PT10cnVlKSB7XG5cdFx0JChcImJvZHlcIikuYWRkQ2xhc3MoXCJpc01vYmlsZVwiKTtcblx0fVxuXG5cdGZ1bmN0aW9uIG5hdk1lbnVJbml0KCkge1xuXHRcdFx0dmFyIGNhY2hlZFBhZ2U9e307XG5cdFx0XHQkY2FjaGVkSXRlbXMgPSAkKFwiI21haW5OYXZiYXIgW2RhdGEtbWVudWl0ZW1dXCIpO1xuXHRcdFx0JCgkY2FjaGVkSXRlbXMpLmVhY2goZnVuY3Rpb24oaW5kZXgsdmFsdWUpe1xuXHRcdFx0XHRjYWNoZWRQYWdlWyQodmFsdWUpLmRhdGEoJ21lbnVpdGVtJyldID0gXCJcIjtcblx0XHRcdH0pO1xuXHRcdFx0Z2xvYmFsLm15U2l0ZS5jYWNoZWRQYWdlID0gY2FjaGVkUGFnZTtcblxuXHRcdFx0dmFyIHBhZ2VDYWxsYmFja0Z1bmMgPSB7XG5cdFx0XHRcdG1haW46IGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0aW5pdENhcm91c2VscygpO1xuXHRcdFx0XHRcdGxpbmtUb0dhbGxlcnkoKTtcblx0XHRcdFx0XHRpZiAoIWlzTW9iaWxlRmxhZykge1xuXHRcdFx0XHRcdFx0aW5pdFBhcmFsbGF4KFwiI3BhcmFsbGF4MVwiLFwiI3BhcmFsbGF4MSA+IGRpdlwiKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGFib3V0OiBmdW5jdGlvbigpe1xuXHRcdFx0XHRcdGluaXRDYXJvdXNlbHMoKTtcblx0XHRcdFx0XHRpZiAoIWlzTW9iaWxlRmxhZykge1xuXHRcdFx0XHRcdFx0aW5pdFBhcmFsbGF4KFwiI3BhcmFsbGF4MlwiLFwiI3BhcmFsbGF4MiA+IGRpdlwiKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHJlYWxpc2F0aW9uczogZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRpbml0Q29tbWlzaW9uc0dhbGxlcnkoZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdExORyQoaW5pdExhbmcpLnN3aXRjaExhbmcoaW5pdExhbmcpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRwcmljaW5nOiBmdW5jdGlvbigpe1xuXHRcdFx0XHRcdGluaXRQcmljaW5nR2FsbGVyeShmdW5jdGlvbigpe1xuXHRcdFx0XHRcdFx0TE5HJChpbml0TGFuZykuc3dpdGNoTGFuZyhpbml0TGFuZyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGNvbnRhY3Q6IGZ1bmN0aW9uKHJ1bk1hcEluaXRTY3JpcHQpe1xuXHRcdFx0XHRcdHJ1bk1hcEluaXRTY3JpcHQgPSBydW5NYXBJbml0U2NyaXB0IHx8IGZhbHNlO1xuXHRcdFx0XHRcdGlmIChydW5NYXBJbml0U2NyaXB0KSB7XG5cdFx0XHRcdFx0XHRhZGRTY3JpcHQoXG5cdFx0XHRcdFx0XHRcdFwiaHR0cHM6Ly9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2pzP2tleT1cIiArIEFQSWtleSArIFwiJmNhbGxiYWNrPU1hcE1vZHVsZS5pbml0Q29udGFjdE1hcFwiLFxuXHRcdFx0XHRcdFx0XHRcImJvZHlcIixcblx0XHRcdFx0XHRcdFx0ZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdFx0XHRNYXBNb2R1bGUucGxhY2VDb250YWN0TGlzdGVuZXJzKCk7XG5cdFx0XHRcdFx0XHRcdFx0Q29udGFjdEZvcm1Nb2R1bGUuaW5pdENvbnRhY3RGb3JtTGlzdGVuZXIoKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdE1hcE1vZHVsZS5pbml0Q29udGFjdE1hcCgpO1xuXHRcdFx0XHRcdFx0TWFwTW9kdWxlLnBsYWNlQ29udGFjdExpc3RlbmVycygpO1xuXHRcdFx0XHRcdFx0Q29udGFjdEZvcm1Nb2R1bGUuaW5pdENvbnRhY3RGb3JtTGlzdGVuZXIoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0cGxhY2VCdXR0b25Nb3ZlVXBMaXN0ZW5lcigpO1xuXHRcdFx0cGxhY2VMYW5nU3dpdGNoTGlzdGVuZXIodHJ1ZSk7XG5cblx0XHRcdC8vaGVscGVyIGZ1bmN0aW9uIHRvIGxvYWQgZ29vZ2xlIG1hcHMgc2NyaXB0XG5cdFx0XHRmdW5jdGlvbiBhZGRTY3JpcHQoIHNyYywgZWwsY2FsbGJhY2tGICkge1xuXHRcdFx0XHRpZiAodHlwZW9mIGNhbGxiYWNrRiE9PVwiZnVuY3Rpb25cIikge1xuXHRcdFx0XHRcdGNhbGxiYWNrRj1mdW5jdGlvbigpe307XG5cdFx0XHRcdH1cblx0XHRcdFx0JChlbCkuYXBwZW5kKCQoXCI8c2NyaXB0IC8+XCIsIHtcbiAgXHRcdFx0XHRzcmM6IHNyYyxcblx0XHRcdFx0XHRhc3luYzogdHJ1ZSxcblx0XHRcdFx0XHRkZWZlcjogdHJ1ZVxuXHRcdFx0XHR9KSk7XG5cdFx0XHRcdGNhbGxiYWNrRigpO1xuXHRcdFx0fVxuXHRcdFx0Ly9oZWxwZXIgZnVuY3Rpb24gdG8gdXBkYXRlIHRoZSBwYWdlIHdoZW4gY2xpY2tpbmcgb24gbWVudVxuXHRcdFx0ZnVuY3Rpb24gdXBkYXRlUGFnZShjYWxsYmFja0Z1bmMpe1xuXHRcdFx0XHRpZiAodHlwZW9mIGNhbGxiYWNrRnVuYyE9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0XHRjYWxsYmFja0Z1bmMgPSBmdW5jdGlvbigpe307XG5cdFx0XHRcdH1cblx0XHRcdFx0JCgnI2FqYXgtY29udGFpbmVyJykuc2hvdygpO1xuXHRcdFx0XHQkKCcubG9hZGVyLXdyYXBwZXInKS5oaWRlKCk7XG5cdFx0XHRcdCQoJyNhamF4LWNvbnRlbnQnKS5mYWRlSW4oNTAwLGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0Y2FsbGJhY2tGdW5jKCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0ICAkKCcjbWFpbk5hdmJhcicpLm9uKCdzaG93LmJzLmNvbGxhcHNlJywgZnVuY3Rpb24gKCkge1xuXHQgIFx0XHRcdCQoXCIuaGFtYnVyZ2VyX19tZW51LWljb25cIikuYWRkQ2xhc3MoXCJoYW1idXJnZXJfX21lbnUtaWNvbi0tY2xvc2UteFwiKTtcblx0XHRcdH0pXG5cdCBcdFx0JCgnI21haW5OYXZiYXInKS5vbignaGlkZS5icy5jb2xsYXBzZScsIGZ1bmN0aW9uICgpIHtcblx0ICBcdFx0XHQkKFwiLmhhbWJ1cmdlcl9fbWVudS1pY29uXCIpLnJlbW92ZUNsYXNzKFwiaGFtYnVyZ2VyX19tZW51LWljb24tLWNsb3NlLXhcIik7XG5cdFx0XHR9KVxuXG5cdCAgICAkKCcubmF2LWxpbmsnKS5vbiggJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXHQgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblx0ICAgICAgICB2YXIgdXJsID0gdGhpcy5ocmVmLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuXHQgICAgICAgIHZhciBtZW51TmFtZSA9ICQodGhpcykuZGF0YSgnbWVudWl0ZW0nKS50cmltKCkudG9Mb3dlckNhc2UoKTtcblx0XHRcdFx0XHRpbml0TGFuZyA9ICQoXCIubGFuZy1zd2l0Y2hlcj5zcGFuXCIpLnRleHQoKS50cmltKCk7XG5cdCAgICAgICAgJCh0aGlzKS5zaWJsaW5ncyhcIi5uYXYtbGlua1wiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcblx0ICAgICAgICAkKHRoaXMpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coY29udHJvbGxlcik7XG5cdFx0XHRcdFx0aWYgKGNvbnRyb2xsZXIhPT11bmRlZmluZWQgJiYgY29udHJvbGxlciE9PW51bGwpIHtcblxuXHRcdFx0XHRcdFx0Y29udHJvbGxlciA9IGNvbnRyb2xsZXIuZGVzdHJveSh0cnVlKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvL2Nsb3NlIHRoZSBtb2JpbGUgbWVudSBpZiBpdCBpcyBvcGVuZWRcblx0XHRcdFx0XHQkKCcjbWFpbk5hdmJhcicpLmNvbGxhcHNlKCdoaWRlJyk7XG5cblxuXHQgICAgICAgICQoJyNhamF4LWNvbnRhaW5lcicpLmZhZGVPdXQoNTAwLCBmdW5jdGlvbigpe1xuXHRcdFx0XHRcdFx0JCgnI2FqYXgtY29udGVudCcpLmhpZGUoKTtcblx0XHRcdFx0XHRcdCQoJy5sb2FkZXItd3JhcHBlcicpLmZhZGVJbig1MDApO1xuXHQgICAgICAgIFx0JChcImJvZHksaHRtbFwiKS5zdG9wKCkuYW5pbWF0ZSh7c2Nyb2xsVG9wOjB9LCAnNTAnKTtcblx0XHRcdFx0XHRcdCQodGhpcykucmVtb3ZlKCk7XG5cblx0XHRcdFx0XHRcdGlmIChteVNpdGUuY2FjaGVkUGFnZVttZW51TmFtZV09PT0nJykge1xuXHRcdFx0XHRcdFx0XHQvLyBkbyB0aGUgZm9sbG93aW5nIGlmIHRoZSBwYWdlIG5lZWRzIHRvIGJlIGxvYWRlZCBmb3IgdGhlIGZpcnN0IHRpbWUobm90IGNhY2hlZCB5ZXQpXG5cdFx0XHRcdFx0XHRcdC8vIHN0YXJ0IG9mIHRoZSBhamF4IGxvYWQgZnVuY3Rpb25cblx0XHQgICAgICAgIFx0JCgnI2FqYXgtY29udGVudCcpLmxvYWQodXJsICsgJyAjYWpheC1jb250YWluZXInLCBmdW5jdGlvbihyZXN1bHQsc3RhdHVzKXtcblx0XHRcdFx0XHRcdFx0XHRpZiAoc3RhdHVzID09PSBcInN1Y2Nlc3NcIikge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJMb2FkZWQgJ1wiICsgbWVudU5hbWUgKyBcIicgZnJvbSBTRVJWRVIuLi5cIik7XG5cdFx0XHRcdFx0XHRcdFx0XHR1cGRhdGVQYWdlKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdExORyQoaW5pdExhbmcpLnN3aXRjaExhbmcoaW5pdExhbmcpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjYWNoZWRQYWdlW21lbnVOYW1lXT0kKHJlc3VsdCkuZmluZChcIiNhamF4LWNvbnRhaW5lclwiKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0bWVudU5hbWUgPT09J2NvbnRhY3QnID8gbWFwSW5pdEZsYWcgPSB0cnVlIDogbWFwSW5pdEZsYWcgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0cGFnZUNhbGxiYWNrRnVuY1ttZW51TmFtZV0obWFwSW5pdEZsYWcpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cblx0XHQgICAgICAgIFx0XHR9IGVsc2UgaWYgKHN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG5cdFx0ICAgICAgICBcdFx0XHQkKCcubG9hZGVyLXdyYXBwZXInKS5oaWRlKCk7XG5cdFx0ICAgICAgICBcdFx0XHRjb25zb2xlLmxvZyhcIkVycm9yIGxvYWRpbmcgZnJvbSBzZXJ2ZXIuLi5cIik7XG5cdFx0ICAgICAgICBcdFx0fVxuXG5cdFx0ICAgICAgICBcdH0pOyAvLyBlbmQgb2YgYWpheCBsb2FkIGZ1bmN0aW9uXG5cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdC8vaWYgdGhlIHBhZ2UgaXMgYWxyZWFkeSBjYWNoZWQuLi5cblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJMb2FkZWQgJ1wiICsgbWVudU5hbWUgKyBcIicgZnJvbSBDQUNIRS4uLlwiKTtcblx0XHRcdFx0XHRcdFx0JChteVNpdGUuY2FjaGVkUGFnZVttZW51TmFtZV0pLmFwcGVuZFRvKCcjYWpheC1jb250ZW50Jyk7XG5cdFx0XHRcdFx0XHRcdHVwZGF0ZVBhZ2UoZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdFx0XHRMTkckKGluaXRMYW5nKS5zd2l0Y2hMYW5nKGluaXRMYW5nKTtcblx0XHRcdFx0XHRcdFx0XHRwYWdlQ2FsbGJhY2tGdW5jW21lbnVOYW1lXSgpO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH1cblx0ICAgICAgICB9KTsgIC8vIGVuZCBvZiBhbmltYXRlQ3NzIGZ1bmN0aW9uXG5cdCAgICB9KTsgLy8gZW5kIG9mIGNsaWNrIGxpc3RlbmVyXG5cblx0fVxuXG5cdGZ1bmN0aW9uIHBsYWNlQnV0dG9uTW92ZVVwTGlzdGVuZXIoKSB7XG5cblx0XHR2YXIgb2ZmU2V0WT0wO1xuXHRcdCQod2luZG93KS5vbihcInNjcm9sbFwiLCBmdW5jdGlvbigpe1xuXHRcdFx0dmFyIGFjdHVhbEhlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKTtcblx0XHRcdHZhciBhY3R1YWxTY3JvbGxQb3MgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XG5cblx0XHRcdG9mZlNldFkgPSBhY3R1YWxIZWlnaHQvNTtcblxuXHRcdFx0aWYgKGFjdHVhbFNjcm9sbFBvczwwKSB7YWN0dWFsU2Nyb2xsUG9zPTB9O1xuXG5cdFx0XHQvL2NvbnNvbGUubG9nKGFjdHVhbEhlaWdodCxhY3R1YWxTY3JvbGxQb3MpO1xuXHRcdFx0Ly9jb25zb2xlLmxvZyhhY3R1YWxIZWlnaHQtb2ZmU2V0WSxhY3R1YWxTY3JvbGxQb3MpO1xuXG5cdFx0XHRpZiAoKChhY3R1YWxIZWlnaHQtb2ZmU2V0WSkvYWN0dWFsU2Nyb2xsUG9zKT4xKSB7XG5cdFx0XHRcdGlmICgkKCcuYnRuLW1vdmUtdXAnKS5pcyhcIjp2aXNpYmxlXCIpKSB7XG5cdFx0XHRcdFx0JChcIi5idG4tbW92ZS11cFwiKS5hbmltYXRlQ3NzKCdib3VuY2VPdXQnLCBmdW5jdGlvbigpe1xuXHRcdFx0XHRcdFx0JChcIi5idG4tbW92ZS11cFwiKS5oaWRlKCk7XG5cdFx0XHRcdFx0XHQkKFwiLmJ0bi1kb3duXCIpLnNob3coKS5hbmltYXRlQ3NzKCdib3VuY2VJbicpO1xuXHRcdFx0XHRcdFx0Ly8kKFwiLmJ0bi1kb3duXCIpLmFuaW1hdGVDc3MoJ2JvdW5jZUluJyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKCEkKCcuYnRuLW1vdmUtdXAnKS5pcyhcIjp2aXNpYmxlXCIpKSB7XG4gXHRcdFx0XHRcdCQoXCIuYnRuLWRvd25cIikuYW5pbWF0ZUNzcygnYm91bmNlT3V0JyxmdW5jdGlvbigpe1xuIFx0XHRcdFx0XHRcdCQoXCIuYnRuLWRvd25cIikuaGlkZSgpO1xuIFx0XHRcdFx0XHRcdCQoXCIuYnRuLW1vdmUtdXBcIikuc2hvdygpO1xuIFx0XHRcdFx0XHRcdCQoXCIuYnRuLW1vdmUtdXBcIikuYW5pbWF0ZUNzcygnYm91bmNlSW4nKTtcbiBcdFx0XHRcdFx0fSk7XG4gXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0JChcIi5idG4tbW92ZS11cFwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XG5cdFx0XHQkKFwiYm9keSxodG1sXCIpLnN0b3AoKS5hbmltYXRlKHtzY3JvbGxUb3A6MH0sICc3MDAnLCBcInN3aW5nXCIpO1xuXHRcdH0pO1xuXHRcdCQoXCIuYnRuLWRvd25cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbihlKXtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdHZhciBqdW1wSGFzaCA9IGUuY3VycmVudFRhcmdldC5oYXNoO1xuXHRcdFx0dmFyIGp1bXBQb2ludCA9ICQoanVtcEhhc2gpLm9mZnNldCgpLnRvcDtcblx0XHRcdCQoXCJib2R5LGh0bWxcIikuc3RvcCgpLmFuaW1hdGUoe3Njcm9sbFRvcDpqdW1wUG9pbnR9LCAnNzAwJywgXCJzd2luZ1wiKTtcblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gcGxhY2VMYW5nU3dpdGNoTGlzdGVuZXIodXBkYXRlKSB7XG5cdFx0dmFyIHVwZGF0ZSA9IHVwZGF0ZSB8fCBmYWxzZTtcblx0XHR2YXIgYWN0aXZlTGFuZ3VhZ2VzID1bXTtcblx0XHR2YXIgbGFuZ3VhZ2VzID0ge1xuXHRcdFx0XCJjelwiOnRydWUsXG5cdFx0XHRcImVuXCI6dHJ1ZSxcblx0XHRcdFwiZGVcIjpmYWxzZVxuXHRcdH07XG5cdFx0JC5lYWNoKGxhbmd1YWdlcywgZnVuY3Rpb24oaW5kZXgsdmFsdWUpe1xuXHRcdFx0aWYgKHZhbHVlKSB7XG5cdFx0XHRcdGFjdGl2ZUxhbmd1YWdlcy5wdXNoKGluZGV4KTtcblx0XHRcdH1cblx0XHR9KVxuXHRcdHZhciBhY3RpdmVMYW5nID0gJChcIi5sYW5nLXN3aXRjaGVyPnNwYW5cIikudGV4dCgpLnRyaW0oKTtcblx0XHRpZiAodXBkYXRlKSB7XG5cdFx0XHRMTkckKGFjdGl2ZUxhbmcpLnN3aXRjaExhbmcoYWN0aXZlTGFuZyk7XG5cdFx0fVxuXG5cdFx0JChcIi5sYW5nLXN3aXRjaGVyPnNwYW5cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbigpe1xuXHRcdFx0dmFyIG5leHQgPSBhY3RpdmVMYW5ndWFnZXMuaW5kZXhPZihhY3RpdmVMYW5nKSsxO1xuXHRcdFx0aWYgKCFpc0xhbmdEZWZpbmVkKGFjdGl2ZUxhbmd1YWdlcyxhY3RpdmVMYW5nKSkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRuZXh0ID09PSBhY3RpdmVMYW5ndWFnZXMubGVuZ3RoID8gbmV4dD0wIDogbmV4dD1uZXh0O1xuXHRcdFx0YWN0aXZlTGFuZyA9IGFjdGl2ZUxhbmd1YWdlc1tuZXh0XTtcblx0XHRcdCQoXCIubGFuZy1zd2l0Y2hlcj5zcGFuXCIpLnRleHQoYWN0aXZlTGFuZyk7XG5cdFx0XHRMTkckKGFjdGl2ZUxhbmcpLnN3aXRjaExhbmcoYWN0aXZlTGFuZyk7XG5cdFx0XHQkKHRoaXMpLmFuaW1hdGVDc3MoXCJib3VuY2VJblwiKTtcblx0XHR9KTtcblxuXHRcdGZ1bmN0aW9uIGlzTGFuZ0RlZmluZWQoYWN0aXZlTGFuZ3MsbGFuZ1RvQ2hlY2spe1xuXHRcdFx0aWYgKHR5cGVvZiBhY3RpdmVMYW5ncyAhPT0nb2JqZWN0Jykge1xuXHRcdFx0XHRhY3RpdmVMYW5ncyA9IGFjdGl2ZUxhbmdzIHx8IFtdO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHR5cGVvZiBsYW5nVG9DaGVjayAhPT0nc3RyaW5nJykge1xuXHRcdFx0XHRsYW5nVG9DaGVjayA9IGxhbmdUb0NoZWNrIHx8IFwiXCI7XG5cdFx0XHR9XG5cdFx0XHR2YXIgaXNEZWZpbmVkID0gZmFsc2U7XG5cdFx0XHR2YXIgaW5kID0gYWN0aXZlTGFuZ3MuaW5kZXhPZihhY3RpdmVMYW5nKTtcblx0XHRcdGlmIChpbmQgPT09IC0xKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiZXJyb3I6IGxhbmd1YWdlOiAnXCIrIGxhbmdUb0NoZWNrICtcIicgd2l0aGluICdpbmRleC5odG1sJyBmaWxlIGlzIG5vdCBjb21wYXRpYmxlIHdpdGggbGFuZ3VhZ2VzIGRlZmluZWQuXCIpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aXNEZWZpbmVkID0gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBpc0RlZmluZWQ7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gbGlua1RvR2FsbGVyeSgpe1xuXG5cdFx0JChcIi5idG4tc2l0ZVwiKS5vbignY2xpY2snLGZ1bmN0aW9uKGUpe1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdDtcblx0XHRcdHZhciBnYWxMaW5rID0gJCh0aGlzKS5kYXRhKCdsaW5rJykudHJpbSgpO1xuXHRcdFx0dmFyIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuXHRcdFx0aWYgKHVybC5zZWFyY2goXCJpbmRleC5odG1sXCIpID49IDAgKSB7XG5cdFx0XHRcdHVybCA9IHVybC5yZXBsYWNlKFwiaW5kZXguaHRtbFwiLFwicmVhbGlzYXRpb25zLmh0bWxcIik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR1cmwgPSB1cmwgKyBcInJlYWxpc2F0aW9ucy5odG1sXCI7XG5cdFx0XHR9XG5cdCAgICAgICAgJCgnI2FqYXgtY29udGFpbmVyJykuZmFkZU91dCg1MDAsIGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgXHQkKCcjYWpheC1jb250ZW50JykuaGlkZSgpO1xuXHRcdFx0XHRcdFx0JCgnLmxvYWRlci13cmFwcGVyJykuc2hvdygpO1xuXHRcdFx0XHRcdFx0JChcIi5uYXZiYXItbmF2Pi5uYXYtbGlua1wiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcblx0XHRcdFx0XHRcdCQoXCIubmF2YmFyLW5hdj4ubmF2LWxpbmtbaHJlZj0ncmVhbGlzYXRpb25zLmh0bWwnXVwiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcblxuXHRcdFx0XHRcdFx0aWYgKG15U2l0ZS5jYWNoZWRQYWdlWydyZWFsaXNhdGlvbnMnXT09PScnKSB7XG5cdFx0ICAgICAgICBcdCQoJyNhamF4LWNvbnRlbnQnKS5sb2FkKHVybCArICcgI2FqYXgtY29udGFpbmVyJywgZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdFx0XHQkKCcubG9hZGVyLXdyYXBwZXInKS5oaWRlKCk7XG5cdFx0ICAgICAgICBcdFx0JCgnI2FqYXgtY29udGVudCcpLmZhZGVJbig1MDApO1xuXHRcdCAgICAgICAgXHRcdHBsYWNlQnV0dG9uTW92ZVVwTGlzdGVuZXIoKTtcblx0XHQgICAgICAgIFx0XHRwbGFjZUxhbmdTd2l0Y2hMaXN0ZW5lcigpO1xuXHRcdCAgICAgICAgXHRcdGluaXRDb21taXNpb25zR2FsbGVyeShmdW5jdGlvbigpe1xuXHRcdFx0XHRcdFx0XHRcdFx0TE5HJChpbml0TGFuZykuc3dpdGNoTGFuZyhpbml0TGFuZyk7XG5cdFx0XHQgICAgICAgIFx0XHQkKFwiLmZpbHRlci1pdGVtXCIpLmVhY2goZnVuY3Rpb24oaSl7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICgkKHRoaXMpLmRhdGEoJ2xhbmcnKSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHQgICAgICAgIFx0XHRcdFx0aWYgKCQodGhpcykuZGF0YSgnbGFuZycpLnRvTG93ZXJDYXNlKCkudHJpbSgpID09PSBnYWxMaW5rKSB7XG5cdFx0XHQgICAgICAgIFx0XHRcdFx0XHQkKHRoaXMpLnRyaWdnZXIoJ2NsaWNrJyk7XG5cdFx0XHQgICAgICAgIFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHQgICAgICAgIFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHQgICAgICAgIFx0XHR9KTtcblx0XHQgICAgICAgIFx0XHR9KTtcblx0XHQgICAgICAgIFx0fSk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIkxvYWRlZCAncmVhbGlzYXRpb25zJyB3aXRoIHF1aWNrIGxpbmsgZnJvbSBDQUNIRS4uLlwiKTtcblx0XHRcdFx0XHRcdFx0JChteVNpdGUuY2FjaGVkUGFnZVsncmVhbGlzYXRpb25zJ10pLmFwcGVuZFRvKCcjYWpheC1jb250ZW50Jyk7XG5cdFx0XHRcdFx0XHRcdCQoJy5sb2FkZXItd3JhcHBlcicpLmhpZGUoKTtcblx0XHRcdFx0XHRcdFx0JCgnI2FqYXgtY29udGVudCcpLmZhZGVJbig1MDApO1xuXHRcdFx0XHRcdFx0XHRwbGFjZUJ1dHRvbk1vdmVVcExpc3RlbmVyKCk7XG5cdFx0XHRcdFx0XHRcdHBsYWNlTGFuZ1N3aXRjaExpc3RlbmVyKCk7XG5cdFx0XHRcdFx0XHRcdGluaXRDb21taXNpb25zR2FsbGVyeShmdW5jdGlvbigpe1xuXHRcdFx0XHRcdFx0XHRcdExORyQoaW5pdExhbmcpLnN3aXRjaExhbmcoaW5pdExhbmcpO1xuXHRcdFx0XHRcdFx0XHRcdCQoXCIuZmlsdGVyLWl0ZW1cIikuZWFjaChmdW5jdGlvbihpKXtcblx0XHRcdFx0XHRcdFx0XHRcdGlmICgkKHRoaXMpLmRhdGEoJ2xhbmcnKSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICgkKHRoaXMpLmRhdGEoJ2xhbmcnKS50b0xvd2VyQ2FzZSgpLnRyaW0oKSA9PT0gZ2FsTGluaykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdCQodGhpcykudHJpZ2dlcignY2xpY2snKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cdCAgICAgICAgfSk7XG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBpbml0UGFyYWxsYXgodHJpZ2dlckVsZW1lbnQsdHdlZW5FbGVtZW50KSB7XG5cdFx0dHJpZ2dlckVsZW1lbnQgPSB0cmlnZ2VyRWxlbWVudCB8fCBcIlwiO1xuXHRcdHR3ZWVuRWxlbWVudCA9IHR3ZWVuRWxlbWVudCB8fCBcIlwiO1xuXHRcdGlmICghaXNNb2JpbGVGbGFnKSB7XG5cdCAgICAgICAgdmFyIGNvbnRyb2xsZXIgPSBuZXcgU2Nyb2xsTWFnaWMuQ29udHJvbGxlcih7Z2xvYmFsU2NlbmVPcHRpb25zOiB7dHJpZ2dlckhvb2s6IFwib25FbnRlclwiLCBkdXJhdGlvbjogXCIxMDAlXCJ9fSk7XG5cdCAgICAgICAgdmFyIHBhcmFsbGF4MSA9IG5ldyBTY3JvbGxNYWdpYy5TY2VuZSh7dHJpZ2dlckVsZW1lbnQ6IHRyaWdnZXJFbGVtZW50fSlcblx0ICAgICAgICAgICAgLnNldFR3ZWVuKHR3ZWVuRWxlbWVudCwge3k6IFwiNTAlXCIsIGVhc2U6IExpbmVhci5lYXNlTm9uZX0pXG5cdCAgICAgICAgICAgIC8vLmFkZEluZGljYXRvcnMoe25hbWU6IHRyaWdnZXJFbGVtZW50fSlcblx0ICAgICAgICAgICAgLmFkZFRvKGNvbnRyb2xsZXIpO1xuXHQgICAgfVxuXHR9XG5cblx0JCh3aW5kb3cpLmxvYWQoZnVuY3Rpb24oKXtcblx0XHRsaW5rVG9HYWxsZXJ5KCk7XG5cdFx0bmF2TWVudUluaXQoKTtcblx0XHRwbGFjZUJ1dHRvbk1vdmVVcExpc3RlbmVyKCk7XG5cdFx0cGxhY2VMYW5nU3dpdGNoTGlzdGVuZXIoKTtcblx0XHRpbml0UGFyYWxsYXgoXCIjcGFyYWxsYXgxXCIsXCIjcGFyYWxsYXgxID4gZGl2XCIpO1xuXHR9KTtcblxuXHRnbG9iYWwubXlTaXRlLm5hdk1lbnVJbml0ID0gbmF2TWVudUluaXQ7XG5cdGdsb2JhbC5teVNpdGUucGxhY2VCdXR0b25Nb3ZlVXBMaXN0ZW5lciA9IHBsYWNlQnV0dG9uTW92ZVVwTGlzdGVuZXI7XG5cdGdsb2JhbC5teVNpdGUucGxhY2VMYW5nU3dpdGNoTGlzdGVuZXIgPSBwbGFjZUxhbmdTd2l0Y2hMaXN0ZW5lcjtcblx0Z2xvYmFsLm15U2l0ZS5pbml0UGFyYWxsYXggPSBpbml0UGFyYWxsYXg7XG5cbn0od2luZG93KSk7XG4iLCIvLyAtLS0tLS0tLS0tIFBPUlRGT0xJTyBGSUxURVIgLS0tLS0tLS0tLVxuXG5cdGZ1bmN0aW9uIGluaXRDb21taXNpb25zR2FsbGVyeShjYWxsYmFja0Z1bmMpe1xuXHRcdHR5cGVvZiBjYWxsYmFja0Z1bmM9PT1cImZ1bmN0aW9uXCIgPyBjYWxsYmFja0Z1bmMgPSBjYWxsYmFja0Z1bmMgOiBjYWxsYmFja0Z1bmMgPSBmdW5jdGlvbigpe307XG5cblx0XHR2YXIgYnJva2VuQ291bnQgPSAwO1xuXG5cdFx0JChcIi5ncmlkLWl0ZW0+LmltZy1yZXN1bHQtd3JhcHBlclwiKS5oaWRlKCk7XG5cdFx0JChcIi5ncmlkLWl0ZW0+LmltZy1sb2FkZXItd3JhcHBlclwiKS5zaG93KCk7XG5cdFx0JChcIi5ncmlkPi5ncmlkLWl0ZW1cIikuYWRkQ2xhc3MoXCJob3Zlci1vZmZcIik7XG5cblx0XHQkKCcjcG9ydGZvbGlvcycpLmltYWdlc0xvYWRlZCgpXG5cdFx0ICAuYWx3YXlzKCBmdW5jdGlvbiggaW5zdGFuY2UgKSB7XG5cdFx0ICAgIGNvbnNvbGUubG9nKFwiYWxsIGltYWdlcyBvZiAnQ29tbWlzaW9ucyBtZW51JyBsb2FkZWRcIik7XG5cblx0XHRcdGluc3RhbnRpYXRlSXNvdG9wZUdhbGxlcnkoXCIuZ3JpZFwiLHtcblx0XHQgIFx0XHRpdGVtU2VsZWN0b3I6ICcuZ3JpZC1pdGVtJyxcblx0XHQgIFx0XHRzdGFnZ2VyOiAzMFxuXHRcdFx0fSk7XG5cblx0XHQgICAgYnVpbGRJbWdDYXRlZ29yaWVzKFwiI2ZpbHRlci1wb3J0Zm9saW9cIixcIiNwb3J0Zm9saW8tZ2FsbGVyeSAuZ3JpZC1pdGVtXCIpO1xuXHRcdCAgICBwbGFjZUZpbHRlckxpc3RlbmVycyhcIi5ncmlkXCIpO1xuXG5cdFx0XHQkKFwiLmdyaWQtaXRlbT4uaW1nLXJlc3VsdC13cmFwcGVyXCIpLmZhZGVPdXQoMTAwMCk7XG5cdFx0ICAgICQoXCIuaW1nLWxvYWRlcj4uaW1nLWxvYWRlci10ZXh0XCIpLnRleHQoXCJpbWFnZXMgbG9hZGVkXCIpO1xuXHRcdCAgICAkKFwiLmltZy1sb2FkZXItYmFyXCIpLmNzcyhcImJhY2tncm91bmQtY29sb3JcIixcImdyZWVuXCIpO1xuXHRcdCAgICAkKFwiLmltZy1sb2FkZXJcIikuZGVsYXkoMzAwMCkuc2xpZGVVcCgxMDAwKTtcblx0XHQgICAgJChcIi5ncmlkPi5ncmlkLWl0ZW1cIikucmVtb3ZlQ2xhc3MoXCJob3Zlci1vZmZcIik7XG5cblx0XHQgICAgY2FsbGJhY2tGdW5jKCk7XG5cblx0XHQgIH0pXG5cdFx0ICAuZG9uZSggZnVuY3Rpb24oKSB7XG5cdFx0ICAgIGNvbnNvbGUubG9nKFwiYWxsIGltYWdlcyBvZiAnQ29tbWlzaW9ucyBtZW51JyBzdWNjZXNzZnVsbHkgbG9hZGVkXCIpO1xuXG5cdFx0ICB9KVxuXHRcdCAgLmZhaWwoIGZ1bmN0aW9uKCkge1xuXHRcdCAgICBjb25zb2xlLmxvZyggYnJva2VuQ291bnQgKyBcIiBvZiAnQ29tbWlzaW9ucyBtZW51JyBpbWFnZXMgaGF2ZSBicm9rZW4gbGlua3MuIENoZWNrIHlvdXIgaW1hZ2UgcGF0aHMuXCIpO1xuXHRcdCAgICAkKFwiLmltZy1sb2FkZXJcIikuZGVsYXkoMzAwMCkuc2xpZGVVcCgxMDAwKTtcblx0XHQgIH0pXG5cdFx0LnByb2dyZXNzKCBmdW5jdGlvbiggaW5zdGFuY2UsIGltYWdlICkge1xuXG5cdFx0ICAgIGlmIChpbWFnZS5pc0xvYWRlZCkge1xuXHRcdCAgICBcdCQoaW1hZ2UuaW1nKS5zaWJsaW5ncyhcIi5pbWctbG9hZGVyLXdyYXBwZXJcIikuaGlkZSgpO1xuXHRcdCAgICBcdCQoaW1hZ2UuaW1nKS5zaWJsaW5ncyhcIi5pbWctcmVzdWx0LXdyYXBwZXJcIikuYW5pbWF0ZUNzcyhcImJvdW5jZUluXCIpLnNob3coKTtcblx0XHRcdFx0JChcIi5pbWctbG9hZGVyLWJhclwiKS53aWR0aCgoaW5zdGFuY2UucHJvZ3Jlc3NlZENvdW50L2luc3RhbmNlLmltYWdlcy5sZW5ndGgpKjEwMCArIFwiJVwiKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGJyb2tlbkNvdW50Kys7XG5cdFx0XHRcdCQoaW1hZ2UuaW1nKS5wYXJlbnQoKS5yZW1vdmUoKTtcblx0XHRcdH1cblxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gaW5pdFByaWNpbmdHYWxsZXJ5KGNhbGxiYWNrRnVuYyl7XG5cdFx0dHlwZW9mIGNhbGxiYWNrRnVuYz09PVwiZnVuY3Rpb25cIiA/IGNhbGxiYWNrRnVuYyA9IGNhbGxiYWNrRnVuYyA6IGNhbGxiYWNrRnVuYyA9IGZ1bmN0aW9uKCl7fTtcblxuXHRcdHZhciBicm9rZW5Db3VudCA9IDA7XG5cdFx0JChcIi5ncmlkLXByaWNpbmc+LmdyaWQtaXRlbS1wcmljaW5nXCIpLmFkZENsYXNzKFwiaG92ZXItb2ZmXCIpO1xuXG5cdFx0JChcIiNwcmljaW5nXCIpLmltYWdlc0xvYWRlZCgpXG5cdFx0IFx0LmFsd2F5cyggZnVuY3Rpb24oIGluc3RhbmNlICkge1xuXHRcdCAgICBcdGNvbnNvbGUubG9nKFwiYWxsIGltYWdlcyBvZiAnUHJpY2luZyBtZW51JyBsb2FkZWRcIik7XG5cblx0XHQgICBcdFx0aW5zdGFudGlhdGVJc290b3BlR2FsbGVyeShcIi5ncmlkLXByaWNpbmdcIix7XG5cdFx0ICBcdFx0XHRpdGVtU2VsZWN0b3I6ICcuZ3JpZC1pdGVtLXByaWNpbmcnLFxuXHRcdCAgXHRcdFx0c3RhZ2dlcjogMzBcblx0XHRcdFx0fSk7XG5cblx0XHQgICAgXHRidWlsZEltZ0NhdGVnb3JpZXMoXCIjZmlsdGVyLXByaWNlbGlzdFwiLFwiI3ByaWNpbmctZ2FsbGVyeSAuZ3JpZC1pdGVtLXByaWNpbmdcIik7XG5cdFx0ICAgIFx0cGxhY2VGaWx0ZXJMaXN0ZW5lcnMoXCIuZ3JpZC1wcmljaW5nXCIpO1xuXHRcdCAgICBcdCQoXCIuZ3JpZC1wcmljaW5nPi5ncmlkLWl0ZW0tcHJpY2luZ1wiKS5yZW1vdmVDbGFzcyhcImhvdmVyLW9mZlwiKTtcblxuXHRcdFx0XHRcdGNhbGxiYWNrRnVuYygpO1xuXG5cdFx0ICBcdH0pXG5cdFx0ICBcdC5kb25lKCBmdW5jdGlvbigpIHtcblx0XHQgICAgXHRjb25zb2xlLmxvZyhcIkFsbCBpbWFnZXMgb2YgJ1ByaWNpbmcgbWVudScgc3VjY2Vzc2Z1bGx5IGxvYWRlZFwiKTtcblxuXHRcdCAgXHR9KVxuXHRcdCAgXHQuZmFpbCggZnVuY3Rpb24oKSB7XG5cdFx0ICAgIFx0Y29uc29sZS5sb2coIGJyb2tlbkNvdW50ICsgXCIgb2YgJ1ByaWNpbmcgbWVudScgaW1hZ2VzIGhhdmUgYnJva2VuIGxpbmtzLiBDaGVjayB5b3VyIGltYWdlIHBhdGhzLlwiKTtcblx0XHQgIFx0fSlcblx0XHRcdC5wcm9ncmVzcyggZnVuY3Rpb24oIGluc3RhbmNlLCBpbWFnZSApIHtcblxuXHRcdCAgICBcdGlmICghaW1hZ2UuaXNMb2FkZWQpIHtcblx0XHRcdFx0XHRicm9rZW5Db3VudCsrO1xuXHRcdFx0XHRcdCQoaW1hZ2UuaW1nKS5wYXJlbnQoKS5yZW1vdmUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdH1cblxuXG5cdGZ1bmN0aW9uIGluc3RhbnRpYXRlSXNvdG9wZUdhbGxlcnkoZWwsb3B0aW9ucyl7XG5cdFx0JChlbCkuaXNvdG9wZShvcHRpb25zKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGJ1aWxkSW1nQ2F0ZWdvcmllcyhsaXN0RWxlbWVudCxpbWdDb250YWluZXJzKSB7XG5cblx0XHR2YXIgJGltZ0NvbnRhaW5lcnMgPSAkKGltZ0NvbnRhaW5lcnMpO1xuXHRcdHZhciAkYnV0dG9ucyA9ICQobGlzdEVsZW1lbnQpO1xuXHRcdHZhciB0YWdnZWQgPSB7fTtcblxuXHRcdCRidXR0b25zLmNoaWxkcmVuKCkucmVtb3ZlKCk7XG5cblx0XHQkaW1nQ29udGFpbmVycy5lYWNoKGZ1bmN0aW9uKCl7XG5cdFx0XHR2YXIgaW1nQ29udGFpbmVyPXRoaXM7XG5cdFx0XHR2YXIgdGFncyA9ICQodGhpcykuZGF0YSgncG9ydGZvbGlvLXRhZ3MnKTtcblxuXHRcdFx0aWYgKHRhZ3MpIHtcblx0XHRcdFx0dGFncy5zcGxpdChcIixcIikuZm9yRWFjaChmdW5jdGlvbih0YWdOYW1lKXtcblx0XHRcdFx0XHR0YWdOYW1lID0gdGFnTmFtZS50cmltKCk7XG5cdFx0XHRcdFx0aWYgKHRhZ2dlZFt0YWdOYW1lXT09bnVsbCkge1xuXHRcdFx0XHRcdFx0dGFnZ2VkW3RhZ05hbWVdPVtdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0YWdnZWRbdGFnTmFtZV0ucHVzaChpbWdDb250YWluZXIpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9KVxuXG5cdFx0JGJ1dHRvbnMuYWRkQ2xhc3MoXCJmaWx0ZXItd3JhcHBlclwiKTtcblx0XHQkKFwiPGxpLz5cIikuYXBwZW5kVG8oJGJ1dHRvbnMpO1xuXG5cdFx0JChcIjxhLz5cIiwge1xuXHRcdFx0dGV4dDogXCJWxaFlXCIsXG5cdFx0XHRjbGFzczogXCJmaWx0ZXItaXRlbSBzZWxlY3RlZFwiLFxuXHRcdFx0Y2xpY2s6IGZ1bmN0aW9uKCl7XG5cdFx0XHRcdCQodGhpcykuYWRkQ2xhc3MoXCJzZWxlY3RlZFwiKS5wYXJlbnQoKS5zaWJsaW5ncygpLmNoaWxkcmVuKCkucmVtb3ZlQ2xhc3MoXCJzZWxlY3RlZFwiKTtcblx0XHRcdH1cblx0XHR9KS5hcHBlbmRUbygkYnV0dG9ucy5jaGlsZHJlbigpLmVxKDApKS5hdHRyKCdkYXRhLWxhbmcnLCdWxaFlJyk7XG5cblx0XHQkKFwiPGxpPjxhIGNsYXNzPSdmaWx0ZXItaXRlbSBmaWx0ZXItcG9ydGZvbGlvLWRpdmlkZXInPiZuYnNwOzwvYT48L2xpPlwiKS5hcHBlbmRUbygkYnV0dG9ucyk7XG5cblx0XHQkLmVhY2godGFnZ2VkLCBmdW5jdGlvbih0YWdOYW1lKSB7XG5cdFx0XHQkKFwiPGxpLz5cIikuYXBwZW5kVG8oJGJ1dHRvbnMpO1xuXG5cdFx0XHQkKFwiPGEvPlwiLCB7XG5cdFx0XHRcdHRleHQ6IHRhZ05hbWUsXG5cdFx0XHRcdGNsYXNzOiBcImZpbHRlci1pdGVtXCIsXG5cdFx0XHRcdGNsaWNrOiBmdW5jdGlvbigpe1xuXHRcdFx0XHRcdCQodGhpcykuYWRkQ2xhc3MoXCJzZWxlY3RlZFwiKS5wYXJlbnQoKS5zaWJsaW5ncygpLmNoaWxkcmVuKCkucmVtb3ZlQ2xhc3MoXCJzZWxlY3RlZFwiKTtcblx0XHRcdFx0fVxuXHRcdFx0fSkuYXBwZW5kVG8oJGJ1dHRvbnMuY2hpbGRyZW4oKS5sYXN0KCkpLmF0dHIoJ2RhdGEtbGFuZycsdGFnTmFtZSk7XG5cdFx0fSlcblxuXHR9O1xuXG5cdGZ1bmN0aW9uIHBsYWNlRmlsdGVyTGlzdGVuZXJzKGdyaWRFbCkgeyAgIC8vIFwiLmdyaWRcIlxuXHQgICAgJCgnLmZpbHRlci13cmFwcGVyJykub24oICdjbGljaycsICcuZmlsdGVyLWl0ZW0nLCBmdW5jdGlvbigpIHtcblx0ICAgIFx0dmFyIGZpbHRlclZhbHVlID0gJCh0aGlzKS5kYXRhKCdsYW5nJyk7XG5cdCAgICBcdCAvLyBjb25zb2xlLmxvZyhcIi0tLS0tLS0tXCIpO1xuXHQgICAgXHQgLy8gY29uc29sZS5sb2coZmlsdGVyVmFsdWUpO1xuXG5cdCAgICBcdGlmIChmaWx0ZXJWYWx1ZSA9PT0gJCgkKFwiLmZpbHRlci1pdGVtXCIpWzBdKS5kYXRhKCdsYW5nJykpIHtcblx0ICAgIFx0XHQkKGdyaWRFbCkuaXNvdG9wZSh7XG5cdFx0XHRcdCAgXHRmaWx0ZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQgIFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdCAgXHQgIFx0fVxuXHRcdFx0XHRcdH0pO1xuXHQgICAgXHR9IGVsc2Uge1xuXHRcdFx0XHRcdCQoZ3JpZEVsKS5pc290b3BlKHtcblx0XHRcdFx0XHQgIFx0ZmlsdGVyOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQgIFx0XHR0YWdUZXh0PSAkKHRoaXMpLmRhdGEoJ3BvcnRmb2xpb1RhZ3MnKTtcblx0XHRcdFx0XHQgIFx0XHRmb3VuZCA9IHRhZ1RleHQuc2VhcmNoKGZpbHRlclZhbHVlKTtcblx0XHRcdFx0XHRcdCAgXHRpZiAoZm91bmQ+IC0xKSB7XG5cdFx0XHRcdFx0XHQgIFx0XHRyZXR1cm4gdHJ1ZVxuXHRcdFx0XHRcdFx0ICBcdH0gICBlbHNlIHtcblx0XHRcdFx0XHRcdCAgXHRcdHJldHVybiBmYWxzZVxuXHRcdFx0XHRcdFx0ICBcdH1cblx0XHRcdFx0ICBcdCAgXHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0ICAgIH0pO1xuXG5cdFx0JChncmlkRWwgKyAnIC5ncmlkLWl0ZW0nKS5vbiggJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0aWYgKCQodGhpcykuaGFzQ2xhc3MoJ2dyaWQtaXRlbS1zZWxlY3RlZCcpKSB7XG5cdFx0XHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoJ2dyaWQtaXRlbS1zZWxlY3RlZCcpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JChncmlkRWwgKyAnIC5ncmlkLWl0ZW0nKS5yZW1vdmVDbGFzcygnZ3JpZC1pdGVtLXNlbGVjdGVkJyk7XG5cdFx0XHRcdCQodGhpcykuYWRkQ2xhc3MoJ2dyaWQtaXRlbS1zZWxlY3RlZCcpO1xuXHRcdFx0fVxuXHRcdFx0JChncmlkRWwpLmlzb3RvcGUoJ2xheW91dCcpO1xuXHRcdFx0Ly8gY29uc29sZS5sb2coJ2dyaWQgaXRlbSBjbGlja2VkJyk7XG5cdFx0XHQvLyBjb25zb2xlLmxvZygkKHRoaXMpKTtcblx0XHR9KTtcblxuXHR9XG4iXX0=
