function initContactFormListener(){$("#contact-form .btn-site").on("click",function(){$("#contact-form").submit()}),$("#contact-form").submit(function(e){e.preventDefault(),console.log("Form submitted listener called");var s=$("#contact-form").find("input, textarea, select"),t={};s.each(function(){this.name&&("checkbox"==this.type||"radio"==this.type?this.checked&&(t[this.name]=this.value):t[this.name]=this.value)}),console.log("formValues : "+JSON.stringify(t)),$.ajax({url:"assets/php/handleajaxform.php",method:"POST",data:t,success:function(e){if(console.log("AJAX post result result : "+JSON.stringify(e)),$("div[data-error-id]").text(""),$("#contact-form input, #contact-form textarea").removeClass("form-error"),$("#send-result").text(""),Object.keys(e.errors).length>0)for(var s in e.errors)console.log("error in "+s+": "+e.errors[s]),$('div[data-error-id="'+s+'"]').text(e.errors[s]).hide().slideDown(),$('*[name="'+s+'"]').addClass("form-error"),$('*[name="'+s+'"]').animateCss("shake");else console.log("All validation passed succesfully!"),$("#send-result").text("Thank you. Your message has been sent."),$("#send-result").removeClass("alert-danger").addClass("alert-success"),$("#send-result").show().animateCss("bounceIn",function(){$("input").val(""),$("textarea").val(""),$("#send-result").delay(5e3).slideUp()})},error:function(){$("#send-result").removeClass("alert-success"),$("#send-result").addClass("alert-danger"),$("#send-result").text("Sorry... Your message could not have been delivered."),$("#send-result").slideDown()}})})}
function initContactMap(){var o=[{featureType:"all",elementType:"all",stylers:[{saturation:-100},{gamma:.5}]}],t=new google.maps.Map(document.getElementById("contact-map"),{center:myPosition,scrollwheel:!1,streetViewControl:!0,streetViewControl:{position:google.maps.ControlPosition.LEFT_BOTTOM},mapTypeControl:!0,mapTypeControlOptions:{position:google.maps.ControlPosition.BOTTOM_LEFT},zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},styles:o,zoom:14});myMap=t;new google.maps.Marker({map:t,position:myPosition,title:"Kamenictví Erben",icon:{url:"assets/images/IE_logo_rounded_pointer.png",scaledSize:new google.maps.Size(150,150)}});myMap.panBy(0,-$("nav.navbar").height())}var myMap,myPosition={lat:50.048822,lng:15.200242};
$(function(n){$(".loader-wrapper").hide();setInterval(function(){$(".btn-down").animateCss("bounce")},3e3);$.fn.extend({animateCss:function(n,e){return this.addClass("animated "+n).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("animated "+n),$.isFunction(e)&&e()}),this}}),initCarousels=function(){console.log("carousels initialized");for(var n=[{carousel:"#main-carousel",interval:7e3,pause:"none"},{carousel:"#about-carousel",interval:5e3,pause:"none"},{carousel:"#carouselTombstones",interval:3e3,pause:"none"},{carousel:"#carouselGarden",interval:3e3,pause:"none"},{carousel:"#carouselRestorations",interval:3e3,pause:"none"},{carousel:"#CarouselMonuments",interval:3e3,pause:"none"}],e=0;e<n.length-1;e++)$(n[e].carousel).carousel({interval:n[e].interval})},n.initCarousels=initCarousels}(window));
!function(t,a){var n=["cz","en"],e=function(t){return new e.init(t)};e.prototype={getKeyVal:function(t){return self=this,function(){t=t.trim();for(var a,n=0;n<=e.data.length-1;n++){if(e.data[n].datatag===t)return a=e.data[n][self.activeLang];a=""}return a}()},switchLang:function(t){self=this;for(var n=a("[data-lang]").length,e=0;e<=n-1;e++){var o=a(a("[data-lang]")[e]).data("lang");value=LNG$(t).getKeyVal(o),""!==value.trim()&&(value.search("<ph>")>-1?(value=value.substr(4,value.length),a(a("[data-lang]")[e]).attr("placeholder",value)):a(a("[data-lang]")[e]).text(LNG$(t).getKeyVal(o)).animateCss("pulse"))}}},e.init=function(t){this.activeLang=t||n[0]},e.init.prototype=e.prototype,t.Lang=t.LNG$=e,function(t,n){a.getJSON(t,function(){console.log("--- success ---")}).done(function(t){console.log("--- second success ---"),n(t)}).fail(function(t,a,n){console.log("--- error ---"),console.log(t)}).always(function(){})}("./assets/data/lang.json",function(t){e.data=t;var n=a(".lang-switcher a").text().trim();LNG$(n).switchLang(n)})}(window,jQuery);
$(function(n){function e(){$("#mainNavbar").on("show.bs.collapse",function(){$(".hamburger__menu-icon").addClass("hamburger__menu-icon--close-x")}),$("#mainNavbar").on("hide.bs.collapse",function(){$(".hamburger__menu-icon").removeClass("hamburger__menu-icon--close-x")}),$(".nav-link").on("click",function(n){n.preventDefault();var e=this.href.trim().toLowerCase(),i=this.pathname.trim().toLowerCase();$(this).siblings(".nav-link").removeClass("active"),$(this).addClass("active"),void 0!==s&&null!==s&&(s=s.destroy(!0)),$("#mainNavbar").collapse("hide"),$(".loader-wrapper").show(),$("#ajax-container").animateCss("fadeOutDown",function(){var n=this;$("body,html").stop().animate({scrollTop:0},"50"),$("#ajax-content").load(e+" #ajax-container",function(e,h){"success"===h?($(n).remove(),$("#ajax-content").hide(),$(".loader-wrapper").hide(),$("#ajax-content").show(),$("#ajax-content").animateCss("fadeInUp"),a(),t(),o(!0),i.search("realisations.html")>-1?initCommisionsGallery():i.search("contact.html")>-1?(initContactMap(),initContactFormListener()):i.search("index.html")>-1?(initCarousels(),r(),m||(s=new ScrollMagic.Controller({globalSceneOptions:{triggerHook:"onEnter",duration:"100%"}}),c=new ScrollMagic.Scene({triggerElement:"#parallax1"}).setTween("#parallax1 > div",{y:"50%",ease:Linear.easeNone}).addTo(s))):i.search("about.html")>-1?(initCarousels(),m||(s=new ScrollMagic.Controller({globalSceneOptions:{triggerHook:"onEnter",duration:"100%"}}),l=new ScrollMagic.Scene({triggerElement:"#parallax2"}).setTween("#parallax2 > div",{y:"50%",ease:Linear.easeNone}).addTo(s))):i.search("pricing.html")>-1&&initPricingGallery()):"error"===h&&($(".loader-wrapper").hide(),console.log("Error loading from server..."))})})})}function a(){$(".btn-map").on("click",function(n){n.preventDefault();var e=$(this);if(window.addEventListener("orientationchange",function(){e.children().hasClass("fa-expand")&&(window.matchMedia("(orientation: landscape)").matches&&window.innerWidth<767?$("#contact-map").animate({height:"75vh"},500,function(){google.maps.event.trigger(myMap,"resize"),myMap.setCenter(myPosition),myMap.panBy(0,-$("nav.navbar").height())}):$("#contact-map").animate({height:"50vh"},500,function(){google.maps.event.trigger(myMap,"resize"),myMap.setCenter(myPosition),myMap.panBy(0,-$("nav.navbar").height())}))},!1),e.children().hasClass("fa-expand"))return e.children().removeClass("fa-expand").addClass("fa-compress"),void $("#contact-map").animate({height:"100vh"},500,function(){google.maps.event.trigger(myMap,"resize"),myMap.setCenter(myPosition),myMap.panBy(0,-$("nav.navbar").height())});e.children().hasClass("fa-compress")&&(e.children().removeClass("fa-compress").addClass("fa-expand"),window.matchMedia("(orientation: landscape)").matches&&window.innerWidth<767?$("#contact-map").animate({height:"75vh"},500,function(){google.maps.event.trigger(myMap,"resize"),myMap.setCenter(myPosition),myMap.panBy(0,-$("nav.navbar").height())}):$("#contact-map").animate({height:"50vh"},500,function(){google.maps.event.trigger(myMap,"resize"),myMap.setCenter(myPosition),myMap.panBy(0,-$("nav.navbar").height())}))})}function t(){var n=0;$(window).on("scroll",function(){var e=$(window).height(),a=$(window).scrollTop();n=e/5,a<0&&(a=0),(e-n)/a>1?$(".btn-move-up").is(":visible")&&$(".btn-move-up").animateCss("bounceOut",function(){$(".btn-move-up").hide(),$(".btn-down").show().animateCss("bounceIn")}):$(".btn-move-up").is(":visible")||$(".btn-down").animateCss("bounceOut",function(){$(".btn-down").hide(),$(".btn-move-up").show(),$(".btn-move-up").animateCss("bounceIn")})}),$(".btn-move-up").on("click",function(){$("body,html").stop().animate({scrollTop:0},"700","swing")}),$(".btn-down").on("click",function(n){console.log(n),n.preventDefault();var e=n.currentTarget.hash,a=$(e).offset().top;$("body,html").stop().animate({scrollTop:a},"700","swing")})}function o(n){var n=n||!1,e=$(".lang-switcher>span").text().trim();n&&LNG$(e).switchLang(e),$(".lang-switcher>span").on("click",function(){"cz"===e?(e="en",$(".lang-switcher>span").text(e),LNG$(e).switchLang(e)):"en"===e&&(e="cz",$(".lang-switcher>span").text(e),LNG$(e).switchLang(e)),$(this).animateCss("bounceIn")})}function r(){$(".btn-site").on("click",function(n){n.preventDefault;var e=$(this).data("link").trim(),i=window.location.href;i.search("index.html")>=0?i=i.replace("index.html","realisations.html"):i+="realisations.html",$("#ajax-container").animateCss("fadeOutDown",function(){$("#ajax-content").hide(),$("#ajax-content").load(i+" #ajax-container",function(){$(".navbar-nav>.nav-link").removeClass("active"),$(".navbar-nav>.nav-link[href='realisations.html']").addClass("active"),$("#ajax-content").show(),$("#ajax-content").animateCss("fadeInUp"),a(),t(),o(),initCommisionsGallery(function(){$(".filter-item").each(function(n){if($(this).text().toLowerCase().trim()===e)return void $(this).trigger("click")})})})})})}var s,c,l;n.mySite={};var m=function(){var n=["android","webos","iphone","ipad","blackberry"];for(i in n)if(navigator.userAgent.toLowerCase().search(n[i])>-1&&void 0!==window.orientation)return!0;return!1}();if(n.mySite.isMobileFlag=m,m===!0&&$("body").addClass("isMobile"),!m)var s=new ScrollMagic.Controller({globalSceneOptions:{triggerHook:"onEnter",duration:"100%"}}),c=new ScrollMagic.Scene({triggerElement:"#parallax1"}).setTween("#parallax1 > div",{y:"50%",ease:Linear.easeNone}).addTo(s);r(),e(),a(),t(),o(),n.mySite.navMenuInit=e,n.mySite.placeContactListeners=a,n.mySite.placeButtonMoveUpListener=t,n.mySite.placeLangSwitchListener=o}(window));
function initCommisionsGallery(e){var e=e||function(){},i=0;$(".grid-item>.img-result-wrapper").hide(),$(".grid-item>.img-loader-wrapper").show(),$(".grid>.grid-item").addClass("hover-off"),$("#portfolios").imagesLoaded().always(function(i){console.log("all images of 'Commisions menu' loaded"),instantiateIsotopeGallery(".grid",{itemSelector:".grid-item",stagger:30}),buildImgCategories("#filter-portfolio","#portfolio-gallery .grid-item"),placeFilterListeners(".grid"),$(".grid-item>.img-result-wrapper").fadeOut(1e3),$(".img-loader>.img-loader-text").text("images loaded"),$(".img-loader-bar").css("background-color","green"),$(".img-loader").delay(3e3).slideUp(1e3),$(".grid>.grid-item").removeClass("hover-off"),e()}).done(function(){console.log("all images of 'Commisions menu' successfully loaded")}).fail(function(){console.log(i+" of 'Commisions menu' images have broken links. Check your image paths."),$(".img-loader").delay(3e3).slideUp(1e3)}).progress(function(e,t){t.isLoaded?($(t.img).siblings(".img-loader-wrapper").hide(),$(t.img).siblings(".img-result-wrapper").animateCss("bounceIn").show(),$(".img-loader-bar").width(e.progressedCount/e.images.length*100+"%")):(i++,$(t.img).parent().remove())})}function initPricingGallery(){var e=0;$(".grid-pricing>.grid-item-pricing").addClass("hover-off"),$("#pricing").imagesLoaded().always(function(e){console.log("all images of 'Pricing menu' loaded"),instantiateIsotopeGallery(".grid-pricing",{itemSelector:".grid-item-pricing",stagger:30}),buildImgCategories("#filter-pricelist","#pricing-gallery .grid-item-pricing"),placeFilterListeners(".grid-pricing"),$(".grid-pricing>.grid-item-pricing").removeClass("hover-off")}).done(function(){console.log("All images of 'Pricing menu' successfully loaded")}).fail(function(){console.log(e+" of 'Pricing menu' images have broken links. Check your image paths.")}).progress(function(i,t){t.isLoaded||(e++,$(t.img).parent().remove())})}function instantiateIsotopeGallery(e,i){$(e).isotope(i)}function buildImgCategories(e,i){var t=$(i),r=$(e),o={};r.children().remove(),t.each(function(){var e=this,i=$(this).data("portfolio-tags");i&&i.split(",").forEach(function(i){i=i.trim(),null==o[i]&&(o[i]=[]),o[i].push(e)})}),r.addClass("filter-wrapper"),$("<li/>").appendTo(r),$("<a/>",{text:"Vše",class:"filter-item selected",click:function(){$(this).addClass("selected").parent().siblings().children().removeClass("selected")}}).appendTo(r.children().eq(0)).attr("data-lang","Vše"),$("<li><a class='filter-item filter-portfolio-divider'>&nbsp;</a></li>").appendTo(r),$.each(o,function(e){$("<li/>").appendTo(r),$("<a/>",{text:e,class:"filter-item",click:function(){$(this).addClass("selected").parent().siblings().children().removeClass("selected")}}).appendTo(r.children().last()).attr("data-lang",e)})}function placeFilterListeners(e){$(".filter-wrapper").on("click",".filter-item",function(){var i=$(this).data("lang");i===$($(".filter-item")[0]).data("lang")?$(e).isotope({filter:function(){return!0}}):$(e).isotope({filter:function(){return tagText=$(this).data("portfolioTags"),found=tagText.search(i),found>-1}})}),$(e+" .grid-item").on("click",function(i){i.preventDefault(),$(this).hasClass("grid-item-selected")?$(this).removeClass("grid-item-selected"):($(e+" .grid-item").removeClass("grid-item-selected"),$(this).addClass("grid-item-selected")),$(e).isotope("layout")})}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRhY3QtZm9ybS5qcyIsImNvbnRhY3RfbWFwLmpzIiwiaW5pdC5qcyIsImxhbmd1YWdlLWNvbnRyb2xsZXIuanMiLCJuYXZpZ2F0aW9uLmpzIiwicG9ydGZvbGlvX2ZpbHRlci5qcyJdLCJuYW1lcyI6WyJpbml0Q29udGFjdEZvcm1MaXN0ZW5lciIsIiQiLCJvbiIsInN1Ym1pdCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImNvbnNvbGUiLCJsb2ciLCJpbnB1dEVsZW1lbnRzIiwiZmluZCIsImZvcm1WYWx1ZXMiLCJlYWNoIiwidGhpcyIsIm5hbWUiLCJ0eXBlIiwiY2hlY2tlZCIsInZhbHVlIiwiSlNPTiIsInN0cmluZ2lmeSIsImFqYXgiLCJ1cmwiLCJtZXRob2QiLCJkYXRhIiwic3VjY2VzcyIsInJlc3VsdCIsInRleHQiLCJyZW1vdmVDbGFzcyIsIk9iamVjdCIsImtleXMiLCJlcnJvcnMiLCJsZW5ndGgiLCJpbnB1dE5hbWUiLCJoaWRlIiwic2xpZGVEb3duIiwiYWRkQ2xhc3MiLCJhbmltYXRlQ3NzIiwic2hvdyIsInZhbCIsImRlbGF5Iiwic2xpZGVVcCIsImVycm9yIiwiaW5pdENvbnRhY3RNYXAiLCJzdHlsZUFycmF5IiwiZmVhdHVyZVR5cGUiLCJlbGVtZW50VHlwZSIsInN0eWxlcnMiLCJzYXR1cmF0aW9uIiwiZ2FtbWEiLCJtYXAiLCJnb29nbGUiLCJtYXBzIiwiTWFwIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNlbnRlciIsIm15UG9zaXRpb24iLCJzY3JvbGx3aGVlbCIsInN0cmVldFZpZXdDb250cm9sIiwicG9zaXRpb24iLCJDb250cm9sUG9zaXRpb24iLCJMRUZUX0JPVFRPTSIsIm1hcFR5cGVDb250cm9sIiwibWFwVHlwZUNvbnRyb2xPcHRpb25zIiwiQk9UVE9NX0xFRlQiLCJ6b29tQ29udHJvbCIsInpvb21Db250cm9sT3B0aW9ucyIsIkxFRlRfQ0VOVEVSIiwic3R5bGVzIiwiem9vbSIsIm15TWFwIiwiTWFya2VyIiwidGl0bGUiLCJpY29uIiwic2NhbGVkU2l6ZSIsIlNpemUiLCJwYW5CeSIsImhlaWdodCIsImxhdCIsImxuZyIsImdsb2JhbCIsInNldEludGVydmFsIiwiZm4iLCJleHRlbmQiLCJhbmltYXRpb25OYW1lIiwiY2FsbEJhY2tGdW5jIiwib25lIiwiaXNGdW5jdGlvbiIsImluaXRDYXJvdXNlbHMiLCJjYXJvdXNlbHNTZXR1cCIsImNhcm91c2VsIiwiaW50ZXJ2YWwiLCJwYXVzZSIsImkiLCJ3aW5kb3ciLCJzaXRlTGFuZ3MiLCJMYW5nIiwiYWN0aXZlTGFuZyIsImluaXQiLCJwcm90b3R5cGUiLCJnZXRLZXlWYWwiLCJrZXlWYWwiLCJzZWxmIiwidHJpbSIsImRhdGF0YWciLCJzd2l0Y2hMYW5nIiwic3dpdGNoVG9MYW5nIiwibnVtT2ZMYW5nRWxzIiwicmV0cmlldmVkRGF0YVRhZyIsIkxORyQiLCJzZWFyY2giLCJzdWJzdHIiLCJhdHRyIiwiY2FsbGJhY2tGdW5jIiwiZ2V0SlNPTiIsImRvbmUiLCJmYWlsIiwianFYSFIiLCJ0ZXh0U3RhdHVzIiwiZXJyb3JUaHJvd24iLCJhbHdheXMiLCJpbml0TGFuZyIsImpRdWVyeSIsIm5hdk1lbnVJbml0IiwiaHJlZiIsInRvTG93ZXJDYXNlIiwibWVudU5hbWUiLCJwYXRobmFtZSIsInNpYmxpbmdzIiwidW5kZWZpbmVkIiwiY29udHJvbGxlciIsImRlc3Ryb3kiLCJjb2xsYXBzZSIsInN0b3AiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwibG9hZCIsInN0YXR1cyIsInJlbW92ZSIsInBsYWNlQ29udGFjdExpc3RlbmVycyIsInBsYWNlQnV0dG9uTW92ZVVwTGlzdGVuZXIiLCJwbGFjZUxhbmdTd2l0Y2hMaXN0ZW5lciIsImluaXRDb21taXNpb25zR2FsbGVyeSIsImxpbmtUb0dhbGxlcnkiLCJpc01vYmlsZUZsYWciLCJTY3JvbGxNYWdpYyIsIkNvbnRyb2xsZXIiLCJnbG9iYWxTY2VuZU9wdGlvbnMiLCJ0cmlnZ2VySG9vayIsImR1cmF0aW9uIiwicGFyYWxsYXgxIiwiU2NlbmUiLCJ0cmlnZ2VyRWxlbWVudCIsInNldFR3ZWVuIiwieSIsImVhc2UiLCJMaW5lYXIiLCJlYXNlTm9uZSIsImFkZFRvIiwicGFyYWxsYXgyIiwiaW5pdFByaWNpbmdHYWxsZXJ5IiwiJHRoaXMiLCJhZGRFdmVudExpc3RlbmVyIiwiY2hpbGRyZW4iLCJoYXNDbGFzcyIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwiaW5uZXJXaWR0aCIsImV2ZW50IiwidHJpZ2dlciIsInNldENlbnRlciIsIm9mZlNldFkiLCJhY3R1YWxIZWlnaHQiLCJhY3R1YWxTY3JvbGxQb3MiLCJpcyIsImp1bXBIYXNoIiwiY3VycmVudFRhcmdldCIsImhhc2giLCJqdW1wUG9pbnQiLCJvZmZzZXQiLCJ0b3AiLCJ1cGRhdGUiLCJnYWxMaW5rIiwibG9jYXRpb24iLCJyZXBsYWNlIiwibXlTaXRlIiwiYWdlbnRzIiwibmF2aWdhdG9yIiwidXNlckFnZW50Iiwib3JpZW50YXRpb24iLCJicm9rZW5Db3VudCIsImltYWdlc0xvYWRlZCIsImluc3RhbmNlIiwiaW5zdGFudGlhdGVJc290b3BlR2FsbGVyeSIsIml0ZW1TZWxlY3RvciIsInN0YWdnZXIiLCJidWlsZEltZ0NhdGVnb3JpZXMiLCJwbGFjZUZpbHRlckxpc3RlbmVycyIsImZhZGVPdXQiLCJjc3MiLCJwcm9ncmVzcyIsImltYWdlIiwiaXNMb2FkZWQiLCJpbWciLCJ3aWR0aCIsInByb2dyZXNzZWRDb3VudCIsImltYWdlcyIsInBhcmVudCIsImVsIiwib3B0aW9ucyIsImlzb3RvcGUiLCJsaXN0RWxlbWVudCIsImltZ0NvbnRhaW5lcnMiLCIkaW1nQ29udGFpbmVycyIsIiRidXR0b25zIiwidGFnZ2VkIiwiaW1nQ29udGFpbmVyIiwidGFncyIsInNwbGl0IiwiZm9yRWFjaCIsInRhZ05hbWUiLCJwdXNoIiwiYXBwZW5kVG8iLCJjbGFzcyIsImNsaWNrIiwiZXEiLCJsYXN0IiwiZ3JpZEVsIiwiZmlsdGVyVmFsdWUiLCJmaWx0ZXIiLCJ0YWdUZXh0Iiwi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dkIsc0JBQXFCOEIsR0FDMUJqTyxFQUFFLG1CQUFtQkMsR0FBSSxRQUFTLGVBQWdCLFdBQ2pELEdBQUlpTyxHQUFjbE8sRUFBRVcsTUFBTVUsS0FBSyxPQUkzQjZNLEtBQWdCbE8sRUFBRUEsRUFBRSxnQkFBZ0IsSUFBSXFCLEtBQUssUUFDaERyQixFQUFFaU8sR0FBUWpCLFNBQ1ZtQixPQUFRLFdBQ1AsT0FBTyxLQUlYbk8sRUFBRWlPLEdBQVFqQixTQUNQbUIsT0FBUSxXQUdQLE1BRkFDLFNBQVNwTyxFQUFFVyxNQUFNVSxLQUFLLGlCQUN0QmdOLE1BQVFELFFBQVF4SCxPQUFPc0gsR0FDbkJHLE9BQVEsT0FVbEJyTyxFQUFFaU8sRUFBUyxlQUFlaE8sR0FBSSxRQUFTLFNBQVNFLEdBQy9DQSxFQUFFQyxpQkFDRUosRUFBRVcsTUFBTXVKLFNBQVMsc0JBQ3BCbEssRUFBRVcsTUFBTWMsWUFBWSx1QkFFcEJ6QixFQUFFaU8sRUFBUyxlQUFleE0sWUFBWSxzQkFDdEN6QixFQUFFVyxNQUFNc0IsU0FBUyx1QkFFbEJqQyxFQUFFaU8sR0FBUWpCLFFBQVEiLCJmaWxlIjoic2NyaXB0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGluaXRDb250YWN0Rm9ybUxpc3RlbmVyKCkge1xuICAgIFxuICAgIC8vY29uc29sZS5sb2coXCJpbnNpZGUgb2YgYSBmdW5jdGlvbiBJbml0Rm9ybUxpc3RlbmVyXCIpO1xuICAgIFxuICAgICQoXCIjY29udGFjdC1mb3JtIC5idG4tc2l0ZVwiKS5vbiggXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcImNsaWNrIGV2ZW50OiAuY29udGFjdC1zdWJtaXQgYnV0dG9uXCIpO1xuICAgICAgICAkKCBcIiNjb250YWN0LWZvcm1cIiApLnN1Ym1pdCgpO1xuICAgIH0pO1xuXG4gICAgJChcIiNjb250YWN0LWZvcm1cIikuc3VibWl0KGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKFwiRm9ybSBzdWJtaXR0ZWQgbGlzdGVuZXIgY2FsbGVkXCIpO1xuXG4gICAgICAgIHZhciBpbnB1dEVsZW1lbnRzID0gJChcIiNjb250YWN0LWZvcm1cIikuZmluZCgnaW5wdXQsIHRleHRhcmVhLCBzZWxlY3QnKTtcbiAgICAgICAgdmFyIGZvcm1WYWx1ZXMgPSB7fTtcblxuICAgICAgICBpbnB1dEVsZW1lbnRzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5uYW1lKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudHlwZSA9PSBcImNoZWNrYm94XCIgfHwgdGhpcy50eXBlID09IFwicmFkaW9cIikge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtVmFsdWVzW3RoaXMubmFtZV0gPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb3JtVmFsdWVzW3RoaXMubmFtZV0gPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhcImZvcm1WYWx1ZXMgOiBcIiArIEpTT04uc3RyaW5naWZ5KGZvcm1WYWx1ZXMpKTtcblxuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiBcImFzc2V0cy9waHAvaGFuZGxlYWpheGZvcm0ucGhwXCIsXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgZGF0YTogZm9ybVZhbHVlcyxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3VsdCkge1xuXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBSkFYIHBvc3QgcmVzdWx0IHJlc3VsdCA6IFwiICsgSlNPTi5zdHJpbmdpZnkocmVzdWx0KSk7XG5cbiAgICAgICAgICAgICAgICAkKCdkaXZbZGF0YS1lcnJvci1pZF0nKS50ZXh0KFwiXCIpO1xuICAgICAgICAgICAgICAgICQoJyNjb250YWN0LWZvcm0gaW5wdXQsICNjb250YWN0LWZvcm0gdGV4dGFyZWEnKS5yZW1vdmVDbGFzcygnZm9ybS1lcnJvcicpO1xuICAgICAgICAgICAgICAgICQoJyNzZW5kLXJlc3VsdCcpLnRleHQoXCJcIik7XG5cbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMocmVzdWx0LmVycm9ycykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpbnB1dE5hbWUgaW4gcmVzdWx0LmVycm9ycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJlcnJvciBpbiBcIiArIGlucHV0TmFtZSArIFwiOiBcIiArIHJlc3VsdC5lcnJvcnNbaW5wdXROYW1lXSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICQoJ2RpdltkYXRhLWVycm9yLWlkPVwiJyArIGlucHV0TmFtZSArICdcIl0nKS50ZXh0KHJlc3VsdC5lcnJvcnNbaW5wdXROYW1lXSkuaGlkZSgpLnNsaWRlRG93bigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnKltuYW1lPVwiJyArIGlucHV0TmFtZSArICdcIl0nKS5hZGRDbGFzcygnZm9ybS1lcnJvcicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnKltuYW1lPVwiJyArIGlucHV0TmFtZSArICdcIl0nKS5hbmltYXRlQ3NzKCdzaGFrZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFsbCB2YWxpZGF0aW9uIHBhc3NlZCBzdWNjZXNmdWxseSFcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgJChcIiNzZW5kLXJlc3VsdFwiKS50ZXh0KFwiVGhhbmsgeW91LiBZb3VyIG1lc3NhZ2UgaGFzIGJlZW4gc2VudC5cIik7XG4gICAgICAgICAgICAgICAgICAgICQoXCIjc2VuZC1yZXN1bHRcIikucmVtb3ZlQ2xhc3MoJ2FsZXJ0LWRhbmdlcicpLmFkZENsYXNzKCdhbGVydC1zdWNjZXNzJyk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAkKFwiI3NlbmQtcmVzdWx0XCIpLnNob3coKS5hbmltYXRlQ3NzKCdib3VuY2VJbicsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCdpbnB1dCcpLnZhbChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJ3RleHRhcmVhJykudmFsKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNzZW5kLXJlc3VsdFwiKS5kZWxheSg1MDAwKS5zbGlkZVVwKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJChcIiNzZW5kLXJlc3VsdFwiKS5yZW1vdmVDbGFzcygnYWxlcnQtc3VjY2VzcycpO1xuICAgICAgICAgICAgICAgICQoXCIjc2VuZC1yZXN1bHRcIikuYWRkQ2xhc3MoJ2FsZXJ0LWRhbmdlcicpO1xuICAgICAgICAgICAgICAgICQoXCIjc2VuZC1yZXN1bHRcIikudGV4dChcIlNvcnJ5Li4uIFlvdXIgbWVzc2FnZSBjb3VsZCBub3QgaGF2ZSBiZWVuIGRlbGl2ZXJlZC5cIik7XG4gICAgICAgICAgICAgICAgJChcIiNzZW5kLXJlc3VsdFwiKS5zbGlkZURvd24oKTtcblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH0pOyAgLy8gdGhlIGVuZCBvZiBhamF4IGNhbGwgdG8gcG9zdCBmb3JtVmFsdWVzXG4gICAgfSk7IC8vIHRoZSBlbmQgb2YgZm9ybSBzdWJtaXQgZnVuY3Rpb25cbiAgICBcbiAgICAvL2dsb2JhbC5pbml0Q29udGFjdEZvcm1MaXN0ZW5lciA9IGluaXRDb250YWN0Rm9ybUxpc3RlbmVyKCk7XG5cbn07IiwiLy8gLS0tLS0tLS0tLSBHT09HTEUgTUFQIC0tLS0tLS0tLS1cblxuXG4gIHZhciBteU1hcDtcbiAgdmFyIG15UG9zaXRpb24gPSB7bGF0OiA1MC4wNDg4MjIsIGxuZzogMTUuMjAwMjQyfTtcblxuICBmdW5jdGlvbiBpbml0Q29udGFjdE1hcCgpIHtcbiAgICBcbiAgICAvLyBTcGVjaWZ5IGZlYXR1cmVzIGFuZCBlbGVtZW50cyB0byBkZWZpbmUgc3R5bGVzLlxuICAgIHZhciBzdHlsZUFycmF5ID0gW1xuICAgIHtcbiAgICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcImFsbFwiLFxuICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwiYWxsXCIsXG4gICAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgXCJzYXR1cmF0aW9uXCI6IC0xMDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgXCJnYW1tYVwiOiAwLjVcbiAgICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgIH1cbiAgXTtcblxuICAgIC8vIENyZWF0ZSBhIG1hcCBvYmplY3QgYW5kIHNwZWNpZnkgdGhlIERPTSBlbGVtZW50IGZvciBkaXNwbGF5LlxuICAgIHZhciBtYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udGFjdC1tYXBcIiksIHtcbiAgICAgICAgY2VudGVyOiBteVBvc2l0aW9uLFxuICAgICAgICBzY3JvbGx3aGVlbDogZmFsc2UsXG4gICAgICAgIHN0cmVldFZpZXdDb250cm9sOiB0cnVlLFxuICAgICAgICBzdHJlZXRWaWV3Q29udHJvbDoge1xuICAgICAgICAgIHBvc2l0aW9uOiBnb29nbGUubWFwcy5Db250cm9sUG9zaXRpb24uTEVGVF9CT1RUT01cbiAgICAgICAgfSxcbiAgICAgICAgbWFwVHlwZUNvbnRyb2w6IHRydWUsXG4gICAgICAgIG1hcFR5cGVDb250cm9sT3B0aW9uczoge1xuICAgICAgICAgICAgcG9zaXRpb246IGdvb2dsZS5tYXBzLkNvbnRyb2xQb3NpdGlvbi5CT1RUT01fTEVGVFxuICAgICAgICB9LFxuICAgICAgICB6b29tQ29udHJvbDogdHJ1ZSxcbiAgICAgICAgem9vbUNvbnRyb2xPcHRpb25zOiB7XG4gICAgICAgICAgcG9zaXRpb246IGdvb2dsZS5tYXBzLkNvbnRyb2xQb3NpdGlvbi5MRUZUX0NFTlRFUlxuICAgICAgICB9LFxuICAgICAgICAvLyBBcHBseSB0aGUgbWFwIHN0eWxlIGFycmF5IHRvIHRoZSBtYXAuXG4gICAgICAgIHN0eWxlczogc3R5bGVBcnJheSxcbiAgICAgICAgem9vbTogMTRcbiAgICB9KTtcblxuICAgIG15TWFwID0gbWFwO1xuICAgIC8vIENyZWF0ZSBhIG1hcmtlciBhbmQgc2V0IGl0cyBwb3NpdGlvbi5cbiAgICBcbiAgICB2YXIgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XG4gICAgICBtYXA6IG1hcCxcbiAgICAgIHBvc2l0aW9uOiBteVBvc2l0aW9uLFxuICAgICAgdGl0bGU6ICdLYW1lbmljdHbDrSBFcmJlbicsXG4gICAgICBpY29uOiB7XG4gICAgICAgIHVybDogXCJhc3NldHMvaW1hZ2VzL0lFX2xvZ29fcm91bmRlZF9wb2ludGVyLnBuZ1wiLFxuICAgICAgICBzY2FsZWRTaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSgxNTAsIDE1MClcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBteU1hcC5wYW5CeSgwLCgtJChcIm5hdi5uYXZiYXJcIikuaGVpZ2h0KCkpKTtcblxuICB9O1xuIiwiJChmdW5jdGlvbihnbG9iYWwpe1xuICAgIFxuICAgIC8vIHZhciBzY2VuZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXJhbGxheC1zY2VuZScpO1xuICAgIC8vIHZhciBwYXJhbGxheCA9IG5ldyBQYXJhbGxheChzY2VuZSk7XG5cbiAgICAkKCcubG9hZGVyLXdyYXBwZXInKS5oaWRlKCk7XG4gICAgXG4gICAgdmFyIGJ0bkludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICQoXCIuYnRuLWRvd25cIikuYW5pbWF0ZUNzcyhcImJvdW5jZVwiKTtcbiAgICAgICAgfSwzMDAwKTtcblxuICAgIC8vIC0tLS0tLS0tLS0gSlFVRVJZIEFOSU1BVEUgRVhURU5TSU9OIC0tLS0tLS0tLS1cbiAgICAkLmZuLmV4dGVuZCh7XG4gICAgICAgIGFuaW1hdGVDc3M6IGZ1bmN0aW9uIChhbmltYXRpb25OYW1lLCBjYWxsQmFja0Z1bmMpIHtcbiAgICAgICAgICAgIHZhciBhbmltYXRpb25FbmQgPSAnd2Via2l0QW5pbWF0aW9uRW5kIG1vekFuaW1hdGlvbkVuZCBNU0FuaW1hdGlvbkVuZCBvYW5pbWF0aW9uZW5kIGFuaW1hdGlvbmVuZCc7XG4gICAgICAgICAgICB0aGlzLmFkZENsYXNzKCdhbmltYXRlZCAnICsgYW5pbWF0aW9uTmFtZSkub25lKGFuaW1hdGlvbkVuZCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnYW5pbWF0ZWQgJyArIGFuaW1hdGlvbk5hbWUpO1xuICAgICAgICAgICAgICAgIGlmICgkLmlzRnVuY3Rpb24oY2FsbEJhY2tGdW5jKSkge1xuICAgICAgICAgICAgICAgICAgICBjYWxsQmFja0Z1bmMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBpbml0Q2Fyb3VzZWxzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY2Fyb3VzZWxzIGluaXRpYWxpemVkXCIpO1xuICAgICAgICB2YXIgY2Fyb3VzZWxzU2V0dXAgPSBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjYXJvdXNlbDogXCIjbWFpbi1jYXJvdXNlbFwiLFxuICAgICAgICAgICAgICAgICAgICBpbnRlcnZhbDo3MDAwLFxuICAgICAgICAgICAgICAgICAgICBwYXVzZTogXCJub25lXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY2Fyb3VzZWw6IFwiI2Fib3V0LWNhcm91c2VsXCIsXG4gICAgICAgICAgICAgICAgICAgIGludGVydmFsOjUwMDAsXG4gICAgICAgICAgICAgICAgICAgIHBhdXNlOiBcIm5vbmVcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjYXJvdXNlbDogXCIjY2Fyb3VzZWxUb21ic3RvbmVzXCIsXG4gICAgICAgICAgICAgICAgICAgIGludGVydmFsOjMwMDAsXG4gICAgICAgICAgICAgICAgICAgIHBhdXNlOiBcIm5vbmVcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjYXJvdXNlbDogXCIjY2Fyb3VzZWxHYXJkZW5cIixcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJ2YWw6MzAwMCxcbiAgICAgICAgICAgICAgICAgICAgcGF1c2U6IFwibm9uZVwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNhcm91c2VsOiBcIiNjYXJvdXNlbFJlc3RvcmF0aW9uc1wiLFxuICAgICAgICAgICAgICAgICAgICBpbnRlcnZhbDozMDAwLFxuICAgICAgICAgICAgICAgICAgICBwYXVzZTogXCJub25lXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY2Fyb3VzZWw6IFwiI0Nhcm91c2VsTW9udW1lbnRzXCIsXG4gICAgICAgICAgICAgICAgICAgIGludGVydmFsOjMwMDAsXG4gICAgICAgICAgICAgICAgICAgIHBhdXNlOiBcIm5vbmVcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgICAvLyAtLS0tLS0tLS0tIENBUk9VU0VMUyBTRVRVUCAtLS0tLS0tLS0tXG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxjYXJvdXNlbHNTZXR1cC5sZW5ndGgtMTtpKyspIHtcbiAgICAgICAgICAgICQoY2Fyb3VzZWxzU2V0dXBbaV1bJ2Nhcm91c2VsJ10pLmNhcm91c2VsKHtcbiAgICAgICAgICAgICAgICBpbnRlcnZhbDogY2Fyb3VzZWxzU2V0dXBbaV1bJ2ludGVydmFsJ11cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGdsb2JhbC5pbml0Q2Fyb3VzZWxzID0gaW5pdENhcm91c2VscztcblxufSh3aW5kb3cpKTtcblxuIiwiKGZ1bmN0aW9uKGdsb2JhbCwkKXtcblxuXHR2YXIgVVJMID0nLi9hc3NldHMvZGF0YS9sYW5nLmpzb24nO1xuXHR2YXIgc2l0ZUxhbmdzID0gW1wiY3pcIixcImVuXCJdO1xuXG5cdHZhciBMYW5nID0gZnVuY3Rpb24oYWN0aXZlTGFuZyl7XG5cdFx0cmV0dXJuIG5ldyBMYW5nLmluaXQoYWN0aXZlTGFuZyk7XG5cdH1cblxuXHRMYW5nLnByb3RvdHlwZSA9IHtcblx0XHRnZXRLZXlWYWw6IGZ1bmN0aW9uKGtleVZhbCl7XG5cdFx0XHRzZWxmID0gdGhpcztcblx0XHRcdHJldHVybiBmdW5jdGlvbigpe1xuXHRcdFx0XHRrZXlWYWwgPSBrZXlWYWwudHJpbSgpO1xuXHRcdFx0XHR2YXIgcmVzdWx0O1xuXHRcdFx0XHRmb3IgKHZhciBpPTA7IGkgPD0gTGFuZy5kYXRhLmxlbmd0aC0xOyBpKyspIHtcblx0XHRcdFx0XHRpZiAoTGFuZy5kYXRhW2ldLmRhdGF0YWc9PT1rZXlWYWwpIHtcblx0XHRcdFx0XHRcdHJlc3VsdCA9IExhbmcuZGF0YVtpXVtzZWxmLmFjdGl2ZUxhbmddO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmVzdWx0ID0gXCJcIjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHRcdH0oKTsgXG5cdFx0fSxcblx0XHRzd2l0Y2hMYW5nOiBmdW5jdGlvbihzd2l0Y2hUb0xhbmcpe1xuXHRcdFx0c2VsZiA9IHRoaXM7XG5cdFx0XHR2YXIgbnVtT2ZMYW5nRWxzID0gJChcIltkYXRhLWxhbmddXCIpLmxlbmd0aDtcblx0XHRcdGZvciAodmFyIGkgPTA7aTw9bnVtT2ZMYW5nRWxzLTE7aSsrKSB7XG5cdFx0XHRcdHZhciByZXRyaWV2ZWREYXRhVGFnID0gJCgkKFwiW2RhdGEtbGFuZ11cIilbaV0pLmRhdGEoJ2xhbmcnKTtcblx0XHRcdFx0dmFsdWUgPSBMTkckKHN3aXRjaFRvTGFuZykuZ2V0S2V5VmFsKHJldHJpZXZlZERhdGFUYWcpO1xuXHRcdFx0XHRpZiAodmFsdWUudHJpbSgpIT09XCJcIikge1xuXHRcdFx0XHRcdGlmICh2YWx1ZS5zZWFyY2goXCI8cGg+XCIpPi0xKSB7XG5cdFx0XHRcdFx0XHR2YWx1ZSA9IHZhbHVlLnN1YnN0cig0LHZhbHVlLmxlbmd0aCk7XG5cdFx0XHRcdFx0XHQkKCQoXCJbZGF0YS1sYW5nXVwiKVtpXSkuYXR0cihcInBsYWNlaG9sZGVyXCIsdmFsdWUpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQkKCQoXCJbZGF0YS1sYW5nXVwiKVtpXSkudGV4dChMTkckKHN3aXRjaFRvTGFuZykuZ2V0S2V5VmFsKHJldHJpZXZlZERhdGFUYWcpKS5hbmltYXRlQ3NzKCdwdWxzZScpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHR9O1xuXG5cdExhbmcuaW5pdCA9IGZ1bmN0aW9uKGFjdGl2ZUxhbmcpe1xuXHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRzZWxmLmFjdGl2ZUxhbmcgPSBhY3RpdmVMYW5nIHx8IHNpdGVMYW5nc1swXTtcblx0fVxuXG5cdExhbmcuaW5pdC5wcm90b3R5cGUgPSBMYW5nLnByb3RvdHlwZTtcblx0Z2xvYmFsLkxhbmcgPSBnbG9iYWwuTE5HJCA9IExhbmc7XG5cblx0Z2V0U2VydmVyRGF0YShVUkwsZnVuY3Rpb24oZGF0YSl7XG5cdFx0TGFuZy5kYXRhID0gZGF0YTtcblx0XHR2YXIgaW5pdExhbmcgPSAkKFwiLmxhbmctc3dpdGNoZXIgYVwiKS50ZXh0KCkudHJpbSgpO1xuXHRcdExORyQoaW5pdExhbmcpLnN3aXRjaExhbmcoaW5pdExhbmcpO1xuXHR9KTtcblxuXHRmdW5jdGlvbiBnZXRTZXJ2ZXJEYXRhKHVybCwgY2FsbGJhY2tGdW5jKSB7XG5cdHZhciByZXN1bHQgPSAkLmdldEpTT04odXJsLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyggXCItLS0gc3VjY2VzcyAtLS1cIiApO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuZG9uZShmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coIFwiLS0tIHNlY29uZCBzdWNjZXNzIC0tLVwiICk7XG5cdFx0XHRcdFx0Ly9jb25zb2xlLmxvZyhkYXRhKTtcblx0XHRcdFx0XHRjYWxsYmFja0Z1bmMoZGF0YSk7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5mYWlsKGZ1bmN0aW9uKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCBcIi0tLSBlcnJvciAtLS1cIiApO1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGpxWEhSKTtcblx0XHRcdFx0fSlcblx0XHRcdFx0LmFsd2F5cyhmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKCBcImNvbXBsZXRlXCIgKTtcblx0XHRcdFx0fSk7XG5cdH07XG5cbn0od2luZG93LCBqUXVlcnkpKTsiLCIvLyAtLS0tLS0tLS0tIE5BVklHQVRJT04gLS0tLS0tLS0tLVxuXG4kKGZ1bmN0aW9uKGdsb2JhbCl7XG5cdHZhciBjb250cm9sbGVyLCBwYXJhbGxheDEsIHBhcmFsbGF4Mjtcblx0Z2xvYmFsLm15U2l0ZSA9e307XG5cblx0ZnVuY3Rpb24gaXNfbW9iaWxlKCkge1xuXHQgICAgdmFyIGFnZW50cyA9IFsnYW5kcm9pZCcsICd3ZWJvcycsICdpcGhvbmUnLCAnaXBhZCcsICdibGFja2JlcnJ5J107XG5cdCAgICBmb3IoaSBpbiBhZ2VudHMpIHtcblx0ICAgICAgICBpZigobmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLnNlYXJjaChhZ2VudHNbaV0pPi0xKSAmJiAod2luZG93Lm9yaWVudGF0aW9uIT09dW5kZWZpbmVkKSkge1xuXHQgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdH07XG5cblx0dmFyIGlzTW9iaWxlRmxhZyA9IGlzX21vYmlsZSgpO1xuXHRnbG9iYWwubXlTaXRlLmlzTW9iaWxlRmxhZyA9IGlzTW9iaWxlRmxhZztcblxuXHQvL2NvbnNvbGUubG9nKFwiaXNNb2JpbGVGbGFnOiBcIitpc01vYmlsZUZsYWcpO1xuXG5cdGlmIChpc01vYmlsZUZsYWc9PT10cnVlKSB7XG5cdFx0JChcImJvZHlcIikuYWRkQ2xhc3MoXCJpc01vYmlsZVwiKTtcblx0fVxuXG5cdGZ1bmN0aW9uIG5hdk1lbnVJbml0KCkge1xuXHQgICAgXG5cdCAgICAkKCcjbWFpbk5hdmJhcicpLm9uKCdzaG93LmJzLmNvbGxhcHNlJywgZnVuY3Rpb24gKCkge1xuICBcdFx0XHQkKFwiLmhhbWJ1cmdlcl9fbWVudS1pY29uXCIpLmFkZENsYXNzKFwiaGFtYnVyZ2VyX19tZW51LWljb24tLWNsb3NlLXhcIik7XG5cdFx0fSlcbiBcdFx0JCgnI21haW5OYXZiYXInKS5vbignaGlkZS5icy5jb2xsYXBzZScsIGZ1bmN0aW9uICgpIHtcbiAgXHRcdFx0JChcIi5oYW1idXJnZXJfX21lbnUtaWNvblwiKS5yZW1vdmVDbGFzcyhcImhhbWJ1cmdlcl9fbWVudS1pY29uLS1jbG9zZS14XCIpO1xuXHRcdH0pXG5cblx0ICAgICQoJy5uYXYtbGluaycpLm9uKCAnY2xpY2snLCBmdW5jdGlvbihlKSB7XG5cdCAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgICAgIHZhciB1cmwgPSB0aGlzLmhyZWYudHJpbSgpLnRvTG93ZXJDYXNlKCk7ICAgXG5cdCAgICAgICAgdmFyIG1lbnVOYW1lID0gdGhpcy5wYXRobmFtZS50cmltKCkudG9Mb3dlckNhc2UoKTtcblx0XHRcdFxuXHQgICAgICAgICQodGhpcykuc2libGluZ3MoXCIubmF2LWxpbmtcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG5cdCAgICAgICAgJCh0aGlzKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcblxuXHRcdFx0aWYgKGNvbnRyb2xsZXIhPT11bmRlZmluZWQgJiYgY29udHJvbGxlciE9PW51bGwpIHtcblx0XHRcdFx0Y29udHJvbGxlciA9IGNvbnRyb2xsZXIuZGVzdHJveSh0cnVlKTtcblx0XHRcdH1cblx0ICAgICAgICAvL2NvbnNvbGUubG9nKFwidXJsIDogIFwiICsgdXJsKTtcblx0ICAgICAgICAvL2NvbnNvbGUubG9nKG1lbnVOYW1lKTsgXG5cblx0XHRcdC8vY2xvc2UgdGhlIG1vYmlsZSBtZW51IGlmIGl0IGlzIG9wZW5lZFxuXHRcdFx0JCgnI21haW5OYXZiYXInKS5jb2xsYXBzZSgnaGlkZScpO1xuXHQgICAgICAgICQoJy5sb2FkZXItd3JhcHBlcicpLnNob3coKTtcblxuXHQgICAgICAgICQoJyNhamF4LWNvbnRhaW5lcicpLmFuaW1hdGVDc3MoJ2ZhZGVPdXREb3duJywgZnVuY3Rpb24oKXtcblx0ICAgICAgICBcdFxuXHQgICAgICAgIFx0dmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgICAgIFx0JChcImJvZHksaHRtbFwiKS5zdG9wKCkuYW5pbWF0ZSh7c2Nyb2xsVG9wOjB9LCAnNTAnKTtcblxuXHQgICAgICAgIFx0JCgnI2FqYXgtY29udGVudCcpLmxvYWQodXJsICsgJyAjYWpheC1jb250YWluZXInLCBmdW5jdGlvbihyZXN1bHQsc3RhdHVzKXtcblx0ICAgICAgICBcdFx0XG5cdCAgICAgICAgXHRcdGlmIChzdGF0dXMgPT09IFwic3VjY2Vzc1wiKSB7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHQkKHNlbGYpLnJlbW92ZSgpO1xuXHQgICAgICAgIFx0XHRcdCQoJyNhamF4LWNvbnRlbnQnKS5oaWRlKCk7XG5cdFx0ICAgICAgICBcdFx0JCgnLmxvYWRlci13cmFwcGVyJykuaGlkZSgpO1xuXHRcdCAgICAgICAgXHRcdCQoJyNhamF4LWNvbnRlbnQnKS5zaG93KCk7XG5cdFx0ICAgICAgICBcdFx0JCgnI2FqYXgtY29udGVudCcpLmFuaW1hdGVDc3MoJ2ZhZGVJblVwJyk7XG5cdFx0ICAgICAgICBcdFx0XG5cdFx0ICAgICAgICBcdFx0cGxhY2VDb250YWN0TGlzdGVuZXJzKCk7XG5cdFx0ICAgICAgICBcdFx0cGxhY2VCdXR0b25Nb3ZlVXBMaXN0ZW5lcigpO1xuXHRcdCAgICAgICAgXHRcdHBsYWNlTGFuZ1N3aXRjaExpc3RlbmVyKHRydWUpO1xuXHRcdCAgICAgICAgXHRcdGlmIChtZW51TmFtZS5zZWFyY2goXCJyZWFsaXNhdGlvbnMuaHRtbFwiKT4tMSkge1xuXHRcdCAgICAgICAgXHRcdFx0aW5pdENvbW1pc2lvbnNHYWxsZXJ5KCk7XG5cdFx0ICAgICAgICBcdFx0fSBlbHNlIGlmIChtZW51TmFtZS5zZWFyY2goXCJjb250YWN0Lmh0bWxcIik+LTEpIHtcblx0XHQgICAgICAgIFx0XHRcdGluaXRDb250YWN0TWFwKCk7XG5cdFx0ICAgICAgICBcdFx0XHRpbml0Q29udGFjdEZvcm1MaXN0ZW5lcigpO1xuXHRcdCAgICAgICAgXHRcdH0gZWxzZSBpZiAobWVudU5hbWUuc2VhcmNoKFwiaW5kZXguaHRtbFwiKT4tMSkge1xuXHRcdCAgICAgICAgXHRcdFx0aW5pdENhcm91c2VscygpO1xuXHRcdCAgICAgICAgXHRcdFx0bGlua1RvR2FsbGVyeSgpO1xuXHRcdCAgICAgICAgXHRcdFx0aWYgKCFpc01vYmlsZUZsYWcpIHtcblx0XHRcdFx0XHQgICAgICAgIFx0Y29udHJvbGxlciA9IG5ldyBTY3JvbGxNYWdpYy5Db250cm9sbGVyKHtnbG9iYWxTY2VuZU9wdGlvbnM6IHt0cmlnZ2VySG9vazogXCJvbkVudGVyXCIsIGR1cmF0aW9uOiBcIjEwMCVcIn19KTtcblx0XHRcdFx0XHQgICAgICAgIFx0cGFyYWxsYXgxID0gbmV3IFNjcm9sbE1hZ2ljLlNjZW5lKHt0cmlnZ2VyRWxlbWVudDogXCIjcGFyYWxsYXgxXCJ9KVxuXHRcdFx0XHRcdCAgICAgICAgICAgIFx0LnNldFR3ZWVuKFwiI3BhcmFsbGF4MSA+IGRpdlwiLCB7eTogXCI1MCVcIiwgZWFzZTogTGluZWFyLmVhc2VOb25lfSlcblx0XHRcdFx0XHQgICAgICAgICAgICBcdC8vLmFkZEluZGljYXRvcnMoKVxuXHRcdFx0XHRcdCAgICAgICAgICAgIFx0LmFkZFRvKGNvbnRyb2xsZXIpO1xuXHRcdFx0XHRcdCAgICAgICAgfVxuXG5cdFx0ICAgICAgICBcdFx0fSBlbHNlIGlmIChtZW51TmFtZS5zZWFyY2goXCJhYm91dC5odG1sXCIpPi0xKSB7XG5cdFx0ICAgICAgICBcdFx0XHRpbml0Q2Fyb3VzZWxzKCk7XG5cdFx0ICAgICAgICBcdFx0XHRpZiAoIWlzTW9iaWxlRmxhZykge1xuXHRcdFx0ICAgICAgICBcdFx0XHRjb250cm9sbGVyID0gbmV3IFNjcm9sbE1hZ2ljLkNvbnRyb2xsZXIoe2dsb2JhbFNjZW5lT3B0aW9uczoge3RyaWdnZXJIb29rOiBcIm9uRW50ZXJcIiwgZHVyYXRpb246IFwiMTAwJVwifX0pO1xuXHRcdFx0ICAgICAgICBcdFx0XHRwYXJhbGxheDIgPSBuZXcgU2Nyb2xsTWFnaWMuU2NlbmUoe3RyaWdnZXJFbGVtZW50OiBcIiNwYXJhbGxheDJcIn0pXG5cdFx0XHRcdFx0XHRcdCAgICBcdC5zZXRUd2VlbihcIiNwYXJhbGxheDIgPiBkaXZcIiwge3k6IFwiNTAlXCIsIGVhc2U6IExpbmVhci5lYXNlTm9uZX0pXG5cdFx0XHRcdFx0XHRcdCAgICBcdC8vLmFkZEluZGljYXRvcnMoKVxuXHRcdFx0XHRcdFx0XHQgICAgXHQuYWRkVG8oY29udHJvbGxlcik7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHQgICAgICAgIFx0XHR9IGVsc2UgaWYgKG1lbnVOYW1lLnNlYXJjaChcInByaWNpbmcuaHRtbFwiKT4tMSkge1xuXHRcdCAgICAgICAgXHRcdFx0aW5pdFByaWNpbmdHYWxsZXJ5KCk7XG5cdFx0ICAgICAgICBcdFx0fVxuXHQgICAgICAgIFx0XHR9IGVsc2UgaWYgKHN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG5cdCAgICAgICAgXHRcdFx0JCgnLmxvYWRlci13cmFwcGVyJykuaGlkZSgpO1xuXHQgICAgICAgIFx0XHRcdGNvbnNvbGUubG9nKFwiRXJyb3IgbG9hZGluZyBmcm9tIHNlcnZlci4uLlwiKTtcblx0ICAgICAgICBcdFx0fVxuXHQgICAgICAgIFx0fSk7IC8vIGVuZCBvZiBhamF4IGxvYWQgZnVuY3Rpb25cblx0ICAgICAgICB9KTsgIC8vIGVuZCBvZiBhbmltYXRlQ3NzIGZ1bmN0aW9uXG5cblx0ICAgIH0pOyAvLyBlbmQgb2YgY2xpY2sgbGlzdGVuZXJcblx0ICAgXG5cdH1cblxuXHRmdW5jdGlvbiBwbGFjZUNvbnRhY3RMaXN0ZW5lcnMoKSB7XG5cdFx0JChcIi5idG4tbWFwXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSl7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR2YXIgJHRoaXM9JCh0aGlzKTtcblxuXHRcdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvcmllbnRhdGlvbmNoYW5nZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCR0aGlzLmNoaWxkcmVuKCkuaGFzQ2xhc3MoXCJmYS1leHBhbmRcIikpIHtcblx0XHRcdFx0XHRpZiAod2luZG93Lm1hdGNoTWVkaWEoXCIob3JpZW50YXRpb246IGxhbmRzY2FwZSlcIikubWF0Y2hlcyAmJiB3aW5kb3cuaW5uZXJXaWR0aDw3NjcpIHtcblx0XHRcdFx0XHRcdCQoXCIjY29udGFjdC1tYXBcIikuYW5pbWF0ZSh7XG5cdFx0XHRcdFx0XHRcdGhlaWdodDogXCI3NXZoXCJcblx0XHRcdFx0XHRcdH0sNTAwLCBmdW5jdGlvbigpe1xuXHRcdFx0XHRcdFx0XHRnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKG15TWFwLCBcInJlc2l6ZVwiKTtcblx0XHRcdFx0XHRcdFx0bXlNYXAuc2V0Q2VudGVyKG15UG9zaXRpb24pO1xuXHRcdFx0XHRcdFx0XHRteU1hcC5wYW5CeSgwLCgtJChcIm5hdi5uYXZiYXJcIikuaGVpZ2h0KCkpKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQkKFwiI2NvbnRhY3QtbWFwXCIpLmFuaW1hdGUoe1xuXHRcdFx0XHRcdFx0XHRoZWlnaHQ6IFwiNTB2aFwiXG5cdFx0XHRcdFx0XHR9LDUwMCwgZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdFx0Z29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcihteU1hcCwgXCJyZXNpemVcIik7XG5cdFx0XHRcdFx0XHRcdG15TWFwLnNldENlbnRlcihteVBvc2l0aW9uKTtcblx0XHRcdFx0XHRcdFx0bXlNYXAucGFuQnkoMCwoLSQoXCJuYXYubmF2YmFyXCIpLmhlaWdodCgpKSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sIGZhbHNlKTtcblxuXHRcdFx0aWYgKCR0aGlzLmNoaWxkcmVuKCkuaGFzQ2xhc3MoXCJmYS1leHBhbmRcIikpIHtcblx0XHRcdFx0JHRoaXMuY2hpbGRyZW4oKS5yZW1vdmVDbGFzcyhcImZhLWV4cGFuZFwiKS5hZGRDbGFzcyhcImZhLWNvbXByZXNzXCIpO1xuXHRcdFx0XHQkKFwiI2NvbnRhY3QtbWFwXCIpLmFuaW1hdGUoe1xuXHRcdFx0XHRcdGhlaWdodDogXCIxMDB2aFwiXG5cdFx0XHRcdH0sNTAwLCBmdW5jdGlvbigpe1xuXHRcdFx0XHRcdGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIobXlNYXAsIFwicmVzaXplXCIpO1xuXHRcdFx0XHRcdG15TWFwLnNldENlbnRlcihteVBvc2l0aW9uKTtcblx0XHRcdFx0XHRteU1hcC5wYW5CeSgwLCgtJChcIm5hdi5uYXZiYXJcIikuaGVpZ2h0KCkpKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH0gZWxzZSBpZiAoJHRoaXMuY2hpbGRyZW4oKS5oYXNDbGFzcyhcImZhLWNvbXByZXNzXCIpKSB7XG5cdFx0XHRcdCR0aGlzLmNoaWxkcmVuKCkucmVtb3ZlQ2xhc3MoXCJmYS1jb21wcmVzc1wiKS5hZGRDbGFzcyhcImZhLWV4cGFuZFwiKTtcblx0XHRcdFx0aWYgKHdpbmRvdy5tYXRjaE1lZGlhKFwiKG9yaWVudGF0aW9uOiBsYW5kc2NhcGUpXCIpLm1hdGNoZXMgJiYgd2luZG93LmlubmVyV2lkdGg8NzY3KSB7XG5cdFx0XHRcdFx0JChcIiNjb250YWN0LW1hcFwiKS5hbmltYXRlKHtcblx0XHRcdFx0XHRcdGhlaWdodDogXCI3NXZoXCJcblx0XHRcdFx0XHR9LDUwMCwgZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIobXlNYXAsIFwicmVzaXplXCIpO1xuXHRcdFx0XHRcdFx0bXlNYXAuc2V0Q2VudGVyKG15UG9zaXRpb24pO1xuXHRcdFx0XHRcdFx0bXlNYXAucGFuQnkoMCwoLSQoXCJuYXYubmF2YmFyXCIpLmhlaWdodCgpKSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JChcIiNjb250YWN0LW1hcFwiKS5hbmltYXRlKHtcblx0XHRcdFx0XHRcdGhlaWdodDogXCI1MHZoXCJcblx0XHRcdFx0XHR9LDUwMCwgZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIobXlNYXAsIFwicmVzaXplXCIpO1xuXHRcdFx0XHRcdFx0bXlNYXAuc2V0Q2VudGVyKG15UG9zaXRpb24pO1xuXHRcdFx0XHRcdFx0bXlNYXAucGFuQnkoMCwoLSQoXCJuYXYubmF2YmFyXCIpLmhlaWdodCgpKSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KVxuXHR9XG5cblx0ZnVuY3Rpb24gcGxhY2VCdXR0b25Nb3ZlVXBMaXN0ZW5lcigpIHtcblx0XHRcblx0XHR2YXIgb2ZmU2V0WT0wO1xuXHRcdCQod2luZG93KS5vbihcInNjcm9sbFwiLCBmdW5jdGlvbigpe1xuXHRcdFx0dmFyIGFjdHVhbEhlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKTtcblx0XHRcdHZhciBhY3R1YWxTY3JvbGxQb3MgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XG5cblx0XHRcdG9mZlNldFkgPSBhY3R1YWxIZWlnaHQvNTtcblx0XHRcdFxuXHRcdFx0aWYgKGFjdHVhbFNjcm9sbFBvczwwKSB7YWN0dWFsU2Nyb2xsUG9zPTB9O1xuXG5cdFx0XHQvL2NvbnNvbGUubG9nKGFjdHVhbEhlaWdodCxhY3R1YWxTY3JvbGxQb3MpO1xuXHRcdFx0Ly9jb25zb2xlLmxvZyhhY3R1YWxIZWlnaHQtb2ZmU2V0WSxhY3R1YWxTY3JvbGxQb3MpO1xuXG5cdFx0XHRpZiAoKChhY3R1YWxIZWlnaHQtb2ZmU2V0WSkvYWN0dWFsU2Nyb2xsUG9zKT4xKSB7XG5cdFx0XHRcdGlmICgkKCcuYnRuLW1vdmUtdXAnKS5pcyhcIjp2aXNpYmxlXCIpKSB7XG5cdFx0XHRcdFx0JChcIi5idG4tbW92ZS11cFwiKS5hbmltYXRlQ3NzKCdib3VuY2VPdXQnLCBmdW5jdGlvbigpe1xuXHRcdFx0XHRcdFx0JChcIi5idG4tbW92ZS11cFwiKS5oaWRlKCk7XG5cdFx0XHRcdFx0XHQkKFwiLmJ0bi1kb3duXCIpLnNob3coKS5hbmltYXRlQ3NzKCdib3VuY2VJbicpO1xuXHRcdFx0XHRcdFx0Ly8kKFwiLmJ0bi1kb3duXCIpLmFuaW1hdGVDc3MoJ2JvdW5jZUluJyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAoISQoJy5idG4tbW92ZS11cCcpLmlzKFwiOnZpc2libGVcIikpIHtcbiBcdFx0XHRcdFx0JChcIi5idG4tZG93blwiKS5hbmltYXRlQ3NzKCdib3VuY2VPdXQnLGZ1bmN0aW9uKCl7XG4gXHRcdFx0XHRcdFx0JChcIi5idG4tZG93blwiKS5oaWRlKCk7XG4gXHRcdFx0XHRcdFx0JChcIi5idG4tbW92ZS11cFwiKS5zaG93KCk7XG4gXHRcdFx0XHRcdFx0JChcIi5idG4tbW92ZS11cFwiKS5hbmltYXRlQ3NzKCdib3VuY2VJbicpO1xuIFx0XHRcdFx0XHR9KTtcbiBcdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0XHQkKFwiLmJ0bi1tb3ZlLXVwXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcblx0XHRcdCQoXCJib2R5LGh0bWxcIikuc3RvcCgpLmFuaW1hdGUoe3Njcm9sbFRvcDowfSwgJzcwMCcsIFwic3dpbmdcIik7XG5cdFx0fSk7XG5cdFx0JChcIi5idG4tZG93blwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpe1xuXHRcdFx0Y29uc29sZS5sb2coZSk7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR2YXIganVtcEhhc2ggPSBlLmN1cnJlbnRUYXJnZXQuaGFzaDtcblx0XHRcdHZhciBqdW1wUG9pbnQgPSAkKGp1bXBIYXNoKS5vZmZzZXQoKS50b3A7XG5cdFx0XHQkKFwiYm9keSxodG1sXCIpLnN0b3AoKS5hbmltYXRlKHtzY3JvbGxUb3A6anVtcFBvaW50fSwgJzcwMCcsIFwic3dpbmdcIik7XG5cdFx0fSk7XG5cdFx0XG5cdH1cblxuXHRmdW5jdGlvbiBwbGFjZUxhbmdTd2l0Y2hMaXN0ZW5lcih1cGRhdGUpIHtcblx0XHR2YXIgdXBkYXRlID0gdXBkYXRlIHx8IGZhbHNlO1xuXHRcdHZhciBhY3RpdmVMYW5nID0gJChcIi5sYW5nLXN3aXRjaGVyPnNwYW5cIikudGV4dCgpLnRyaW0oKTtcblxuXHRcdGlmICh1cGRhdGUpIHtMTkckKGFjdGl2ZUxhbmcpLnN3aXRjaExhbmcoYWN0aXZlTGFuZyk7fVxuXG5cdFx0JChcIi5sYW5nLXN3aXRjaGVyPnNwYW5cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbigpe1xuXHRcdFx0aWYgKGFjdGl2ZUxhbmcgPT09IFwiY3pcIikge1xuXHRcdFx0XHRhY3RpdmVMYW5nID0gXCJlblwiO1xuXHRcdFx0XHQkKFwiLmxhbmctc3dpdGNoZXI+c3BhblwiKS50ZXh0KGFjdGl2ZUxhbmcpO1xuXHRcdFx0XHRMTkckKGFjdGl2ZUxhbmcpLnN3aXRjaExhbmcoYWN0aXZlTGFuZyk7XG5cdFx0XHR9IGVsc2UgaWYgKGFjdGl2ZUxhbmcgPT09IFwiZW5cIikge1xuXHRcdFx0XHRhY3RpdmVMYW5nID0gXCJjelwiO1xuXHRcdFx0XHQkKFwiLmxhbmctc3dpdGNoZXI+c3BhblwiKS50ZXh0KGFjdGl2ZUxhbmcpO1xuXHRcdFx0XHRMTkckKGFjdGl2ZUxhbmcpLnN3aXRjaExhbmcoYWN0aXZlTGFuZyk7XG5cdFx0XHR9XG5cdFx0XHQkKHRoaXMpLmFuaW1hdGVDc3MoXCJib3VuY2VJblwiKTtcblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGxpbmtUb0dhbGxlcnkoKXtcblxuXHRcdCQoXCIuYnRuLXNpdGVcIikub24oJ2NsaWNrJyxmdW5jdGlvbihlKXtcblx0XHRcdGUucHJldmVudERlZmF1bHQ7XG5cdFx0XHR2YXIgZ2FsTGluayA9ICQodGhpcykuZGF0YSgnbGluaycpLnRyaW0oKTtcblx0XHRcdHZhciB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcblx0XHRcdGlmICh1cmwuc2VhcmNoKFwiaW5kZXguaHRtbFwiKSA+PSAwICkge1xuXHRcdFx0XHR1cmwgPSB1cmwucmVwbGFjZShcImluZGV4Lmh0bWxcIixcInJlYWxpc2F0aW9ucy5odG1sXCIpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dXJsID0gdXJsICsgXCJyZWFsaXNhdGlvbnMuaHRtbFwiO1xuXHRcdFx0fVxuXHRcdFx0Ly9jb25zb2xlLmxvZyhcInVybCA6IFwiKyB1cmwpO1xuXG5cdCAgICAgICAgJCgnI2FqYXgtY29udGFpbmVyJykuYW5pbWF0ZUNzcygnZmFkZU91dERvd24nLCBmdW5jdGlvbigpe1xuXHQgICAgICAgIFx0JCgnI2FqYXgtY29udGVudCcpLmhpZGUoKTtcblx0ICAgICAgICBcdCQoJyNhamF4LWNvbnRlbnQnKS5sb2FkKHVybCArICcgI2FqYXgtY29udGFpbmVyJywgZnVuY3Rpb24oKXtcblx0ICAgICAgICBcdFx0JChcIi5uYXZiYXItbmF2Pi5uYXYtbGlua1wiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcblx0ICAgICAgICBcdFx0JChcIi5uYXZiYXItbmF2Pi5uYXYtbGlua1tocmVmPSdyZWFsaXNhdGlvbnMuaHRtbCddXCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuXHQgICAgICAgIFx0XHRcblx0ICAgICAgICBcdFx0JCgnI2FqYXgtY29udGVudCcpLnNob3coKTtcblx0ICAgICAgICBcdFx0JCgnI2FqYXgtY29udGVudCcpLmFuaW1hdGVDc3MoJ2ZhZGVJblVwJyk7XG5cdCAgICAgICAgXHRcdHBsYWNlQ29udGFjdExpc3RlbmVycygpO1xuXHQgICAgICAgIFx0XHRwbGFjZUJ1dHRvbk1vdmVVcExpc3RlbmVyKCk7XG5cdCAgICAgICAgXHRcdHBsYWNlTGFuZ1N3aXRjaExpc3RlbmVyKCk7XG5cdCAgICAgICAgXHRcdGluaXRDb21taXNpb25zR2FsbGVyeShmdW5jdGlvbigpe1xuXHRcdCAgICAgICAgXHRcdCQoXCIuZmlsdGVyLWl0ZW1cIikuZWFjaChmdW5jdGlvbihpKXtcblx0XHQgICAgICAgIFx0XHRcdGlmICgkKHRoaXMpLnRleHQoKS50b0xvd2VyQ2FzZSgpLnRyaW0oKSA9PT0gZ2FsTGluaykge1xuXHRcdCAgICAgICAgXHRcdFx0XHQkKHRoaXMpLnRyaWdnZXIoJ2NsaWNrJyk7XG5cdFx0ICAgICAgICBcdFx0XHRcdHJldHVybjtcblx0XHQgICAgICAgIFx0XHRcdH1cblx0XHQgICAgICAgIFx0XHR9KTtcblxuXHQgICAgICAgIFx0XHR9KTtcblx0ICAgICAgICBcdH0pO1xuXHQgICAgICAgIH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0aWYgKCFpc01vYmlsZUZsYWcpIHtcbiAgICAgICAgdmFyIGNvbnRyb2xsZXIgPSBuZXcgU2Nyb2xsTWFnaWMuQ29udHJvbGxlcih7Z2xvYmFsU2NlbmVPcHRpb25zOiB7dHJpZ2dlckhvb2s6IFwib25FbnRlclwiLCBkdXJhdGlvbjogXCIxMDAlXCJ9fSk7XG4gICAgICAgIHZhciBwYXJhbGxheDEgPSBuZXcgU2Nyb2xsTWFnaWMuU2NlbmUoe3RyaWdnZXJFbGVtZW50OiBcIiNwYXJhbGxheDFcIn0pXG4gICAgICAgICAgICAuc2V0VHdlZW4oXCIjcGFyYWxsYXgxID4gZGl2XCIsIHt5OiBcIjUwJVwiLCBlYXNlOiBMaW5lYXIuZWFzZU5vbmV9KVxuICAgICAgICAgICAgLy8uYWRkSW5kaWNhdG9ycygpXG4gICAgICAgICAgICAuYWRkVG8oY29udHJvbGxlcik7XG4gICAgfVxuXG5cblx0bGlua1RvR2FsbGVyeSgpO1xuXHRuYXZNZW51SW5pdCgpO1xuXHRwbGFjZUNvbnRhY3RMaXN0ZW5lcnMoKTtcblx0cGxhY2VCdXR0b25Nb3ZlVXBMaXN0ZW5lcigpO1xuXHRwbGFjZUxhbmdTd2l0Y2hMaXN0ZW5lcigpO1xuXHQvL2luaXRQYXJhbGxheCgpO1xuXG5cdGdsb2JhbC5teVNpdGUubmF2TWVudUluaXQgPSBuYXZNZW51SW5pdDtcblx0Z2xvYmFsLm15U2l0ZS5wbGFjZUNvbnRhY3RMaXN0ZW5lcnMgPSBwbGFjZUNvbnRhY3RMaXN0ZW5lcnM7XG5cdGdsb2JhbC5teVNpdGUucGxhY2VCdXR0b25Nb3ZlVXBMaXN0ZW5lciA9IHBsYWNlQnV0dG9uTW92ZVVwTGlzdGVuZXI7XG5cdGdsb2JhbC5teVNpdGUucGxhY2VMYW5nU3dpdGNoTGlzdGVuZXIgPSBwbGFjZUxhbmdTd2l0Y2hMaXN0ZW5lcjtcblxufSh3aW5kb3cpKTsiLCIvLyAtLS0tLS0tLS0tIFBPUlRGT0xJTyBGSUxURVIgLS0tLS0tLS0tLVxuXG5cdGZ1bmN0aW9uIGluaXRDb21taXNpb25zR2FsbGVyeShjYWxsYmFja0Z1bmMpe1xuXHRcdHZhciBjYWxsYmFja0Z1bmMgPSBjYWxsYmFja0Z1bmMgfHwgZnVuY3Rpb24oKXt9O1xuXHRcdHZhciBicm9rZW5Db3VudCA9IDA7XG5cblx0XHQkKFwiLmdyaWQtaXRlbT4uaW1nLXJlc3VsdC13cmFwcGVyXCIpLmhpZGUoKTtcblx0XHQkKFwiLmdyaWQtaXRlbT4uaW1nLWxvYWRlci13cmFwcGVyXCIpLnNob3coKTtcblx0XHQkKFwiLmdyaWQ+LmdyaWQtaXRlbVwiKS5hZGRDbGFzcyhcImhvdmVyLW9mZlwiKTtcblxuXHRcdCQoJyNwb3J0Zm9saW9zJykuaW1hZ2VzTG9hZGVkKClcblx0XHQgIC5hbHdheXMoIGZ1bmN0aW9uKCBpbnN0YW5jZSApIHtcblx0XHQgICAgY29uc29sZS5sb2coXCJhbGwgaW1hZ2VzIG9mICdDb21taXNpb25zIG1lbnUnIGxvYWRlZFwiKTtcblx0XHQgICBcblx0XHRcdGluc3RhbnRpYXRlSXNvdG9wZUdhbGxlcnkoXCIuZ3JpZFwiLHtcblx0XHQgIFx0XHRpdGVtU2VsZWN0b3I6ICcuZ3JpZC1pdGVtJyxcblx0XHQgIFx0XHRzdGFnZ2VyOiAzMFxuXHRcdFx0fSk7XG5cdFx0ICAgIFxuXHRcdCAgICBidWlsZEltZ0NhdGVnb3JpZXMoXCIjZmlsdGVyLXBvcnRmb2xpb1wiLFwiI3BvcnRmb2xpby1nYWxsZXJ5IC5ncmlkLWl0ZW1cIik7XG5cdFx0ICAgIHBsYWNlRmlsdGVyTGlzdGVuZXJzKFwiLmdyaWRcIik7XG5cblx0XHRcdCQoXCIuZ3JpZC1pdGVtPi5pbWctcmVzdWx0LXdyYXBwZXJcIikuZmFkZU91dCgxMDAwKTtcblx0XHQgICAgJChcIi5pbWctbG9hZGVyPi5pbWctbG9hZGVyLXRleHRcIikudGV4dChcImltYWdlcyBsb2FkZWRcIik7XG5cdFx0ICAgICQoXCIuaW1nLWxvYWRlci1iYXJcIikuY3NzKFwiYmFja2dyb3VuZC1jb2xvclwiLFwiZ3JlZW5cIik7XG5cdFx0ICAgICQoXCIuaW1nLWxvYWRlclwiKS5kZWxheSgzMDAwKS5zbGlkZVVwKDEwMDApO1xuXHRcdCAgICAkKFwiLmdyaWQ+LmdyaWQtaXRlbVwiKS5yZW1vdmVDbGFzcyhcImhvdmVyLW9mZlwiKTtcblxuXHRcdCAgICBjYWxsYmFja0Z1bmMoKTtcblxuXHRcdCAgfSlcblx0XHQgIC5kb25lKCBmdW5jdGlvbigpIHtcblx0XHQgICAgY29uc29sZS5sb2coXCJhbGwgaW1hZ2VzIG9mICdDb21taXNpb25zIG1lbnUnIHN1Y2Nlc3NmdWxseSBsb2FkZWRcIik7XG5cblx0XHQgIH0pXG5cdFx0ICAuZmFpbCggZnVuY3Rpb24oKSB7XG5cdFx0ICAgIGNvbnNvbGUubG9nKCBicm9rZW5Db3VudCArIFwiIG9mICdDb21taXNpb25zIG1lbnUnIGltYWdlcyBoYXZlIGJyb2tlbiBsaW5rcy4gQ2hlY2sgeW91ciBpbWFnZSBwYXRocy5cIik7XG5cdFx0ICAgICQoXCIuaW1nLWxvYWRlclwiKS5kZWxheSgzMDAwKS5zbGlkZVVwKDEwMDApO1xuXHRcdCAgfSlcblx0XHQucHJvZ3Jlc3MoIGZ1bmN0aW9uKCBpbnN0YW5jZSwgaW1hZ2UgKSB7XG5cblx0XHQgICAgaWYgKGltYWdlLmlzTG9hZGVkKSB7XG5cdFx0ICAgIFx0JChpbWFnZS5pbWcpLnNpYmxpbmdzKFwiLmltZy1sb2FkZXItd3JhcHBlclwiKS5oaWRlKCk7XG5cdFx0ICAgIFx0JChpbWFnZS5pbWcpLnNpYmxpbmdzKFwiLmltZy1yZXN1bHQtd3JhcHBlclwiKS5hbmltYXRlQ3NzKFwiYm91bmNlSW5cIikuc2hvdygpO1xuXHRcdFx0XHQkKFwiLmltZy1sb2FkZXItYmFyXCIpLndpZHRoKChpbnN0YW5jZS5wcm9ncmVzc2VkQ291bnQvaW5zdGFuY2UuaW1hZ2VzLmxlbmd0aCkqMTAwICsgXCIlXCIpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0YnJva2VuQ291bnQrKztcblx0XHRcdFx0JChpbWFnZS5pbWcpLnBhcmVudCgpLnJlbW92ZSgpO1xuXHRcdFx0fVxuXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBpbml0UHJpY2luZ0dhbGxlcnkoKXtcblxuXHRcdHZhciBicm9rZW5Db3VudCA9IDA7XG5cdFx0JChcIi5ncmlkLXByaWNpbmc+LmdyaWQtaXRlbS1wcmljaW5nXCIpLmFkZENsYXNzKFwiaG92ZXItb2ZmXCIpO1xuXG5cdFx0JChcIiNwcmljaW5nXCIpLmltYWdlc0xvYWRlZCgpXG5cdFx0IFx0LmFsd2F5cyggZnVuY3Rpb24oIGluc3RhbmNlICkge1xuXHRcdCAgICBcdGNvbnNvbGUubG9nKFwiYWxsIGltYWdlcyBvZiAnUHJpY2luZyBtZW51JyBsb2FkZWRcIik7XG5cblx0XHQgICBcdFx0aW5zdGFudGlhdGVJc290b3BlR2FsbGVyeShcIi5ncmlkLXByaWNpbmdcIix7XG5cdFx0ICBcdFx0XHRpdGVtU2VsZWN0b3I6ICcuZ3JpZC1pdGVtLXByaWNpbmcnLFxuXHRcdCAgXHRcdFx0c3RhZ2dlcjogMzBcblx0XHRcdFx0fSk7XG5cblx0XHQgICAgXHRidWlsZEltZ0NhdGVnb3JpZXMoXCIjZmlsdGVyLXByaWNlbGlzdFwiLFwiI3ByaWNpbmctZ2FsbGVyeSAuZ3JpZC1pdGVtLXByaWNpbmdcIik7XG5cdFx0ICAgIFx0cGxhY2VGaWx0ZXJMaXN0ZW5lcnMoXCIuZ3JpZC1wcmljaW5nXCIpO1xuXHRcdCAgICBcdCQoXCIuZ3JpZC1wcmljaW5nPi5ncmlkLWl0ZW0tcHJpY2luZ1wiKS5yZW1vdmVDbGFzcyhcImhvdmVyLW9mZlwiKTtcblxuXHRcdCAgXHR9KVxuXHRcdCAgXHQuZG9uZSggZnVuY3Rpb24oKSB7XG5cdFx0ICAgIFx0Y29uc29sZS5sb2coXCJBbGwgaW1hZ2VzIG9mICdQcmljaW5nIG1lbnUnIHN1Y2Nlc3NmdWxseSBsb2FkZWRcIik7XG5cblx0XHQgIFx0fSlcblx0XHQgIFx0LmZhaWwoIGZ1bmN0aW9uKCkge1xuXHRcdCAgICBcdGNvbnNvbGUubG9nKCBicm9rZW5Db3VudCArIFwiIG9mICdQcmljaW5nIG1lbnUnIGltYWdlcyBoYXZlIGJyb2tlbiBsaW5rcy4gQ2hlY2sgeW91ciBpbWFnZSBwYXRocy5cIik7XG5cdFx0ICBcdH0pXG5cdFx0XHQucHJvZ3Jlc3MoIGZ1bmN0aW9uKCBpbnN0YW5jZSwgaW1hZ2UgKSB7XG5cblx0XHQgICAgXHRpZiAoIWltYWdlLmlzTG9hZGVkKSB7XG5cdFx0XHRcdFx0YnJva2VuQ291bnQrKztcblx0XHRcdFx0XHQkKGltYWdlLmltZykucGFyZW50KCkucmVtb3ZlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHR9XG5cblxuXHRmdW5jdGlvbiBpbnN0YW50aWF0ZUlzb3RvcGVHYWxsZXJ5KGVsLG9wdGlvbnMpe1xuXHRcdCQoZWwpLmlzb3RvcGUob3B0aW9ucyk7XG5cdH1cblxuXHRmdW5jdGlvbiBidWlsZEltZ0NhdGVnb3JpZXMobGlzdEVsZW1lbnQsaW1nQ29udGFpbmVycykge1xuXG5cdFx0dmFyICRpbWdDb250YWluZXJzID0gJChpbWdDb250YWluZXJzKTtcblx0XHR2YXIgJGJ1dHRvbnMgPSAkKGxpc3RFbGVtZW50KTtcblx0XHR2YXIgdGFnZ2VkID0ge307XG5cblx0XHQkYnV0dG9ucy5jaGlsZHJlbigpLnJlbW92ZSgpO1xuXG5cdFx0JGltZ0NvbnRhaW5lcnMuZWFjaChmdW5jdGlvbigpe1xuXHRcdFx0dmFyIGltZ0NvbnRhaW5lcj10aGlzO1xuXHRcdFx0dmFyIHRhZ3MgPSAkKHRoaXMpLmRhdGEoJ3BvcnRmb2xpby10YWdzJyk7XG5cblx0XHRcdGlmICh0YWdzKSB7XG5cdFx0XHRcdHRhZ3Muc3BsaXQoXCIsXCIpLmZvckVhY2goZnVuY3Rpb24odGFnTmFtZSl7XG5cdFx0XHRcdFx0dGFnTmFtZSA9IHRhZ05hbWUudHJpbSgpO1xuXHRcdFx0XHRcdGlmICh0YWdnZWRbdGFnTmFtZV09PW51bGwpIHtcblx0XHRcdFx0XHRcdHRhZ2dlZFt0YWdOYW1lXT1bXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dGFnZ2VkW3RhZ05hbWVdLnB1c2goaW1nQ29udGFpbmVyKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSlcblx0XHRcblx0XHQkYnV0dG9ucy5hZGRDbGFzcyhcImZpbHRlci13cmFwcGVyXCIpO1xuXHRcdCQoXCI8bGkvPlwiKS5hcHBlbmRUbygkYnV0dG9ucyk7XG5cblx0XHQkKFwiPGEvPlwiLCB7XG5cdFx0XHR0ZXh0OiBcIlbFoWVcIixcblx0XHRcdGNsYXNzOiBcImZpbHRlci1pdGVtIHNlbGVjdGVkXCIsXG5cdFx0XHRjbGljazogZnVuY3Rpb24oKXtcblx0XHRcdFx0JCh0aGlzKS5hZGRDbGFzcyhcInNlbGVjdGVkXCIpLnBhcmVudCgpLnNpYmxpbmdzKCkuY2hpbGRyZW4oKS5yZW1vdmVDbGFzcyhcInNlbGVjdGVkXCIpO1xuXHRcdFx0fVxuXHRcdH0pLmFwcGVuZFRvKCRidXR0b25zLmNoaWxkcmVuKCkuZXEoMCkpLmF0dHIoJ2RhdGEtbGFuZycsJ1bFoWUnKTtcblxuXHRcdCQoXCI8bGk+PGEgY2xhc3M9J2ZpbHRlci1pdGVtIGZpbHRlci1wb3J0Zm9saW8tZGl2aWRlcic+Jm5ic3A7PC9hPjwvbGk+XCIpLmFwcGVuZFRvKCRidXR0b25zKTtcblxuXHRcdCQuZWFjaCh0YWdnZWQsIGZ1bmN0aW9uKHRhZ05hbWUpIHtcblx0XHRcdCQoXCI8bGkvPlwiKS5hcHBlbmRUbygkYnV0dG9ucyk7XG5cblx0XHRcdCQoXCI8YS8+XCIsIHtcblx0XHRcdFx0dGV4dDogdGFnTmFtZSxcblx0XHRcdFx0Y2xhc3M6IFwiZmlsdGVyLWl0ZW1cIixcblx0XHRcdFx0Y2xpY2s6IGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0JCh0aGlzKS5hZGRDbGFzcyhcInNlbGVjdGVkXCIpLnBhcmVudCgpLnNpYmxpbmdzKCkuY2hpbGRyZW4oKS5yZW1vdmVDbGFzcyhcInNlbGVjdGVkXCIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KS5hcHBlbmRUbygkYnV0dG9ucy5jaGlsZHJlbigpLmxhc3QoKSkuYXR0cignZGF0YS1sYW5nJyx0YWdOYW1lKTtcblx0XHR9KVxuXG5cdH07XG5cblx0ZnVuY3Rpb24gcGxhY2VGaWx0ZXJMaXN0ZW5lcnMoZ3JpZEVsKSB7ICAgLy8gXCIuZ3JpZFwiXG5cdCAgICAkKCcuZmlsdGVyLXdyYXBwZXInKS5vbiggJ2NsaWNrJywgJy5maWx0ZXItaXRlbScsIGZ1bmN0aW9uKCkgeyBcblx0ICAgIFx0dmFyIGZpbHRlclZhbHVlID0gJCh0aGlzKS5kYXRhKCdsYW5nJyk7XG5cdCAgICBcdCAvLyBjb25zb2xlLmxvZyhcIi0tLS0tLS0tXCIpO1xuXHQgICAgXHQgLy8gY29uc29sZS5sb2coZmlsdGVyVmFsdWUpO1xuXG5cdCAgICBcdGlmIChmaWx0ZXJWYWx1ZSA9PT0gJCgkKFwiLmZpbHRlci1pdGVtXCIpWzBdKS5kYXRhKCdsYW5nJykpIHtcblx0ICAgIFx0XHQkKGdyaWRFbCkuaXNvdG9wZSh7XG5cdFx0XHRcdCAgXHRmaWx0ZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQgIFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdCAgXHQgIFx0fVxuXHRcdFx0XHR9KTtcblx0ICAgIFx0fSBlbHNlIHtcblx0XHRcdFx0JChncmlkRWwpLmlzb3RvcGUoe1xuXHRcdFx0XHQgIFx0ZmlsdGVyOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0ICBcdFx0dGFnVGV4dD0gJCh0aGlzKS5kYXRhKCdwb3J0Zm9saW9UYWdzJyk7XG5cdFx0XHRcdCAgXHRcdGZvdW5kID0gdGFnVGV4dC5zZWFyY2goZmlsdGVyVmFsdWUpO1xuXHRcdFx0XHRcdCAgXHRpZiAoZm91bmQ+IC0xKSB7XG5cdFx0XHRcdFx0ICBcdFx0cmV0dXJuIHRydWVcblx0XHRcdFx0XHQgIFx0fSAgIGVsc2Uge1xuXHRcdFx0XHRcdCAgXHRcdHJldHVybiBmYWxzZVx0IFx0XHQgIFx0XG5cdFx0XHRcdFx0ICBcdH1cblx0XHRcdCAgXHQgIFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0ICAgIH0pO1xuXG5cdFx0JChncmlkRWwgKyAnIC5ncmlkLWl0ZW0nKS5vbiggJ2NsaWNrJywgZnVuY3Rpb24oZSkgeyBcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdGlmICgkKHRoaXMpLmhhc0NsYXNzKCdncmlkLWl0ZW0tc2VsZWN0ZWQnKSkge1xuXHRcdFx0XHQkKHRoaXMpLnJlbW92ZUNsYXNzKCdncmlkLWl0ZW0tc2VsZWN0ZWQnKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCQoZ3JpZEVsICsgJyAuZ3JpZC1pdGVtJykucmVtb3ZlQ2xhc3MoJ2dyaWQtaXRlbS1zZWxlY3RlZCcpO1xuXHRcdFx0XHQkKHRoaXMpLmFkZENsYXNzKCdncmlkLWl0ZW0tc2VsZWN0ZWQnKTtcblx0XHRcdH1cblx0XHRcdCQoZ3JpZEVsKS5pc290b3BlKCdsYXlvdXQnKTtcblx0XHRcdC8vIGNvbnNvbGUubG9nKCdncmlkIGl0ZW0gY2xpY2tlZCcpO1xuXHRcdFx0Ly8gY29uc29sZS5sb2coJCh0aGlzKSk7XG5cdFx0fSk7XG5cdH1cbiJdfQ==
